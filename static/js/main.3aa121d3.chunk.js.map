{"version":3,"sources":["rightMenu.module.css","App.js","reportWebVitals.js","index.js","toolbar.module.css"],"names":["module","exports","initialState","version","objects","type","originX","originY","left","top","width","height","fill","stroke","strokeWidth","strokeDashArray","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","scaleX","scaleY","angle","flipX","flipY","opacity","shadow","visible","clipTo","backgroundColor","fillRule","paintFirst","globalCompositeOperation","transformMatrix","skewX","skewY","rx","ry","name","fontCheck","Set","sort","App","useState","past","setPast","future","setFuture","pageLoad","setPageLoad","canvasRef","useRef","mainDiv","rightBar","shapeCount","isDrawing","currentStroke","editPoly","openPoly","polyType","canvas","setCanvas","canvasTool","setCanvasTool","setStrokeWidth","r","g","b","a","setStrokeColor","setFillColor","textHighlight","setHighlight","dashSize","setDashSize","gapSize","setGapSize","setOpacity","setFont","fontSize","setFontSize","fontWeight","setFontWeight","fontStyle","setFontStyle","showStrokePicker","setShowStrokePicker","showFillPicker","setShowFillPicker","showHighlightPicker","setShowHighlightPicker","snap","newShape","anchors","pointer","line","origX","origY","arrow","selectedShape","polyPoints","rpolygon","Rectangle","circle","ellipse","polyLines","currentToolId","currentOpenPanel","calcPolygonPoints","sideCount","radius","sweep","Math","PI","cx","cy","points","i","x","cos","y","sin","push","saveCanvasState","newCanvasState","sessionStorage","clear","myFabricJSCanvas","JSON","stringify","React","useEffect","fontAvailable","values","font","document","fonts","check","add","getElementById","option","createElement","text","fabric","Canvas","current","set","fireMiddleClick","stopContextMenu","controlsAboveOverlay","preserveObjectStacking","perPixelTargetFind","undefined","data","parse","loadFromJSON","forEachObject","o","includes","remove","json","toJSON","length","renderAll","isDrawingMode","freeDrawingBrush","color","selection","defaultCursor","selectable","hoverCursor","allObjects","getObjects","lastObjectCreated","setActiveObject","on","options","target","locked","ceil","abs","e","polyGon","Polygon","click","polyLine","Polyline","console","log","editable","hasControls","hasBorders","str","get","id","split","matrix","calcTransformMatrix","transformedPoints","map","p","Point","pathOffset","util","transformPoint","pFill","pStroke","pName","updatedPoly","sendToBack","forEach","index","anchor","Circle","pname","object","getCenterPoint","pPoints","this","setViewportTransform","viewportTransform","isDragging","button","getPointer","IText","fontFamily","Line","x2","y2","arrowLinePoints","dx","x1","dy","y1","atan2","Triangle","Group","lockMovementX","lockMovementY","startPoint","endPoint","shiftKey","pop","newPolyLine","distance","sqrt","pow","window","confirm","objectCaching","Rect","startAngle","endAngle","max","Ellipse","altKey","newPoints","pointIndex","parseInt","cloneArray","slice","splice","activeShape","getActiveObject","rgba","substr","Number","isNaN","opt","delta","deltaY","zoom","getZoom","zoomToPoint","offsetX","offsetY","preventDefault","stopPropagation","vpt","getWidth","getHeight","evt","lastPosX","clientX","lastPosY","clientY","requestRenderAll","dispose","onUndo","newFuture","previous","onRedo","next","setShapeAttributes","attributes","Attributes","item","textBackgroundColor","deleteObjects","getActiveObjects","obj","w3_openPanel","panelId","style","display","setActiveTool","url","swatchStyles","reactCSS","default","borderRadius","background","blank","highlight","swatch","padding","boxShadow","cursor","backgroundImage","pickerContainer","popover","position","zIndex","cover","right","bottom","minDeviceWidth","ref","className","onKeyDown","event","key","ctrlKey","handleKeyDown","focus","tabIndex","tbStyles","propBar","href","buttontoolbar","onClick","disabled","tooltipDown","src","alt","tooltiptextDown","dropdown","dropdowncontent","value","min","onChange","rgb","checked","styles","menu","tableft","onMouseEnter","tooltip","tooltiptextleft","tabbar","library","File","close","title","btngroup","tooltiptextB","CanvasSet","LayerSet","sbtngroup","Warehouse","Phases","Measures","Animation","tab","tooltiptext","tabspace","evented","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"2FACAA,EAAOC,QAAU,CAAC,QAAU,2BAA2B,KAAO,wBAAwB,MAAQ,yBAAyB,IAAM,uBAAuB,QAAU,2BAA2B,SAAW,4BAA4B,OAAS,0BAA0B,OAAS,0BAA0B,QAAU,2BAA2B,YAAc,+BAA+B,gBAAkB,mCAAmC,aAAe,gCAAgC,SAAW,4BAA4B,UAAY,6BAA6B,EAAI,qBAAqB,KAAO,wBAAwB,UAAY,6BAA6B,SAAW,4BAA4B,UAAY,6BAA6B,OAAS,0BAA0B,SAAW,4BAA4B,UAAY,+B,kOCS7yBC,EAAe,CACnBC,QAAS,QACTC,QAAS,CACP,CACEC,KAAM,OACNF,QAAS,QACTG,QAAS,OACTC,QAAS,MACTC,KAAM,EACNC,IAAK,EACLC,MAAO,EACPC,OAAQ,EACRC,KAAM,QACNC,OAAQ,KACRC,YAAa,EACbC,gBAAiB,KACjBC,cAAe,OACfC,iBAAkB,EAClBC,eAAgB,QAChBC,iBAAkB,EAClBC,OAAQ,EACRC,OAAQ,EACRC,MAAO,EACPC,OAAO,EACPC,OAAO,EACPC,QAAS,EACTC,OAAQ,KACRC,SAAS,EACTC,OAAQ,KACRC,gBAAiB,GACjBC,SAAU,UACVC,WAAY,OACZC,yBAA0B,cAC1BC,gBAAiB,KACjBC,MAAO,EACPC,MAAO,EACPC,GAAI,EACJC,GAAI,EACJC,KAAM,kBAKNC,EAAY,IAAIC,IACpB,CAEE,QACA,cACA,cACA,UACA,UACA,eACA,UACA,gBACA,WACA,aACA,SACA,cACA,SACA,yBACA,WACA,SACA,UACA,uBACA,SACA,WACA,gBACA,gBACA,iBACA,sBACA,gBACA,UACA,qBACA,qBACA,wBACA,oBACA,uBACA,mBACA,kBACA,qBACA,eACA,kBACA,YACA,UACA,eACA,aACA,oBACA,oBACA,cACA,eACA,WACA,oBACA,iBACA,kBACA,SACA,QACA,UACA,SACA,SACA,kBACA,eACA,UACA,WACA,YACA,YAEA,sBACA,cACA,QACA,cACA,eACA,wBACA,mBACA,SACA,cACA,wBACA,cACA,aACA,YACA,qBACA,sBACA,eACA,kBACA,aACA,gBACA,cACA,UACA,SACA,gBA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","file":"static/js/main.3aa121d3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"library\":\"rightMenu_library__3TKOZ\",\"menu\":\"rightMenu_menu__DowC3\",\"right\":\"rightMenu_right__2Zxov\",\"tab\":\"rightMenu_tab__1dSAg\",\"tableft\":\"rightMenu_tableft__13hyu\",\"tabspace\":\"rightMenu_tabspace__35dOI\",\"active\":\"rightMenu_active__2aqeY\",\"tabbar\":\"rightMenu_tabbar__2o8VL\",\"tooltip\":\"rightMenu_tooltip__1m6_3\",\"tooltiptext\":\"rightMenu_tooltiptext__2iytP\",\"tooltiptextleft\":\"rightMenu_tooltiptextleft__wfYxn\",\"tooltiptextB\":\"rightMenu_tooltiptextB__1z6DY\",\"btngroup\":\"rightMenu_btngroup__1zNBd\",\"sbtngroup\":\"rightMenu_sbtngroup__29sC2\",\"a\":\"rightMenu_a__1IYRm\",\"File\":\"rightMenu_File__3qcVR\",\"CanvasSet\":\"rightMenu_CanvasSet__3CE8C\",\"LayerSet\":\"rightMenu_LayerSet__1tfXQ\",\"Warehouse\":\"rightMenu_Warehouse__9qLrQ\",\"Phases\":\"rightMenu_Phases__2EVWZ\",\"Measures\":\"rightMenu_Measures__3Wl1q\",\"Animation\":\"rightMenu_Animation__ZNii9\"};","import React, { useRef, useState } from \"react\";\nimport { fabric } from \"fabric\";\nimport { SketchPicker } from \"react-color\";\nimport MediaQuery from \"react-responsive\";\nimport reactCSS from \"reactcss\";\n\nimport \"./styles.css\";\nimport styles from \"./rightMenu.module.css\";\nimport tbStyles from \"./toolbar.module.css\";\n\nconst initialState = {\n  version: \"3.6.3\",\n  objects: [\n    {\n      type: \"rect\",\n      version: \"3.6.3\",\n      originX: \"left\",\n      originY: \"top\",\n      left: 0,\n      top: 0,\n      width: 1,\n      height: 1,\n      fill: \"black\",\n      stroke: null,\n      strokeWidth: 1,\n      strokeDashArray: null,\n      strokeLineCap: \"butt\",\n      strokeDashOffset: 0,\n      strokeLineJoin: \"miter\",\n      strokeMiterLimit: 4,\n      scaleX: 1,\n      scaleY: 1,\n      angle: 0,\n      flipX: false,\n      flipY: false,\n      opacity: 1,\n      shadow: null,\n      visible: false,\n      clipTo: null,\n      backgroundColor: \"\",\n      fillRule: \"nonzero\",\n      paintFirst: \"fill\",\n      globalCompositeOperation: \"source-over\",\n      transformMatrix: null,\n      skewX: 0,\n      skewY: 0,\n      rx: 0,\n      ry: 0,\n      name: \"shape-rect-n\",\n    },\n  ],\n};\n\nconst fontCheck = new Set(\n  [\n    // Windows 10\n    \"Arial\",\n    \"Arial Black\",\n    \"Bahnschrift\",\n    \"Calibri\",\n    \"Cambria\",\n    \"Cambria Math\",\n    \"Candara\",\n    \"Comic Sans MS\",\n    \"Consolas\",\n    \"Constantia\",\n    \"Corbel\",\n    \"Courier New\",\n    \"Ebrima\",\n    \"Franklin Gothic Medium\",\n    \"Gabriola\",\n    \"Gadugi\",\n    \"Georgia\",\n    \"HoloLens MDL2 Assets\",\n    \"Impact\",\n    \"Ink Free\",\n    \"Javanese Text\",\n    \"Leelawadee UI\",\n    \"Lucida Console\",\n    \"Lucida Sans Unicode\",\n    \"Malgun Gothic\",\n    \"Marlett\",\n    \"Microsoft Himalaya\",\n    \"Microsoft JhengHei\",\n    \"Microsoft New Tai Lue\",\n    \"Microsoft PhagsPa\",\n    \"Microsoft Sans Serif\",\n    \"Microsoft Tai Le\",\n    \"Microsoft YaHei\",\n    \"Microsoft Yi Baiti\",\n    \"MingLiU-ExtB\",\n    \"Mongolian Baiti\",\n    \"MS Gothic\",\n    \"MV Boli\",\n    \"Myanmar Text\",\n    \"Nirmala UI\",\n    \"Palatino Linotype\",\n    \"Segoe MDL2 Assets\",\n    \"Segoe Print\",\n    \"Segoe Script\",\n    \"Segoe UI\",\n    \"Segoe UI Historic\",\n    \"Segoe UI Emoji\",\n    \"Segoe UI Symbol\",\n    \"SimSun\",\n    \"Sitka\",\n    \"Sylfaen\",\n    \"Symbol\",\n    \"Tahoma\",\n    \"Times New Roman\",\n    \"Trebuchet MS\",\n    \"Verdana\",\n    \"Webdings\",\n    \"Wingdings\",\n    \"Yu Gothic\",\n    // macOS\n    \"American Typewriter\",\n    \"Andale Mono\",\n    \"Arial\",\n    \"Arial Black\",\n    \"Arial Narrow\",\n    \"Arial Rounded MT Bold\",\n    \"Arial Unicode MS\",\n    \"Avenir\",\n    \"Avenir Next\",\n    \"Avenir Next Condensed\",\n    \"Baskerville\",\n    \"Big Caslon\",\n    \"Bodoni 72\",\n    \"Bodoni 72 Oldstyle\",\n    \"Bodoni 72 Smallcaps\",\n    \"Bradley Hand\",\n    \"Brush Script MT\",\n    \"Chalkboard\",\n    \"Chalkboard SE\",\n    \"Chalkduster\",\n    \"Charter\",\n    \"Cochin\",\n    \"Comic Sans MS\",\n    \"Copperplate\",\n    \"Courier\",\n    \"Courier New\",\n    \"Didot\",\n    \"DIN Alternate\",\n    \"DIN Condensed\",\n    \"Futura\",\n    \"Geneva\",\n    \"Georgia\",\n    \"Gill Sans\",\n    \"Helvetica\",\n    \"Helvetica Neue\",\n    \"Herculanum\",\n    \"Hoefler Text\",\n    \"Impact\",\n    \"Lucida Grande\",\n    \"Luminari\",\n    \"Marker Felt\",\n    \"Menlo\",\n    \"Microsoft Sans Serif\",\n    \"Monaco\",\n    \"Noteworthy\",\n    \"Optima\",\n    \"Palatino\",\n    \"Papyrus\",\n    \"Phosphate\",\n    \"Rockwell\",\n    \"Savoye LET\",\n    \"SignPainter\",\n    \"Skia\",\n    \"Snell Roundhand\",\n    \"Tahoma\",\n    \"Times\",\n    \"Times New Roman\",\n    \"Trattatello\",\n    \"Trebuchet MS\",\n    \"Verdana\",\n    \"Zapfino\",\n  ].sort()\n);\n\n//const useForceUpdate = () => useState()[1];\n// Or you can use:\n// const fabric = require(\"fabric\").fabric;\n//const canvas = new fabric.Canvas(\"my-fabric-canvas\");\nconst App = () => {\n  //const mforceUpdate = useForceUpdate();\n  // for undo/redoing\n  const [past, setPast] = useState([initialState]);\n  const [future, setFuture] = useState([initialState]);\n  //const [newAction, setNewAction] = useState(0);\n  const [pageLoad, setPageLoad] = useState(null);\n  // const canvasRender = useRef(0);\n  const canvasRef = useRef();\n  const mainDiv = useRef(null);\n  const rightBar = useRef();\n  const shapeCount = useRef(0);\n  const isDrawing = useRef(false);\n  const currentStroke = useRef(\"\");\n  const editPoly = useRef(true);\n  const openPoly = useRef(null);\n  const polyType = useRef(\"\");\n  //const [reRender, forceUpdate] = useReducer((x) => x + 1, 0);\n  //const forceUpdate = React.useReducer(() => ({}))[1];\n  //const [, updateComponent] = React.useState();\n  //const forceUpdateComponent = React.useCallback(() => updateComponent({}), []);\n  //anchors\n  const [canvas, setCanvas] = useState();\n  //const [canvasHistory, setCanvasHistory] = useState([initialState]);\n  //const [canvasHistory, setCanvasHistory] = useState([]);\n  // const [canvasState, setCanvasState] = useState(initialState);\n  //const [canvasState, setCanvasState] = useState();\n  const [canvasTool, setCanvasTool] = useState(\"select\");\n  const [strokeWidth, setStrokeWidth] = useState(1);\n  // const [stroke, setStrokeColor] = useState(\"black\");\n  const [stroke, setStrokeColor] = useState({\n    r: \"0\",\n    g: \"0\",\n    b: \"0\",\n    a: \"1\",\n  });\n  const [fill, setFillColor] = useState({\n    r: \"0\",\n    g: \"0\",\n    b: \"0\",\n    a: \"0\",\n  });\n  const [textHighlight, setHighlight] = useState({\n    r: \"255\",\n    g: \"255\",\n    b: \"0\",\n    a: \"1\",\n  });\n  // const [fill, setFillColor] = useState(\"black\");\n  const [dashSize, setDashSize] = useState(0);\n  const [gapSize, setGapSize] = useState(0);\n  const [opacity, setOpacity] = useState(100);\n  // const [snap, setSnap] = useState(false);\n  const [font, setFont] = useState(\"\");\n  const [fontSize, setFontSize] = useState(30);\n  const [fontWeight, setFontWeight] = useState(\"normal\");\n  const [fontStyle, setFontStyle] = useState(\"regular\");\n  //const [textHighlight, setHighlight] = useState(\"yellow\");\n\n  const [showStrokePicker, setShowStrokePicker] = useState(false);\n  const [showFillPicker, setShowFillPicker] = useState(false);\n  const [showHighlightPicker, setShowHighlightPicker] = useState(false);\n  //const [shapeCount, setShapeCount] = useState(0);\n\n  //const opacity = useRef(100);\n  const snap = useRef(false);\n  const newShape = useRef(true);\n  const anchors = useRef([]);\n  const pointer = useRef();\n  const line = useRef(null);\n  const origX = useRef();\n  const origY = useRef();\n  const angle = useRef();\n  const arrow = useRef(null);\n  const selectedShape = useRef(null);\n  const polyPoints = useRef([]);\n  const rpolygon = useRef(null);\n  const Rectangle = useRef(null);\n  const circle = useRef(null);\n  const ellipse = useRef(null);\n  const polyLines = useRef([]);\n  const currentToolId = useRef(null);\n\n  var currentOpenPanel = \"none\";\n  var drawingObject = {};\n  drawingObject.type = \"\";\n  drawingObject.background = \"\";\n  drawingObject.border = \"\";\n\n  const StrokeSwatchClick = () => {\n    setShowStrokePicker((showStrokePicker) => !showStrokePicker);\n    if (!showStrokePicker) {\n      //Todo\n      var activeShape = canvas.getActiveObject();\n      if (activeShape) {\n        if (activeShape.stroke === \"rgba(255,255,255,0)\") {\n          setStrokeColor({ r: 255, g: 255, b: 255, a: 1 });\n          setShapeAttributes({\n            stroke: \"rgba(255,255,255,1)\",\n          });\n        }\n      }\n    }\n  };\n  const FillSwatchClick = () => {\n    setShowFillPicker((showFillPicker) => !showFillPicker);\n    if (!showFillPicker) {\n      //Todo\n      var activeShape = canvas.getActiveObject();\n      if (activeShape) {\n        if (activeShape.fill === \"rgba(255,255,255,0)\") {\n          setFillColor({ r: 255, g: 255, b: 255, a: 1 });\n          setShapeAttributes({\n            fill: \"rgba(255,255,255,1)\",\n          });\n        }\n      }\n    }\n  };\n  const HighlightSwatchClick = () => {\n    setShowHighlightPicker((showHighlightPicker) => !showHighlightPicker);\n  };\n  const StrokeSwatchClose = () => {\n    setShowStrokePicker(false);\n  };\n  const FillSwatchClose = () => {\n    setShowFillPicker(false);\n  };\n  const HighlightSwatchClose = () => {\n    setShowHighlightPicker(false);\n  };\n  const StrokeSwatchChange = (color) => {\n    //console.log(stroke);\n    setStrokeColor(color.rgb);\n    setShapeAttributes({\n      stroke:\n        \"rgba(\" +\n        color.rgb.r +\n        \", \" +\n        color.rgb.g +\n        \", \" +\n        color.rgb.b +\n        \", \" +\n        color.rgb.a +\n        \")\",\n    });\n  };\n  const FillSwatchChange = (color) => {\n    //console.log(stroke);\n    setFillColor(color.rgb);\n    setShapeAttributes({\n      fill:\n        \"rgba(\" +\n        color.rgb.r +\n        \", \" +\n        color.rgb.g +\n        \", \" +\n        color.rgb.b +\n        \", \" +\n        color.rgb.a +\n        \")\",\n    });\n    //console.log(swatchStyles.fill);\n  };\n  const HighlightSwatchChange = (color) => {\n    //console.log(stroke);\n    setHighlight(color.rgb);\n    setShapeAttributes({\n      textBackgroundColor:\n        \"rgba(\" +\n        color.rgb.r +\n        \", \" +\n        color.rgb.g +\n        \", \" +\n        color.rgb.b +\n        \", \" +\n        color.rgb.a +\n        \")\",\n    });\n  };\n  var calcPolygonPoints = (sideCount, radius) => {\n    var sweep = (Math.PI * 2) / sideCount;\n    var cx = radius;\n    var cy = radius;\n    var points = [];\n\n    for (var i = 0; i < sideCount; i++) {\n      var x = cx + radius * Math.cos(i * sweep);\n      var y = cy + radius * Math.sin(i * sweep);\n      points.push({ x: x, y: y });\n    }\n    return points;\n  };\n  /*\n  function click(id) {\n    var ev = new MouseEvent(\"click\", {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    });\n\n    var el = document.getElementById(id);\n    el.dispatchEvent(ev);\n  }\n  */\n  const saveCanvasState = (newCanvasState) => {\n    past.push(newCanvasState);\n    setPast(past);\n    setFuture([]);\n    sessionStorage.clear();\n    sessionStorage.myFabricJSCanvas = JSON.stringify(newCanvasState);\n    // sessionStorage.setItem(\"history\", JSON.stringify(past));\n  };\n  /*\n  const onObjectModified = useCallback(\n    (e) => {\n      const newCanvasState = e.target.canvas.toJSON([\"name\"]);\n      //const newCanvasState = canvas.toJSON([\"name\"]);\n      setCanvasState(newCanvasState);\n      // Limit history depth\n      setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\n      //setPast([...past, newCanvasState]);\n      //setFuture([]);\n      console.log(newCanvasState);\n    },\n    [setCanvasState, setCanvasHistory]\n  );\n*/\n  React.useEffect(() => {\n    /*\n    ---disabled for memory issues--\n    var history = JSON.parse(sessionStorage.getItem(\"history\")); //get them back    \n    if (history !== null) setPast(history);\n    */\n    const fontAvailable = new Set();\n    for (const font of fontCheck.values()) {\n      if (document.fonts.check(`12px \"${font}\"`)) {\n        fontAvailable.add(font);\n        var x = document.getElementById(\"fonts\");\n        var option = document.createElement(\"option\");\n        option.text = font;\n        x.add(option);\n      }\n    }\n  }, []);\n  // React.useEffect(() => {}, [canvasState]);\n\n  React.useEffect(() => {\n    //console.log(\"shift pressed\");\n    const canvas = new fabric.Canvas(canvasRef.current);\n    canvas.set({\n      fireMiddleClick: true, // <-- enable firing of middle click events\n      stopContextMenu: true,\n      controlsAboveOverlay: false,\n      preserveObjectStacking: true,\n      perPixelTargetFind: true,\n    });\n    if (pageLoad === null && sessionStorage.myFabricJSCanvas !== undefined) {\n      setPageLoad(1);\n      //console.log(sessionStorage.myFabricJSCanvas);\n      const data = JSON.parse(sessionStorage.myFabricJSCanvas);\n      canvas.loadFromJSON(data);\n      canvas.forEachObject(function (o) {\n        if (o.name.includes(\"anchor\")) {\n          canvas.remove(o);\n        }\n      });\n      anchors.current = [];\n      var json = canvas.toJSON([\"name\"]);\n      past.push(json);\n      setPast(past);\n      /*\n      //disabled for memory issues. as a result, undoing after refresh is not possible\n      var history = JSON.parse(sessionStorage.getItem(\"history\")); //get them back      \n      if (history !== null) setPast(history);\n      */\n      setFuture([]);\n    } else {\n      canvas.loadFromJSON(past[past.length - 1]);\n    }\n    canvas.renderAll();\n    editPoly.current = true;\n    if (canvasTool === \"pen\") {\n      canvas.isDrawingMode = 1;\n      canvas.freeDrawingBrush.color =\n        \"rgba(\" +\n        stroke.r +\n        \", \" +\n        stroke.g +\n        \", \" +\n        stroke.b +\n        \", \" +\n        stroke.a +\n        \")\";\n      canvas.freeDrawingBrush.width = strokeWidth;\n    }\n    if (canvasTool !== \"select\") {\n      canvas.selection = false;\n      canvas.defaultCursor = \"crosshair\";\n      canvas.forEachObject(function (o) {\n        o.selectable = false;\n        o.hoverCursor = \"move\";\n      });\n      if (openPoly.current !== null) {\n        openPoly.current = null;\n        canvas.forEachObject(function (o) {\n          if (o.name.includes(\"anchor\")) {\n            canvas.remove(o);\n          }\n        });\n        anchors.current = [];\n        canvas.renderAll();\n        const newCanvasState = canvas.toJSON([\"name\"]);\n        saveCanvasState(newCanvasState);\n        sessionStorage.myFabricJSCanvas = JSON.stringify(newCanvasState);\n      }\n    } else {\n      canvas.selection = true;\n      canvas.forEachObject(function (o) {\n        o.selectable = true;\n      });\n      var allObjects = canvas.getObjects();\n      var lastObjectCreated = allObjects[allObjects.length - 1];\n      canvas.setActiveObject(lastObjectCreated);\n      //console.log(lastObjectCreated);\n      canvas.renderAll();\n    }\n\n    canvas.on(\"object:rotating\", function (options) {\n      if (!snap.current) return;\n      var angle = options.target.angle;\n      var locked = Math.ceil(options.target.angle / 5) * 5;\n      if (Math.abs(angle - locked) < 10 || Math.abs(locked - angle) < 10) {\n        angle = locked;\n      }\n\n      options.target.set({\n        angle: angle,\n      });\n    });\n    //canvas.on(\"object:added\", onObjectModified);\n    // canvas.on(\"object:modified\", onObjectModified);\n    canvas.on(\"object:modified\", function (e) {\n      const newCanvasState = e.target.canvas.toJSON([\"name\"]);\n      past.push(newCanvasState);\n      setPast(past);\n      //console.log(past);\n      setFuture([]);\n      sessionStorage.clear();\n      sessionStorage.myFabricJSCanvas = JSON.stringify(newCanvasState);\n      // sessionStorage.setItem(\"history\", JSON.stringify(past));\n    });\n    canvas.on(\"object:removed\", function (e) {\n      const newCanvasState = e.target.canvas.toJSON([\"name\"]);\n      past.push(newCanvasState);\n      setPast(past);\n      //console.log(past);\n      setFuture([]);\n      sessionStorage.clear();\n      sessionStorage.myFabricJSCanvas = JSON.stringify(newCanvasState);\n      // sessionStorage.setItem(\"history\", JSON.stringify(past));\n    });\n\n    canvas.on(\"mouse:dblclick\", function (e) {\n      if (canvasTool === \"polygon\") {\n        canvas.remove(line.current);\n        for (var i = 0; i < polyLines.current.length; i++) {\n          canvas.remove(polyLines.current[i]);\n        }\n        newShape.current = true;\n        isDrawing.current = false;\n        var polyGon = null;\n        polyGon = new fabric.Polygon(polyPoints.current, {\n          stroke:\n            \"rgba(\" +\n            stroke.r +\n            \", \" +\n            stroke.g +\n            \", \" +\n            stroke.b +\n            \", \" +\n            stroke.a +\n            \")\",\n          fill:\n            \"rgba(\" +\n            fill.r +\n            \", \" +\n            fill.g +\n            \", \" +\n            fill.b +\n            \", \" +\n            fill.a +\n            \")\",\n          strokeWidth: strokeWidth,\n          selectable: false,\n          hoverCursor: \"default\",\n          name: \"shape-polygon-\" + shapeCount.current,\n        });\n        canvas.add(polyGon);\n        editPoly.current = true;\n        canvas.setActiveObject(polyGon);\n        document.getElementById(\"select\").click();\n        canvas.renderAll();\n        shapeCount.current++;\n        const newCanvasState = canvas.toJSON([\"name\"]);\n        saveCanvasState(newCanvasState);\n      }\n\n      if (canvasTool === \"polyline\") {\n        canvas.remove(line.current);\n        for (i = 0; i < polyLines.current.length; i++) {\n          canvas.remove(polyLines.current[i]);\n        }\n        newShape.current = true;\n        isDrawing.current = false;\n        var polyLine = new fabric.Polyline(polyPoints.current, {\n          stroke:\n            \"rgba(\" +\n            stroke.r +\n            \", \" +\n            stroke.g +\n            \", \" +\n            stroke.b +\n            \", \" +\n            stroke.a +\n            \")\",\n          fill: \"\",\n          strokeWidth: strokeWidth,\n          selectable: false,\n          hoverCursor: \"default\",\n          name: \"shape-polyline-\" + shapeCount.current,\n        });\n        canvas.add(polyLine);\n        canvas.setActiveObject(polyLine);\n        document.getElementById(\"select\").click();\n        editPoly.current = true;\n        canvas.renderAll();\n        shapeCount.current++;\n        const newCanvasState = canvas.toJSON([\"name\"]);\n        saveCanvasState(newCanvasState);\n      }\n      if (canvasTool === \"select\") {\n        console.log(e.target);\n        if (e.target === null) return;\n        if (e.target.type === \"polyline\" && editPoly.current) {\n          canvas.set({\n            perPixelTargetFind: false,\n          });\n          canvas.forEachObject(function (o) {\n            if (o.name.includes(\"anchor\")) {\n              canvas.remove(o);\n            }\n          });\n          anchors.current = [];\n          polyType.current = \"polyline\";\n\n          // polyPoints = [];\n          var editable = e.target;\n          openPoly.current = editable; //for future hiding the anchor points.\n          editable.set({\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\",\n          });\n          editPoly.current = false;\n          // console.log(editable.get(\"points\"));\n          var str = editable.get(\"name\");\n          var id = str.split(\"-\");\n          var matrix = editable.calcTransformMatrix();\n          var transformedPoints = editable\n            .get(\"points\")\n            .map(function (p) {\n              return new fabric.Point(\n                p.x - editable.pathOffset.x,\n                p.y - editable.pathOffset.y\n              );\n            })\n            .map(function (p) {\n              return fabric.util.transformPoint(p, matrix);\n            });\n          var pFill = editable.get(\"fill\");\n          var pStroke = editable.get(\"stroke\");\n          var pName = editable.get(\"name\");\n          canvas.remove(editable);\n          var updatedPoly = new fabric.Polyline(transformedPoints, {\n            fill: pFill,\n            stroke: pStroke,\n            name: pName,\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\",\n          });\n          canvas.add(updatedPoly);\n          canvas.sendToBack(updatedPoly);\n          openPoly.current = updatedPoly;\n          anchors.current = [];\n          transformedPoints.forEach(function (p, index) {\n            var anchor = new fabric.Circle({\n              left: p.x,\n              top: p.y,\n              radius: 15,\n              fill: \"green\",\n              originX: \"center\",\n              originY: \"center\",\n              hasControls: false,\n              hasBorders: false,\n              name: \"anchor-\" + id[2] + \"-\" + index,\n            });\n            canvas.add(anchor);\n            anchors.current.push(anchor);\n          });\n          canvas.renderAll();\n          return;\n        }\n        //if (e.target === null && !editPoly.current) {\n        if (e.target.type === \"polyline\" && !editPoly.current) {\n          canvas.set({\n            perPixelTargetFind: true,\n          });\n          polyType.current = \"\";\n          editable = e.target;\n          editable.set({\n            hasControls: true,\n            hasBorders: true,\n            selectable: true,\n            hoverCursor: \"move\",\n          });\n          editPoly.current = true;\n          anchors.current.forEach(function (anchor) {\n            canvas.remove(anchor);\n          });\n          anchors.current = [];\n          openPoly.current = null;\n          canvas.renderAll();\n          return;\n        }\n        if (e.target.type === \"polygon\" && editPoly.current) {\n          if (e.target === null) return;\n          if (e.target.name.includes(\"rpolygon\")) return;\n          canvas.set({\n            perPixelTargetFind: false,\n          });\n          canvas.forEachObject(function (o) {\n            if (o.name.includes(\"anchor\")) {\n              canvas.remove(o);\n            }\n          });\n          anchors.current = [];\n          polyType.current = \"polygon\";\n          // polyPoints = [];\n          editable = e.target;\n          openPoly.current = editable; //for future hiding the anchor points.\n          editable.set({\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\",\n          });\n          editPoly.current = false;\n          // console.log(editable.get(\"points\"));\n          str = editable.get(\"name\");\n          id = str.split(\"-\");\n          matrix = editable.calcTransformMatrix();\n          transformedPoints = editable\n            .get(\"points\")\n            .map(function (p) {\n              return new fabric.Point(\n                p.x - editable.pathOffset.x,\n                p.y - editable.pathOffset.y\n              );\n            })\n            .map(function (p) {\n              return fabric.util.transformPoint(p, matrix);\n            });\n          pFill = editable.get(\"fill\");\n          pStroke = editable.get(\"stroke\");\n          pName = editable.get(\"name\");\n          canvas.remove(editable);\n          updatedPoly = new fabric.Polygon(transformedPoints, {\n            fill: pFill,\n            stroke: pStroke,\n            name: pName,\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\",\n          });\n          canvas.add(updatedPoly);\n          canvas.sendToBack(updatedPoly);\n          anchors.current = [];\n          transformedPoints.forEach(function (p, index) {\n            var anchor = new fabric.Circle({\n              left: p.x,\n              top: p.y,\n              radius: 15,\n              fill: \"green\",\n              originX: \"center\",\n              originY: \"center\",\n              hasControls: false,\n              hasBorders: false,\n              name: \"anchor-\" + id[2] + \"-\" + index,\n            });\n            canvas.add(anchor);\n            anchors.current.push(anchor);\n          });\n          canvas.renderAll();\n          return;\n        }\n        if (e.target.type === \"polygon\" && !editPoly.current) {\n          if (e.target.name.includes(\"rpolygon\")) return;\n          canvas.set({\n            perPixelTargetFind: true,\n          });\n          polyType.current = \"\";\n          editable = e.target;\n          editable.set({\n            hasControls: true,\n            hasBorders: true,\n            selectable: true,\n            hoverCursor: \"move\",\n          });\n          editPoly.current = true;\n          anchors.current.forEach(function (anchor) {\n            canvas.remove(anchor);\n          });\n          anchors.current = [];\n          canvas.renderAll();\n          return;\n        }\n      }\n    });\n\n    canvas.on(\"object:moving\", function (options) {\n      if (options.target.type !== \"circle\") {\n        if (openPoly.current !== null) {\n          openPoly.current = null;\n          editPoly.current = true;\n          anchors.current.forEach(function (anchor) {\n            canvas.remove(anchor);\n          });\n          anchors.current = [];\n          canvas.renderAll();\n          return;\n        }\n      }\n      if (options.target.type === \"circle\") {\n        var p = options.target;\n        //console.log(p.get(\"name\"));\n        if (p.name.includes(\"circle\")) return;\n        if (p.name.includes(\"arc\")) return;\n        var str = p.name.split(\"-\");\n        if (polyType.current === \"polyline\") {\n          var pname = \"shape-polyline-\" + str[1];\n        }\n        if (polyType.current === \"polygon\") {\n          pname = \"shape-polygon-\" + str[1];\n        }\n\n        //console.log(pname);\n        var object = null;\n        var objects = canvas.getObjects();\n        for (var i = 0; i < objects.length; i++) {\n          if (objects[i].name && objects[i].name === pname) {\n            object = objects[i];\n            break;\n          }\n        }\n        // console.log(object);\n        object.points[str[2]] = {\n          x: p.getCenterPoint().x,\n          y: p.getCenterPoint().y,\n        };\n\n        //console.log(p.getCenterPoint());\n        var pFill = object.get(\"fill\");\n        var pStroke = object.get(\"stroke\");\n        var pName = object.get(\"name\");\n        var pPoints = object.get(\"points\");\n        //UNCOMMENT LINES 39 - 42 TO HAVE A WORKAROUND\n        canvas.remove(object);\n        if (polyType.current === \"polyline\") {\n          var updatedPoly = new fabric.Polyline(pPoints, {\n            fill: pFill,\n            stroke: pStroke,\n            name: pName,\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\",\n          });\n        }\n        if (polyType.current === \"polygon\") {\n          updatedPoly = new fabric.Polygon(pPoints, {\n            fill: pFill,\n            stroke: pStroke,\n            name: pName,\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\",\n          });\n        }\n        canvas.add(updatedPoly);\n        canvas.sendToBack(updatedPoly);\n        canvas.renderAll();\n      }\n    });\n\n    canvas.on(\"mouse:up\", function (e) {\n      this.setViewportTransform(this.viewportTransform);\n      this.isDragging = false;\n      if (e.button === 2) return;\n      // this.selection = true;\n      if (canvas.isDrawingMode) {\n        var allObjects = canvas.getObjects();\n        var path = allObjects[allObjects.length - 1];\n        path.set({ name: \"shape-path-\" + shapeCount.current });\n        //console.log(path);\n        shapeCount.current = shapeCount.current + 1;\n        canvas.selection = true;\n        document.getElementById(\"select\").click();\n        canvas.setActiveObject(allObjects[allObjects.length - 1]);\n        canvas.renderAll();\n        const newCanvasState = canvas.toJSON([\"name\"]);\n        saveCanvasState(newCanvasState);\n        // }\n      }\n\n      if (canvasTool === \"text\") {\n        //console.log(canvas.getObjects());\n        pointer.current = canvas.getPointer(e);\n        var text = new fabric.IText(\"Click to edit\", {\n          left: pointer.current.x,\n          top: pointer.current.y,\n          fontFamily: \"Arial\",\n          fontSize: \"30\",\n          // fontWeight: \"regular\",\n          //stroke: stroke,\n          // strokeWidth: strokeWidth,\n          // selectable: false,\n          hoverCursor: \"default\",\n          name: \"shape-text-\" + shapeCount.current,\n        });\n        //console.log(text);\n        canvas.add(text);\n        document.getElementById(\"select\").click();\n        canvas.setActiveObject(text);\n        canvas.renderAll();\n        shapeCount.current = shapeCount.current + 1;\n        // Save the canvas to State variable\n        const newCanvasState = canvas.toJSON([\"name\"]);\n\n        saveCanvasState(newCanvasState);\n      }\n      if (canvasTool === \"line\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          var points = [\n            pointer.current.x,\n            pointer.current.y,\n            pointer.current.x,\n            pointer.current.y,\n          ];\n          line.current = new fabric.Line(points, {\n            strokeWidth: strokeWidth,\n            stroke:\n              \"rgba(\" +\n              stroke.r +\n              \", \" +\n              stroke.g +\n              \", \" +\n              stroke.b +\n              \", \" +\n              stroke.a +\n              \")\",\n            originX: \"center\",\n            originY: \"center\",\n            //selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-line-\" + shapeCount.current,\n          });\n          canvas.add(line.current);\n          shapeCount.current = shapeCount.current + 1;\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          line.current.set({ x2: pointer.current.x, y2: pointer.current.y });\n          document.getElementById(\"select\").click();\n          canvas.setActiveObject(line.current);\n          canvas.renderAll();\n          newShape.current = true;\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n      if (canvasTool === \"arrow\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          let arrowLinePoints = [\n            pointer.current.x,\n            pointer.current.y,\n            pointer.current.x,\n            pointer.current.y,\n          ];\n          line.current = new fabric.Line(arrowLinePoints, {\n            stroke:\n              \"rgba(\" +\n              stroke.r +\n              \", \" +\n              stroke.g +\n              \", \" +\n              stroke.b +\n              \", \" +\n              stroke.a +\n              \")\",\n            strokeWidth: strokeWidth,\n          });\n          // reference points for arrowhead\n          origX.current = line.current.x2;\n          origY.current = line.current.y2;\n          let dx = line.current.x2 - line.current.x1,\n            dy = line.current.y2 - line.current.y1;\n          /* calculate angle.current of arrow.current */\n          angle.current = Math.atan2(dy, dx);\n          angle.current *= 180 / Math.PI;\n          angle.current += 90;\n\n          arrow.current = new fabric.Triangle({\n            angle: angle.current,\n            fill:\n              \"rgba(\" +\n              fill.r +\n              \", \" +\n              fill.g +\n              \", \" +\n              fill.b +\n              \", \" +\n              fill.a +\n              \")\",\n            top: line.current.y2,\n            left: line.current.x2,\n            width: 15,\n            height: 15,\n            originX: \"center\",\n            originY: \"center\",\n            stroke:\n              \"rgba(\" +\n              stroke.r +\n              \", \" +\n              stroke.g +\n              \", \" +\n              stroke.b +\n              \", \" +\n              stroke.a +\n              \")\",\n            strokeWidth: strokeWidth,\n          });\n          canvas.add(line.current);\n          canvas.add(arrow.current);\n          canvas.renderAll();\n          newShape.current = false;\n        } else {\n          canvas.remove(line.current);\n          canvas.remove(arrow.current);\n          selectedShape.current = new fabric.Group(\n            [line.current, arrow.current],\n            {\n              hasBorders: true,\n              hasControls: true,\n              selectable: false,\n              hoverCursor: \"default\",\n            }\n          );\n          shapeCount.current = shapeCount.current + 1;\n          selectedShape.current.set(\n            \"name\",\n            \"shape-arrow-\" + shapeCount.current + 1\n          );\n          canvas.add(selectedShape.current);\n          canvas.setActiveObject(selectedShape.current);\n          document.getElementById(\"select\").click();\n          newShape.current = true;\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n      if (canvasTool === \"polyline\") {\n        if (newShape.current) {\n          polyPoints.current = [];\n          isDrawing.current = true;\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          polyPoints.current.push(pointer.current);\n          line.current = new fabric.Line(\n            [\n              pointer.current.x,\n              pointer.current.y,\n              pointer.current.x,\n              pointer.current.y,\n            ],\n            {\n              stroke:\n                \"rgba(\" +\n                stroke.r +\n                \", \" +\n                stroke.g +\n                \", \" +\n                stroke.b +\n                \", \" +\n                stroke.a +\n                \")\",\n              strokeWidth: strokeWidth,\n              hasControls: false,\n              hasBorders: false,\n              selectable: false,\n              lockMovementX: true,\n              lockMovementY: true,\n              hoverCursor: \"default\",\n              originX: \"center\",\n              originY: \"center\",\n            }\n          );\n          canvas.add(line.current);\n          //polyLines.current.push(polyline);\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          line.current.set({ x1: pointer.current.x, y1: pointer.current.y });\n          polyPoints.current.push(pointer.current);\n          if (polyPoints.current.length > 1) {\n            var startPoint = polyPoints.current[polyPoints.current.length - 2];\n            var endPoint = polyPoints.current[polyPoints.current.length - 1];\n            var evt = e.e;\n            if (evt.shiftKey === true) {\n              if (\n                Math.abs(pointer.current.x - startPoint.x) >\n                Math.abs(pointer.current.y - startPoint.y)\n              ) {\n                console.log(\"line should be horizontally strait\");\n                endPoint.y = startPoint.y;\n                line.current.set({ x1: pointer.current.x, y1: endPoint.y });\n              } else {\n                console.log(\"line should be vertically strait\");\n                endPoint.x = startPoint.x;\n                line.current.set({\n                  x1: startPoint.x,\n                  y1: pointer.current.y,\n                });\n              }\n              polyPoints.current.pop();\n              polyPoints.current.push(endPoint);\n            }\n            var newPolyLine = new fabric.Line(\n              [startPoint.x, startPoint.y, endPoint.x, endPoint.y],\n              {\n                stroke:\n                  \"rgba(\" +\n                  stroke.r +\n                  \", \" +\n                  stroke.g +\n                  \", \" +\n                  stroke.b +\n                  \", \" +\n                  stroke.a +\n                  \")\",\n                strokeWidth: strokeWidth,\n                hasControls: false,\n                hasBorders: false,\n                selectable: false,\n                lockMovementX: true,\n                lockMovementY: true,\n                hoverCursor: \"default\",\n                originX: \"center\",\n                originY: \"center\",\n              }\n            );\n            var distance = Math.sqrt(\n              Math.pow(origX.current - pointer.current.x, 2) +\n                Math.pow(origY.current - pointer.current.y, 2)\n            );\n            console.log(distance);\n            if (distance < 20) {\n              if (\n                window.confirm(\n                  \"Close the shape? Press OK to close it. Cancel to keep the shape open.\"\n                )\n              ) {\n                newPolyLine.set({\n                  x2: origX.current,\n                  y2: origY.current,\n                });\n                canvas.add(newPolyLine);\n                canvas.renderAll();\n                polyLines.current.push(newPolyLine);\n\n                canvas.remove(line.current);\n                for (var i = 0; i < polyLines.current.length; i++) {\n                  canvas.remove(polyLines.current[i]);\n                }\n                newShape.current = true;\n                isDrawing.current = false;\n                var polyLine = null;\n                polyPoints.current.pop();\n                polyPoints.current.push(polyPoints.current[0]);\n                console.log(polyPoints.current);\n                polyLine = new fabric.Polygon(polyPoints.current, {\n                  stroke:\n                    \"rgba(\" +\n                    stroke.r +\n                    \", \" +\n                    stroke.g +\n                    \", \" +\n                    stroke.b +\n                    \", \" +\n                    stroke.a +\n                    \")\",\n                  fill:\n                    \"rgba(\" +\n                    fill.r +\n                    \", \" +\n                    fill.g +\n                    \", \" +\n                    fill.b +\n                    \", \" +\n                    fill.a +\n                    \")\",\n                  strokeWidth: strokeWidth,\n                  selectable: false,\n                  hoverCursor: \"default\",\n                  name: \"shape-polygon-\" + shapeCount.current,\n                });\n                console.log(fill);\n                canvas.add(polyLine);\n                canvas.setActiveObject(polyLine);\n                document.getElementById(\"select\").click();\n                editPoly.current = true;\n                canvas.renderAll();\n                shapeCount.current++;\n                const newCanvasState = canvas.toJSON([\"name\"]);\n                saveCanvasState(newCanvasState);\n                return;\n              } else {\n                // Do nothing!\n                console.log(\"Shape still open double click to finish\");\n              }\n            }\n            canvas.add(newPolyLine);\n            polyLines.current.push(newPolyLine);\n            canvas.renderAll();\n          }\n        }\n      }\n      if (canvasTool === \"polygon\") {\n        if (newShape.current) {\n          polyPoints.current = [];\n          isDrawing.current = true;\n          pointer.current = canvas.getPointer(e);\n          polyPoints.current.push(pointer.current);\n          line.current = new fabric.Line(\n            [\n              pointer.current.x,\n              pointer.current.y,\n              pointer.current.x,\n              pointer.current.y,\n            ],\n            {\n              stroke:\n                \"rgba(\" +\n                stroke.r +\n                \", \" +\n                stroke.g +\n                \", \" +\n                stroke.b +\n                \", \" +\n                stroke.a +\n                \")\",\n              strokeWidth: strokeWidth,\n              hasControls: false,\n              hasBorders: false,\n              selectable: false,\n              lockMovementX: true,\n              lockMovementY: true,\n              hoverCursor: \"default\",\n              originX: \"center\",\n              originY: \"center\",\n            }\n          );\n          canvas.add(line.current);\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          line.current.set({ x1: pointer.current.x, y1: pointer.current.y });\n          polyPoints.current.push(pointer.current);\n          if (polyPoints.current.length > 1) {\n            startPoint = polyPoints.current[polyPoints.current.length - 2];\n            endPoint = polyPoints.current[polyPoints.current.length - 1];\n            newPolyLine = new fabric.Line(\n              [startPoint.x, startPoint.y, endPoint.x, endPoint.y],\n              {\n                stroke:\n                  \"rgba(\" +\n                  stroke.r +\n                  \", \" +\n                  stroke.g +\n                  \", \" +\n                  stroke.b +\n                  \", \" +\n                  stroke.a +\n                  \")\",\n                strokeWidth: strokeWidth,\n                hasControls: false,\n                hasBorders: false,\n                selectable: false,\n                lockMovementX: true,\n                lockMovementY: true,\n                hoverCursor: \"default\",\n                originX: \"center\",\n                originY: \"center\",\n              }\n            );\n            canvas.add(newPolyLine);\n            polyLines.current.push(newPolyLine);\n            canvas.renderAll();\n          }\n        }\n      }\n      if (canvasTool === \"rpolygon\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          rpolygon.current = new fabric.Polygon(\n            calcPolygonPoints(\n              8,\n              Math.abs(origX.current - pointer.current.x) / 2\n            ),\n            {\n              objectCaching: false,\n              left: origX.current,\n              top: origY.current,\n              originX: \"center\",\n              originY: \"center\",\n              fill:\n                \"rgba(\" +\n                fill.r +\n                \", \" +\n                fill.g +\n                \", \" +\n                fill.b +\n                \", \" +\n                fill.a +\n                \")\",\n              perPixelTargetFind: false,\n              strokeWidth: strokeWidth,\n              stroke:\n                \"rgba(\" +\n                stroke.r +\n                \", \" +\n                stroke.g +\n                \", \" +\n                stroke.b +\n                \", \" +\n                stroke.a +\n                \")\",\n              hasControls: false,\n              hasBorders: false,\n              name: \"shape-rpolygon-\" + shapeCount.current,\n            }\n          );\n          canvas.add(rpolygon.current);\n          newShape.current = false;\n          shapeCount.current++;\n        } else {\n          newShape.current = true;\n          var matrix = rpolygon.current.calcTransformMatrix();\n          var transformedPoints = rpolygon.current\n            .get(\"points\")\n            .map(function (p) {\n              return new fabric.Point(\n                p.x - rpolygon.current.pathOffset.x,\n                p.y - rpolygon.current.pathOffset.y\n              );\n            })\n            .map(function (p) {\n              return fabric.util.transformPoint(p, matrix);\n            });\n          canvas.remove(rpolygon.current);\n          var updatedPoly = new fabric.Polygon(transformedPoints, {\n            fill:\n              \"rgba(\" +\n              fill.r +\n              \", \" +\n              fill.g +\n              \", \" +\n              fill.b +\n              \", \" +\n              fill.a +\n              \")\",\n            stroke:\n              \"rgba(\" +\n              stroke.r +\n              \", \" +\n              stroke.g +\n              \", \" +\n              stroke.b +\n              \", \" +\n              stroke.a +\n              \")\",\n            name: \"shape-rpolygon-\" + shapeCount.current,\n            // hasControls: false,\n            // hasBorders: false,\n            //selectable: false,\n            hoverCursor: \"default\",\n          });\n          canvas.add(updatedPoly);\n          canvas.setActiveObject(updatedPoly);\n          document.getElementById(\"select\").click();\n          canvas.renderAll();\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n      if (canvasTool === \"rect\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          Rectangle.current = new fabric.Rect({\n            left: origX.current,\n            top: origY.current,\n            fill:\n              \"rgba(\" +\n              fill.r +\n              \", \" +\n              fill.g +\n              \", \" +\n              fill.b +\n              \", \" +\n              fill.a +\n              \")\",\n            stroke:\n              \"rgba(\" +\n              stroke.r +\n              \", \" +\n              stroke.g +\n              \", \" +\n              stroke.b +\n              \", \" +\n              stroke.a +\n              \")\",\n            strokeWidth: strokeWidth,\n            strokeDashArray: [dashSize, gapSize],\n            opacity: opacity,\n            selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-rect-\" + shapeCount.current,\n          });\n          shapeCount.current++;\n          canvas.add(Rectangle.current);\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          if (origX.current > pointer.current.x) {\n            Rectangle.current.set({ left: Math.abs(pointer.current.x) });\n          }\n          if (origY.current > pointer.current.y) {\n            Rectangle.current.set({ top: Math.abs(pointer.current.y) });\n          }\n          Rectangle.current.set({\n            width: Math.abs(origX.current - pointer.current.x),\n          });\n          Rectangle.current.set({\n            height: Math.abs(origY.current - pointer.current.y),\n          });\n          newShape.current = true;\n          canvas.setActiveObject(Rectangle.current);\n          document.getElementById(\"select\").click();\n          canvas.renderAll();\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n      if (canvasTool === \"arc\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          circle.current = new fabric.Circle({\n            left: origX.current,\n            top: origY.current,\n            originX: \"left\",\n            originY: \"top\",\n            radius: pointer.current.x - origX.current,\n            angle: 45,\n            startAngle: 0,\n            endAngle: Math.PI,\n            fill:\n              \"rgba(\" +\n              fill.r +\n              \", \" +\n              fill.g +\n              \", \" +\n              fill.b +\n              \", \" +\n              fill.a +\n              \")\",\n            stroke:\n              \"rgba(\" +\n              stroke.r +\n              \", \" +\n              stroke.g +\n              \", \" +\n              stroke.b +\n              \", \" +\n              stroke.a +\n              \")\",\n            strokeWidth: strokeWidth,\n            selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-arc-\" + shapeCount.current,\n          });\n          canvas.add(circle.current);\n          newShape.current = false;\n          shapeCount.current++;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          var radius =\n            Math.max(\n              Math.abs(origY.current - pointer.current.y),\n              Math.abs(origX.current - pointer.current.x)\n            ) / 2;\n          if (radius > circle.current.strokeWidth) {\n            radius -= circle.current.strokeWidth / 2;\n          }\n          circle.current.set({ radius: radius });\n\n          if (origX.current > pointer.current.x) {\n            circle.current.set({ originX: \"right\" });\n          } else {\n            circle.current.set({ originX: \"left\" });\n          }\n          if (origY.current > pointer.current.y) {\n            circle.current.set({ originY: \"bottom\" });\n          } else {\n            circle.current.set({ originY: \"top\" });\n          }\n          newShape.current = true;\n          canvas.setActiveObject(circle.current);\n          document.getElementById(\"select\").click();\n          canvas.renderAll();\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n      if (canvasTool === \"circle\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          circle.current = new fabric.Circle({\n            left: origX.current,\n            top: origY.current,\n            originX: \"left\",\n            originY: \"top\",\n            radius: pointer.current.x - origX.current,\n            angle: 0,\n            fill:\n              \"rgba(\" +\n              fill.r +\n              \", \" +\n              fill.g +\n              \", \" +\n              fill.b +\n              \", \" +\n              fill.a +\n              \")\",\n            stroke:\n              \"rgba(\" +\n              stroke.r +\n              \", \" +\n              stroke.g +\n              \", \" +\n              stroke.b +\n              \", \" +\n              stroke.a +\n              \")\",\n            strokeWidth: strokeWidth,\n            selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-circle-\" + shapeCount.current,\n          });\n          canvas.add(circle.current);\n          newShape.current = false;\n          shapeCount.current++;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          radius =\n            Math.max(\n              Math.abs(origY.current - pointer.current.y),\n              Math.abs(origX.current - pointer.current.x)\n            ) / 2;\n          if (radius > circle.current.strokeWidth) {\n            radius -= circle.current.strokeWidth / 2;\n          }\n          circle.current.set({ radius: radius });\n\n          if (origX.current > pointer.current.x) {\n            circle.current.set({ originX: \"right\" });\n          } else {\n            circle.current.set({ originX: \"left\" });\n          }\n          if (origY.current > pointer.current.y) {\n            circle.current.set({ originY: \"bottom\" });\n          } else {\n            circle.current.set({ originY: \"top\" });\n          }\n          newShape.current = true;\n          canvas.setActiveObject(circle.current);\n          document.getElementById(\"select\").click();\n          canvas.renderAll();\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n      if (canvasTool === \"ellipse\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          ellipse.current = new fabric.Ellipse({\n            left: origX.current,\n            top: origY.current,\n            originX: \"left\",\n            originY: \"top\",\n            rx: pointer.current.x - origX.current,\n            ry: pointer.current.y - origY.current,\n            angle: 0,\n            fill:\n              \"rgba(\" +\n              fill.r +\n              \", \" +\n              fill.g +\n              \", \" +\n              fill.b +\n              \", \" +\n              fill.a +\n              \")\",\n            stroke:\n              \"rgba(\" +\n              stroke.r +\n              \", \" +\n              stroke.g +\n              \", \" +\n              stroke.b +\n              \", \" +\n              stroke.a +\n              \")\",\n            strokeWidth: strokeWidth,\n            type: \"ellipse\",\n            selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-ellipse-\" + shapeCount.current,\n          });\n          canvas.add(ellipse.current);\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          var rx = Math.abs(origX.current - pointer.current.x) / 2;\n          var ry = Math.abs(origY.current - pointer.current.y) / 2;\n          if (rx > ellipse.current.strokeWidth) {\n            rx -= ellipse.current.strokeWidth / 2;\n          }\n          if (ry > ellipse.current.strokeWidth) {\n            ry -= ellipse.current.strokeWidth / 2;\n          }\n          ellipse.current.set({ rx: rx, ry: ry });\n\n          if (origX.current > pointer.current.x) {\n            ellipse.current.set({ originX: \"right\" });\n          } else {\n            ellipse.current.set({ originX: \"left\" });\n          }\n          if (origY.current > pointer.current.y) {\n            ellipse.current.set({ originY: \"bottom\" });\n          } else {\n            ellipse.current.set({ originY: \"top\" });\n          }\n          newShape.current = true;\n          canvas.setActiveObject(ellipse.current);\n          document.getElementById(\"select\").click();\n          canvas.renderAll();\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n      //check if user clicked an object\n      if (e.target) {\n        var evt = e.e;\n        if (evt.altKey === true) {\n          if (e.target.name.includes(\"anchor\")) {\n            console.log(e.target);\n            var editable = openPoly.current;\n            var newPoints = editable.get(\"points\");\n            console.log(newPoints.length);\n            if (newPoints.length <= 3) return;\n            canvas.remove(e.target);\n\n            var pFill = editable.get(\"fill\");\n            var pStroke = editable.get(\"stroke\");\n            var pName = editable.get(\"name\");\n\n            var id = e.target.name.split(\"-\");\n            var pointIndex = parseInt(id[2]);\n            var cloneArray = newPoints.slice();\n            cloneArray.splice(pointIndex, 1);\n            console.log(newPoints);\n            console.log(cloneArray);\n\n            //canvas.remove(openPoly.current);\n            editable.set({ points: cloneArray });\n            console.log(editable);\n            /*\n            var updatedPoly = new fabric.Polyline(cloneArray, {\n              fill: pFill,\n              stroke: pStroke,\n              name: pName,\n              hasControls: false,\n              hasBorders: false,\n              selectable: false,\n              hoverCursor: \"default\",\n            });\n            canvas.add(updatedPoly);\n            canvas.sendToBack(updatedPoly);\n            */\n            canvas.renderAll();\n            //anchors.current = [];\n          }\n        }\n        if (!editPoly.current) return;\n        var activeShape = canvas.getActiveObject();\n        //if (activeShape.length > 1) return;\n        //        console.log(activeShape.type);\n        if (activeShape) {\n          if (activeShape.stroke && activeShape.type !== \"i-text\") {\n            if (currentStroke.current !== null) {\n              var rgba = currentStroke.current\n                .substr(5)\n                .split(\")\")[0]\n                .split(\",\");\n              setStrokeColor({\n                r: rgba[0],\n                g: rgba[1],\n                b: rgba[2],\n                a: rgba[3],\n              });\n            }\n            setStrokeWidth(activeShape.strokeWidth);\n          }\n          if (activeShape.fill) {\n            console.log(activeShape.fill);\n            rgba = activeShape.fill.substr(5).split(\")\")[0].split(\",\");\n            setFillColor({ r: rgba[0], g: rgba[1], b: rgba[2], a: rgba[3] });\n          }\n          //console.log(activeShape.opacity);\n          if (Number.isNaN(activeShape.opacity)) setOpacity(100);\n          else setOpacity(activeShape.opacity * 100);\n          //setOpacity(activeShape.opacity * 100);\n          //setFont(activeShape.fontFamily);\n          ///setFontSize(activeShape.fontSize);\n          //setFontWeight(activeShape.fontWeight);\n          //setFontStyle(activeShape.fontStyle);\n        }\n      }\n    });\n\n    canvas.on(\"mouse:wheel\", function (opt) {\n      var delta = opt.e.deltaY;\n      var zoom = canvas.getZoom();\n      zoom *= 0.999 ** delta;\n      if (zoom > 20) zoom = 20;\n      if (zoom < 0.01) zoom = 0.01;\n      canvas.zoomToPoint({ x: opt.e.offsetX, y: opt.e.offsetY }, zoom);\n      opt.e.preventDefault();\n      opt.e.stopPropagation();\n      var vpt = this.viewportTransform;\n      if (zoom < 400 / 1000) {\n        vpt[4] = 200 - (1000 * zoom) / 2;\n        vpt[5] = 200 - (1000 * zoom) / 2;\n      } else {\n        if (vpt[4] >= 0) {\n          vpt[4] = 0;\n        } else if (vpt[4] < canvas.getWidth() - 1000 * zoom) {\n          vpt[4] = canvas.getWidth() - 1000 * zoom;\n        }\n        if (vpt[5] >= 0) {\n          vpt[5] = 0;\n        } else if (vpt[5] < canvas.getHeight() - 1000 * zoom) {\n          vpt[5] = canvas.getHeight() - 1000 * zoom;\n        }\n      }\n    });\n    canvas.on(\"mouse:down\", function (opt) {\n      if (canvasTool !== \"select\") {\n        this.selection = false;\n      }\n      var evt = opt.e;\n      if (opt.button === 2) {\n        this.isDragging = true;\n        this.selection = false;\n        this.lastPosX = evt.clientX;\n        this.lastPosY = evt.clientY;\n      }\n    });\n    canvas.on(\"mouse:move\", function (opt) {\n      if (this.isDragging) {\n        var e = opt.e;\n        var vpt = this.viewportTransform;\n        vpt[4] += e.clientX - this.lastPosX;\n        vpt[5] += e.clientY - this.lastPosY;\n        this.requestRenderAll();\n        this.lastPosX = e.clientX;\n        this.lastPosY = e.clientY;\n      }\n      if (newShape.current === true && canvasTool !== \"pen\") {\n        return;\n      }\n      if (canvasTool === \"rect\") {\n        pointer.current = canvas.getPointer(opt);\n        if (origX.current > pointer.current.x) {\n          Rectangle.current.set({ left: Math.abs(pointer.current.x) });\n        }\n        if (origY.current > pointer.current.y) {\n          Rectangle.current.set({ top: Math.abs(pointer.current.y) });\n        }\n        Rectangle.current.set({\n          width: Math.abs(origX.current - pointer.current.x),\n        });\n        Rectangle.current.set({\n          height: Math.abs(origY.current - pointer.current.y),\n        });\n        canvas.requestRenderAll();\n      }\n      if (canvasTool === \"line\") {\n        pointer.current = canvas.getPointer(opt);\n        line.current.set({ x2: pointer.current.x, y2: pointer.current.y });\n        canvas.renderAll();\n      }\n      if (canvasTool === \"arrow\") {\n        pointer.current = canvas.getPointer(opt);\n        line.current.set({\n          x2: pointer.current.x,\n          y2: pointer.current.y,\n        });\n        let dx = line.current.x2 - line.current.x1,\n          dy = line.current.y2 - line.current.y1;\n        angle.current = Math.atan2(dy, dx);\n        angle.current *= 180 / Math.PI;\n        angle.current += 90;\n        arrow.current.set({\n          top: line.current.y2,\n          left: line.current.x2,\n          angle: angle.current,\n          width: 15,\n          height: 15,\n        });\n        canvas.renderAll();\n      }\n      if (canvasTool === \"polyline\") {\n        if (isDrawing.current) {\n          var endPoint = canvas.getPointer(opt);\n          var evt = opt.e;\n          if (evt.shiftKey === true) {\n            if (\n              Math.abs(endPoint.x - line.current.x1) >\n              Math.abs(endPoint.y - line.current.y1)\n            ) {\n              console.log(\"line should be horizontally strait\");\n              line.current.set({\n                x2: endPoint.x,\n                y2: line.current.y1,\n              });\n              canvas.renderAll();\n              return;\n            } else {\n              console.log(\"line should be vertically strait\");\n              line.current.set({\n                x2: line.current.x1,\n                y2: endPoint.y,\n              });\n              canvas.renderAll();\n              return;\n            }\n          }\n          line.current.set({\n            x2: endPoint.x,\n            y2: endPoint.y,\n          });\n          canvas.renderAll();\n        }\n      }\n      if (canvasTool === \"polygon\") {\n        if (isDrawing.current) {\n          endPoint = canvas.getPointer(opt);\n          line.current.set({\n            x2: endPoint.x,\n            y2: endPoint.y,\n          });\n          canvas.renderAll();\n        }\n      }\n      if (canvasTool === \"rpolygon\") {\n        pointer.current = canvas.getPointer(opt);\n        rpolygon.current.set({\n          points: calcPolygonPoints(\n            8,\n            Math.abs(origX.current - pointer.current.x) / 2\n          ),\n          left: origX.current,\n          top: origY.current,\n        });\n        canvas.renderAll();\n      }\n      if (canvasTool === \"arc\") {\n        pointer.current = canvas.getPointer(opt);\n        var radius =\n          Math.max(\n            Math.abs(origY.current - pointer.current.y),\n            Math.abs(origX.current - pointer.current.x)\n          ) / 2;\n        if (radius > circle.current.strokeWidth) {\n          radius -= circle.current.strokeWidth / 2;\n        }\n        circle.current.set({ radius: radius });\n        if (origX.current > pointer.current.x) {\n          circle.current.set({ originX: \"right\" });\n          circle.current.set({ angle: -135 });\n        } else {\n          circle.current.set({ originX: \"left\" });\n          circle.current.set({ angle: 135 });\n        }\n        if (origY.current > pointer.current.y) {\n          circle.current.set({ originY: \"bottom\" });\n        } else {\n          circle.current.set({ originY: \"top\" });\n        }\n        canvas.renderAll();\n      }\n      if (canvasTool === \"circle\") {\n        pointer.current = canvas.getPointer(opt);\n        radius =\n          Math.max(\n            Math.abs(origY.current - pointer.current.y),\n            Math.abs(origX.current - pointer.current.x)\n          ) / 2;\n        if (radius > circle.current.strokeWidth) {\n          radius -= circle.current.strokeWidth / 2;\n        }\n        circle.current.set({ radius: radius });\n        if (origX.current > pointer.current.x) {\n          circle.current.set({ originX: \"right\" });\n        } else {\n          circle.current.set({ originX: \"left\" });\n        }\n        if (origY.current > pointer.current.y) {\n          circle.current.set({ originY: \"bottom\" });\n        } else {\n          circle.current.set({ originY: \"top\" });\n        }\n        canvas.renderAll();\n      }\n      if (canvasTool === \"ellipse\") {\n        pointer.current = canvas.getPointer(opt);\n        var rx = Math.abs(origX.current - pointer.current.x) / 2;\n        var ry = Math.abs(origY.current - pointer.current.y) / 2;\n        if (rx > ellipse.current.strokeWidth) {\n          rx -= ellipse.current.strokeWidth / 2;\n        }\n        if (ry > ellipse.current.strokeWidth) {\n          ry -= ellipse.current.strokeWidth / 2;\n        }\n        ellipse.current.set({ rx: rx, ry: ry });\n        if (origX.current > pointer.current.x) {\n          ellipse.current.set({ originX: \"right\" });\n        } else {\n          ellipse.current.set({ originX: \"left\" });\n        }\n        if (origY.current > pointer.current.y) {\n          ellipse.current.set({ originY: \"bottom\" });\n        } else {\n          ellipse.current.set({ originY: \"top\" });\n        }\n        canvas.renderAll();\n      }\n    });\n\n    canvas.on(\"mouse:over\", function (e) {\n      /*\n      if (e.target) {\n        //console.log(currentStroke.current);\n        currentStroke.current = e.target.get(\"stroke\");\n        //console.log(currentStroke.current);\n        e.target.set(\"stroke\", \"rgba(255,0,0,1)\");\n        canvas.renderAll();\n      }\n      */\n    });\n\n    canvas.on(\"mouse:out\", function (e) {\n      /*\n      if (e.target) {\n        e.target.set(\"stroke\", currentStroke.current);\n        canvas.renderAll();\n      }\n      */\n    });\n\n    setCanvas(canvas);\n    return () => {\n      canvas.dispose();\n    };\n  }, [canvasRef, canvasTool, setCanvas]);\n\n  //const onUndo = useCallback(() => moveHistory(-1), [moveHistory]);\n  const onUndo = () => {\n    const present = past.pop();\n    const newFuture = [present, ...future];\n    setFuture(newFuture);\n    const previous = past[past.length - 1];\n    canvas.loadFromJSON(previous);\n    setPast(past);\n    console.log(past);\n  };\n  // const onRedo = useCallback(() => moveHistory(1), [moveHistory]);\n  const onRedo = () => {\n    const next = future[0];\n    canvas.loadFromJSON(next);\n    const newFuture = future.slice(1);\n    past.push(next);\n    setPast(past);\n    setFuture(newFuture);\n    console.log(future);\n  };\n  const setShapeAttributes = (attributes) => {\n    var activeShape = canvas.getActiveObject();\n    if (activeShape) {\n      var Attributes = attributes || {};\n      if (activeShape.type === \"group\") {\n        activeShape.item(0).set({\n          stroke: Attributes.stroke || activeShape.item(1).stroke,\n          strokeWidth:\n            Attributes.strokeWidth || activeShape.item(1).strokeWidth,\n        });\n        activeShape.item(1).set({\n          stroke: Attributes.stroke || activeShape.item(1).stroke,\n          strokeWidth:\n            Attributes.strokeWidth || activeShape.item(1).strokeWidth,\n          fill: Attributes.fill || activeShape.item(1).fill,\n        });\n      }\n      activeShape.set({\n        strokeWidth: Attributes.strokeWidth || activeShape.strokeWidth,\n        stroke:\n          Attributes.stroke === \"nill\"\n            ? null\n            : Attributes.stroke || activeShape.stroke,\n        fill:\n          Attributes.fill === \"nill\"\n            ? null\n            : Attributes.fill || activeShape.fill,\n        opacity: Attributes.opacity / 100 || activeShape.opacity,\n        strokeDashArray:\n          Attributes.strokeDashArray || activeShape.strokeDashArray,\n        fontFamily: Attributes.fontFamily || activeShape.fontFamily,\n        fontSize: Attributes.fontSize || activeShape.fontSize,\n        fontWeight: Attributes.fontWeight || activeShape.fontWeight,\n        fontStyle: Attributes.fontStyle || activeShape.fontStyle,\n        textBackgroundColor:\n          Attributes.textBackgroundColor || activeShape.textBackgroundColor,\n      });\n      canvas.renderAll();\n      canvas.setActiveObject(activeShape);\n      const newCanvasState = canvas.toJSON([\"name\"]);\n      saveCanvasState(newCanvasState);\n    }\n  };\n\n  function deleteObjects() {\n    if (canvas.getActiveObjects().length === 0) {\n      // window.location.reload();\n      return;\n    }\n    canvas.getActiveObjects().forEach((obj) => {\n      canvas.remove(obj);\n    });\n  }\n\n  /*\n  var simulateMouseEvent = function (element, eventName, coordX, coordY) {\n    element.dispatchEvent(\n      new MouseEvent(eventName, {\n        view: window,\n        bubbles: true,\n        cancelable: true,\n        clientX: coordX,\n        clientY: coordY,\n        button: 0,\n      })\n    );\n  };\n\n  \n  function hexToRGB(hex, alpha) {\n    var r = parseInt(hex.slice(1, 3), 16),\n      g = parseInt(hex.slice(3, 5), 16),\n      b = parseInt(hex.slice(5, 7), 16);\n    if (alpha) {\n      return \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + alpha + \")\";\n    } else {\n      return \"rgb(\" + r + \", \" + g + \", \" + b + \")\";\n    }\n  }\n*/\n  function w3_openPanel(evt, panelId) {\n    if (currentOpenPanel !== panelId) {\n      document.getElementById(\"Library\").style.height = \"400px\";\n      document.getElementById(panelId).style.display = \"block\";\n      if (currentOpenPanel !== \"none\")\n        document.getElementById(currentOpenPanel).style.display = \"none\";\n      currentOpenPanel = panelId;\n      return;\n    }\n\n    if (currentOpenPanel === panelId) {\n      if (panelId === \"none\") return;\n      document.getElementById(panelId).style.display = \"none\";\n      currentOpenPanel = \"none\";\n      document.getElementById(\"Library\").style.height = \"0px\";\n    }\n    /*\n    else {\n      if (currentOpenPanel !== \"None\") {\n        document.getElementById(currentOpenPanel).style.display = \"none\";\n      }\n      document.getElementById(\"Library\").style.height = \"400px\";\n      document.getElementById(panelId).style.display = \"block\";\n      currentOpenPanel = panelId;\n    }\n    */\n  }\n\n  const setActiveTool = (e, id) => {\n    if (currentToolId.current !== null) {\n      //console.log(currentToolId);\n      document.getElementById(currentToolId.current).style.backgroundColor =\n        \"#003059\";\n      document.getElementById(id).style.backgroundColor = \"grey\";\n      currentToolId.current = id;\n      return;\n    } else {\n      //console.log(id);\n      document.getElementById(id).style.backgroundColor = \"grey\";\n      currentToolId.current = id;\n    }\n  };\n\n  function handleKeyDown(event) {\n    if (event.key === \"s\") {\n      setActiveTool(event, \"select\");\n      return;\n    }\n    if (event.key === \"Delete\") {\n      deleteObjects();\n      return;\n    }\n    if (event.ctrlKey && event.key === \"z\") {\n      if (past.length === 1) return;\n      onUndo();\n      return;\n    }\n    if (event.ctrlKey && event.key === \"y\") {\n      if (future.length === 0) return;\n      onRedo();\n      return;\n    }\n  }\n\n  let url = \"#\";\n\n  const swatchStyles = reactCSS({\n    default: {\n      stroke: {\n        width: \"36px\",\n        height: \"14px\",\n        borderRadius: \"2px\",\n        background: `rgba(${stroke.r}, ${stroke.g}, ${stroke.b}, ${stroke.a})`,\n      },\n      blank: {\n        width: \"36px\",\n        height: \"14px\",\n        borderRadius: \"2px\",\n      },\n      fill: {\n        width: \"36px\",\n        height: \"14px\",\n        borderRadius: \"2px\",\n        background: `rgba(${fill.r}, ${fill.g}, ${fill.b}, ${fill.a})`,\n      },\n      highlight: {\n        width: \"36px\",\n        height: \"14px\",\n        borderRadius: \"2px\",\n        background: `rgba(${textHighlight.r}, ${textHighlight.g}, ${textHighlight.b}, ${textHighlight.a})`,\n      },\n      swatch: {\n        padding: \"0px\",\n        background: \"#fff\",\n        borderRadius: \"1px\",\n        boxShadow: \"0 0 0 1px rgba(0,0,0,.1)\",\n        display: \"inline-block\",\n        cursor: \"pointer\",\n        backgroundImage: \"url(images/no.png)\",\n      },\n      pickerContainer: {\n        display: \"inline-block\",\n      },\n      popover: {\n        position: \"absolute\",\n        zIndex: \"2\",\n      },\n      cover: {\n        position: \"fixed\",\n        top: \"50px\",\n        right: \"0px\",\n        bottom: \"0px\",\n        left: \"100px\",\n      },\n    },\n  });\n\n  return (\n    <MediaQuery minDeviceWidth={1224}>\n      <div\n        ref={mainDiv}\n        className=\"App\"\n        id=\"mainDiv\"\n        onKeyDown={(e) => {\n          handleKeyDown(e);\n          document.getElementById(\"my-fabric-canvas\").focus();\n        }}\n        tabIndex={-1}\n        // tabIndex=\"0\"\n      >\n        <div className={tbStyles.propBar}>\n          <a href={url}>\n            <button\n              className={tbStyles.buttontoolbar}\n              onClick={onUndo}\n              id=\"undo\"\n              //disabled={canvasHistory[0] === canvasState}\n              disabled={past.length === 1}\n            >\n              <div className={tbStyles.tooltipDown}>\n                <img src=\"images/undo2.png\" alt=\"Undo\"></img>\n                <span className={tbStyles.tooltiptextDown}>Undo</span>\n              </div>\n            </button>\n            <button\n              className={tbStyles.buttontoolbar}\n              onClick={onRedo}\n              id=\"redo\"\n              //disabled={canvasHistory[canvasHistory.length - 1] === canvasState}\n              disabled={future.length === 0}\n            >\n              <div className={tbStyles.tooltipDown}>\n                <img src=\"images/redo2.png\" alt=\"Redo\"></img>\n                <span className={tbStyles.tooltiptextDown}>Redo</span>\n              </div>\n            </button>\n            <button\n              className={tbStyles.buttontoolbar}\n              onClick={deleteObjects}\n              id=\"del\"\n            >\n              <div className={tbStyles.tooltipDown}>\n                <img src=\"images/delete2.png\" alt=\"Delete\"></img>\n                <span className={tbStyles.tooltiptextDown}>Delete</span>\n              </div>\n            </button>\n          </a>\n          <div className={tbStyles.dropdown}>\n            <button className={tbStyles.buttontoolbar} id=\"wList\">\n              <img src=\"images/lineWidth2.png\" alt=\"Line Width\"></img>\n              <div id=\"wlDropDown\" className={tbStyles.dropdowncontent}>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setStrokeWidth(1);\n                    setShapeAttributes({\n                      strokeWidth: 1,\n                    });\n                  }}\n                >\n                  <img src=\"images/stroke1.png\" alt=\"1\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setStrokeWidth(2);\n                    setShapeAttributes({\n                      strokeWidth: 2,\n                    });\n                  }}\n                >\n                  <img src=\"images/stroke2.png\" alt=\"2\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setStrokeWidth(4);\n                    setShapeAttributes({\n                      strokeWidth: 4,\n                    });\n                  }}\n                >\n                  <img src=\"images/stroke4.png\" alt=\"4\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setStrokeWidth(5);\n                    setShapeAttributes({\n                      strokeWidth: 5,\n                    });\n                  }}\n                >\n                  <img src=\"images/stroke5.png\" alt=\"5\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setStrokeWidth(10);\n                    setShapeAttributes({\n                      strokeWidth: 10,\n                    });\n                  }}\n                >\n                  <img src=\"images/stroke10.png\" alt=\"10\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setStrokeWidth(12);\n                    setShapeAttributes({\n                      strokeWidth: 12,\n                    });\n                  }}\n                >\n                  <img src=\"images/stroke12.png\" alt=\"12\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setStrokeWidth(15);\n                    setShapeAttributes({\n                      strokeWidth: 15,\n                    });\n                  }}\n                >\n                  <img src=\"images/stroke15.png\" alt=\"15\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setStrokeWidth(20);\n                    setShapeAttributes({\n                      strokeWidth: 20,\n                    });\n                  }}\n                >\n                  <img src=\"images/stroke20.png\" alt=\"20\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setStrokeWidth(25);\n                    setShapeAttributes({\n                      strokeWidth: 25,\n                    });\n                  }}\n                >\n                  <img src=\"images/stroke25.png\" alt=\"25\"></img>\n                </a>\n              </div>\n            </button>\n          </div>\n          <div className={tbStyles.dropdown}>\n            <button className={tbStyles.buttontoolbar} id=\"sList\">\n              <img src=\"images/LineStyle2.png\" alt=\"Line Style\"></img>\n              <div id=\"lsDropDown\" className={tbStyles.dropdowncontent}>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setDashSize(0);\n                    setGapSize(0);\n                    setShapeAttributes({\n                      strokeDashArray: [0, 0],\n                    });\n                  }}\n                >\n                  <img src=\"images/lineStyle1.png\" alt=\"1\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setDashSize(10);\n                    setGapSize(5);\n                    setShapeAttributes({\n                      strokeDashArray: [10, 5],\n                    });\n                  }}\n                >\n                  <img src=\"images/lineStyle2png.png\" alt=\"1\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setDashSize(10);\n                    setGapSize(5);\n                    setShapeAttributes({\n                      strokeDashArray: [10, 5],\n                    });\n                  }}\n                >\n                  <img src=\"images/lineStyle3.png\" alt=\"1\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setDashSize(20);\n                    setGapSize(5);\n                    setShapeAttributes({\n                      strokeDashArray: [20, 5],\n                    });\n                  }}\n                >\n                  <img src=\"images/lineStyle4.png\" alt=\"1\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setDashSize(20);\n                    setGapSize(10);\n                    setShapeAttributes({\n                      strokeDashArray: [20, 10],\n                    });\n                  }}\n                >\n                  <img src=\"images/lineStyle5.png\" alt=\"1\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setDashSize(5);\n                    setGapSize(5);\n                    setShapeAttributes({\n                      strokeDashArray: [5, 5],\n                    });\n                  }}\n                >\n                  <img src=\"images/lineStyle6.png\" alt=\"1\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setDashSize(2);\n                    setGapSize(2);\n                    setShapeAttributes({\n                      strokeDashArray: [2, 2],\n                    });\n                  }}\n                >\n                  <img src=\"images/lineStyle7.png\" alt=\"1\"></img>\n                </a>\n              </div>\n            </button>\n          </div>\n          <button className={tbStyles.buttontoolbar} id=\"dropper\">\n            <div className={tbStyles.tooltipDown}>\n              <img src=\"images/dropper2.png\" alt=\"Pick a color\"></img>\n              <span className={tbStyles.tooltiptextDown}>Pick a color</span>\n            </div>\n          </button>\n          &nbsp;Stroke&nbsp;\n          <input\n            type=\"number\"\n            id=\"strokePoint\"\n            value={strokeWidth}\n            min=\"0\"\n            max=\"50\"\n            onChange={(e) => {\n              setStrokeWidth(+e.target.value);\n              setShapeAttributes({\n                strokeWidth: +e.target.value,\n              });\n            }}\n          ></input>\n          &nbsp;Dash&nbsp;\n          <input\n            type=\"number\"\n            min=\"0\"\n            max=\"20\"\n            id=\"dashSize\"\n            value={dashSize}\n            onChange={(e) => {\n              setDashSize(+e.target.value);\n              setShapeAttributes({\n                strokeDashArray: [+e.target.value, +e.target.value],\n              });\n            }}\n          ></input>\n          &nbsp;Stroke Color&nbsp;\n          <div style={swatchStyles.pickerContainer}>\n            <div style={swatchStyles.swatch} onClick={StrokeSwatchClick}>\n              <div style={swatchStyles.stroke} />\n            </div>\n            {showStrokePicker ? (\n              <div style={swatchStyles.popover}>\n                <div style={swatchStyles.cover} onClick={StrokeSwatchClose} />\n                <SketchPicker color={stroke} onChange={StrokeSwatchChange} />\n              </div>\n            ) : null}\n          </div>\n          &nbsp;Fill Color&nbsp;\n          <div style={swatchStyles.pickerContainer}>\n            <div style={swatchStyles.swatch} onClick={FillSwatchClick}>\n              <div id=\"fillSwatch\" style={swatchStyles.fill} />\n            </div>\n            {showFillPicker ? (\n              <div style={swatchStyles.popover}>\n                <div style={swatchStyles.cover} onClick={FillSwatchClose} />\n                <SketchPicker color={fill} onChange={FillSwatchChange} />\n              </div>\n            ) : null}\n          </div>\n          &nbsp;HighlightText&nbsp;\n          <div style={swatchStyles.pickerContainer}>\n            <div style={swatchStyles.swatch} onClick={HighlightSwatchClick}>\n              <div style={swatchStyles.highlight} />\n            </div>\n            {showHighlightPicker ? (\n              <div style={swatchStyles.popover}>\n                <div\n                  style={swatchStyles.cover}\n                  onClick={HighlightSwatchClose}\n                />\n                <SketchPicker\n                  color={textHighlight}\n                  onChange={HighlightSwatchChange}\n                />\n              </div>\n            ) : null}\n          </div>\n          &nbsp;\n          <button\n            id=\"noStroke\"\n            onClick={(e) => {\n              setStrokeColor({ r: 255, g: 255, b: 255, a: 0 });\n              setShapeAttributes({\n                stroke: \"rgba(255,255,255,0)\",\n              });\n            }}\n          >\n            <div className={tbStyles.tooltipDown}>\n              <img src=\"images/noStroke2.png\" alt=\"No stroke\"></img>\n              <span className={tbStyles.tooltiptextDown}>Set No Stroke</span>\n            </div>\n          </button>\n          &nbsp;\n          <button\n            id=\"noFill\"\n            onClick={(e) => {\n              setFillColor({ r: 255, g: 255, b: 255, a: 0 });\n              setShapeAttributes({\n                fill: \"rgba(255,255,255,0)\",\n              });\n            }}\n          >\n            <div className={tbStyles.tooltipDown}>\n              <img src=\"images/noFill2.png\" alt=\"No fill\"></img>\n              <span className={tbStyles.tooltiptextDown}>Set No Fill</span>\n            </div>\n          </button>\n          &nbsp;Opacity\n          <input\n            type=\"range\"\n            id=\"opacityRange\"\n            value={opacity}\n            onChange={(e) => {\n              //opacity.current = e.target.value;\n              setOpacity(e.target.value);\n              setShapeAttributes({\n                opacity: e.target.value,\n              });\n            }}\n          ></input>\n          &nbsp; Angle snap:\n          <input\n            type=\"checkbox\"\n            id=\"chkSnap\"\n            onChange={(e) => {\n              //console.log(e.target.checked);\n              snap.current = e.target.checked;\n            }}\n          ></input>\n          &nbsp;Font\n          <select\n            name=\"fonts\"\n            id=\"fonts\"\n            onChange={(e) => {\n              setFont(e.target.value);\n              setShapeAttributes({ fontFamily: e.target.value });\n            }}\n          ></select>\n          &nbsp;Size\n          <input\n            type=\"number\"\n            id=\"fontSize\"\n            value={fontSize}\n            min=\"0\"\n            max=\"100\"\n            onChange={(e) => {\n              setFontSize(+e.target.value);\n              setShapeAttributes({\n                fontSize: +e.target.value,\n              });\n            }}\n          ></input>\n          &nbsp;\n          <label>\n            FontWeight:\n            <select\n              value={fontWeight}\n              onChange={(e) => {\n                setFontWeight(e.target.value);\n                setShapeAttributes({\n                  fontWeight: e.target.value,\n                });\n              }}\n            >\n              <option value=\"normal\">Normal</option>\n              <option value=\"bold\">Bold</option>\n            </select>\n          </label>\n          <label>\n            FontSyle:\n            <select\n              value={fontStyle}\n              onChange={(e) => {\n                setFontStyle(e.target.value);\n                setShapeAttributes({\n                  fontStyle: e.target.value,\n                });\n              }}\n            >\n              <option value=\"regular\">Regular</option>\n              <option value=\"italic\">Italic</option>\n            </select>\n          </label>\n        </div>\n        <div id=\"lMenu\" className={styles.menu}>\n          <div className={styles.tableft}>\n            <button\n              onMouseEnter={(e) => {\n                w3_openPanel(e, \"File\");\n              }}\n              onClick={(e) => {\n                w3_openPanel(e, currentOpenPanel);\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src=\"images/FileAccess2.png\" alt=\"FileAccess\"></img>\n                <span className={styles.tooltiptextleft}>File Access</span>\n              </div>\n            </button>\n            <button\n              onClick={(e) => {\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              onMouseEnter={(e) => {\n                w3_openPanel(e, \"CanvasSet\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src=\"images/Canvas2.png\" alt=\"Canvas Settings\"></img>\n                <span className={styles.tooltiptextleft}>Canvas Settings</span>\n              </div>\n            </button>\n            <button\n              onClick={(e) => {\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              onMouseEnter={(e) => {\n                w3_openPanel(e, \"LayerSet\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src=\"images/Layers2.png\" alt=\"Layers\"></img>\n                <span className={styles.tooltiptextleft}>Layers</span>\n              </div>\n            </button>\n            <button\n              onClick={(e) => {\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              onMouseEnter={(e) => {\n                w3_openPanel(e, \"Warehouse\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src=\"images/Warehouse2.png\" alt=\"Warehouse\"></img>\n                <span className={styles.tooltiptextleft}>Warehouse</span>\n              </div>\n            </button>\n            <button\n              onClick={(e) => {\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              onMouseEnter={(e) => {\n                w3_openPanel(e, \"Phases\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src=\"images/Phases2.png\" alt=\"Phases\"></img>\n                <span className={styles.tooltiptextleft}>Phases</span>\n              </div>\n            </button>\n            <button\n              onClick={(e) => {\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              onMouseEnter={(e) => {\n                w3_openPanel(e, \"Measures\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src=\"images/Measure2.png\" alt=\"Measurements\"></img>\n                <span className={styles.tooltiptextleft}>Measures</span>\n              </div>\n            </button>\n            <button\n              onClick={(e) => {\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              onMouseEnter={(e) => {\n                w3_openPanel(e, \"Animation\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src=\"images/Animation2.png\" alt=\"Animation\"></img>\n                <span className={styles.tooltiptextleft}>Phase Player</span>\n              </div>\n            </button>\n            <div className={styles.tabbar}></div>\n          </div>\n        </div>\n        <div id=\"Library\" className={styles.library}>\n          <div id=\"File\" className={styles.File} style={{ display: \"none\" }}>\n            File Access\n            <span\n              onClick={(e) => {\n                //document.getElementById(\"File\").style.display = \"none\";\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              className={tbStyles.close}\n              title=\"Close Modal\"\n            >\n              &times;\n            </span>\n            <div className={styles.btngroup}>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/NewFile2.png\" alt=\"NewFile\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>New File</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/OpenFile2.png\" alt=\"OpenFile\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Open File</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/recentFile2.png\" alt=\"RecentFile\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Recent File</span>\n              </div>\n            </div>\n          </div>\n          <div\n            id=\"CanvasSet\"\n            className={styles.CanvasSet}\n            style={{ display: \"none\" }}\n          >\n            Canvas Settings\n            <span\n              onClick={(e) => {\n                //document.getElementById(\"File\").style.display = \"none\";\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              className={tbStyles.close}\n              title=\"Close Modal\"\n            >\n              &times;\n            </span>\n            <div className={styles.btngroup}>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/CanvasSize2.png\" alt=\"CanvasSize\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Canvas Size</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/CanvasColor2.png\" alt=\"CanvasColor\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Canvas Color</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/CanvasImage2.png\" alt=\"CanvasImage\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Canvas Image</span>\n              </div>\n            </div>\n          </div>\n          <div\n            id=\"LayerSet\"\n            className={styles.LayerSet}\n            style={{ display: \"none\" }}\n          >\n            Layers\n            <span\n              onClick={(e) => {\n                //document.getElementById(\"File\").style.display = \"none\";\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              className={tbStyles.close}\n              title=\"Close Modal\"\n            >\n              &times;\n            </span>\n            <div className={styles.sbtngroup}>\n              <div className={styles.tooltip}>\n                <button>\n                  <img\n                    src=\"images/InsertBefore2.png\"\n                    alt=\"AddLayerBefore\"\n                  ></img>\n                </button>\n                <span className={styles.tooltiptextB}>Add Layer Before</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/InsertAfter2.png\" alt=\"AddLayerAfter\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Add Layer After</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/Up2.png\" alt=\"LayerUp\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Layer Up</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/Down2.png\" alt=\"LayerDown\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Layer Down</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/Hide2.png\" alt=\"HideLayer\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Hide Layer</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/Lock2.png\" alt=\"LockLayer\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Lock Layer</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/SortAlpha2.png\" alt=\"SortLayer\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Sort layer</span>\n              </div>\n            </div>\n            <ul className={styles.a}>\n              <li>Shapes</li>\n              <ul>\n                <li>Circle</li>\n                <li>Rectangle</li>\n              </ul>\n              <li>Texts</li>\n              <li>Lines</li>\n            </ul>\n          </div>\n          <div\n            id=\"Warehouse\"\n            className={styles.Warehouse}\n            style={{ display: \"none\" }}\n          >\n            Warehouse\n            <span\n              onClick={(e) => {\n                //document.getElementById(\"File\").style.display = \"none\";\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              className={tbStyles.close}\n              title=\"Close Modal\"\n            >\n              &times;\n            </span>\n            <div className={styles.btngroup}>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/Crane2.png\" alt=\"Crane\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Crane</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/Elevator2.png\" alt=\"Elevator\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Elevator</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/labels2.png\" alt=\"Labels\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Labels</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/CloudTool2.png\" alt=\"Cloud\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Cloud</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/CallOut2.png\" alt=\"Callout\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Callout</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/wedge2.png\" alt=\"Wedge\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Wedge</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/Ring2.png\" alt=\"Ring\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Ring</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/FilledArc2.png\" alt=\"FilledArc\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Filled Arc</span>\n              </div>\n            </div>\n          </div>\n          <div\n            id=\"Phases\"\n            className={styles.Phases}\n            style={{ display: \"none\" }}\n          >\n            Phases\n            <span\n              onClick={(e) => {\n                //document.getElementById(\"File\").style.display = \"none\";\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              className={tbStyles.close}\n              title=\"Close Modal\"\n            >\n              &times;\n            </span>\n            <div className={styles.btngroup}>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/NewPhase2.png\" alt=\"NewPhase\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>NewPhase</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/StartDate2.png\" alt=\"StartDate\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Start Date</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/EndDate2.png\" alt=\"EndDate\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>End Date</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/DeletePhase2.png\" alt=\"DeletePhase\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Delete Phase </span>\n              </div>\n            </div>\n          </div>\n          <div\n            id=\"Measures\"\n            className={styles.Measures}\n            style={{ display: \"none\" }}\n          >\n            Measurement\n            <span\n              onClick={(e) => {\n                //document.getElementById(\"File\").style.display = \"none\";\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              className={tbStyles.close}\n              title=\"Close Modal\"\n            >\n              &times;\n            </span>\n            <div className={styles.btngroup}>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/PageScale2.png\" alt=\"PageScale\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Page Scale</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/setunit2.png\" alt=\"SetUnits\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Set Units</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/Length2.png\" alt=\"Length\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Length</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/Perimeter2.png\" alt=\"Perimeter\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Perimeter</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/Area2.png\" alt=\"Area\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Area</span>\n              </div>\n            </div>\n          </div>\n          <div\n            id=\"Animation\"\n            className={styles.Animation}\n            style={{ display: \"none\" }}\n          >\n            Phase Player\n            <span\n              onClick={(e) => {\n                //document.getElementById(\"File\").style.display = \"none\";\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              className={tbStyles.close}\n              title=\"Close Modal\"\n            >\n              &times;\n            </span>\n            <div className={styles.sbtngroup}>\n              <div className={styles.tooltip}>\n                <button>Phase1</button>\n                <span className={styles.tooltiptextB}>Play</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>Phase2</button>\n                <span className={styles.tooltiptextB}>Play</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>Phase3</button>\n                <span className={styles.tooltiptextB}>Play</span>\n              </div>\n            </div>\n            <div className={styles.sbtngroup}>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src=\"images/Play2.png\" alt=\"Play\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Play/Stop</span>\n              </div>\n              <input type=\"range\" min=\"1\" max=\"100\"></input>\n              Play Speed\n              <div className={styles.tooltip}>\n                <button>1</button>\n                <span className={styles.tooltiptextB}>1 Day/Second</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>2</button>\n                <span className={styles.tooltiptextB}>2 Day/Second</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>5</button>\n                <span className={styles.tooltiptextB}>5 Day/Second</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>10</button>\n                <span className={styles.tooltiptextB}>10 Day/Second</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>30</button>\n                <span className={styles.tooltiptextB}>30 Day/Second</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className={styles.right} ref={rightBar}>\n          <div className={styles.tab}>\n            <button\n              id=\"select\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = true;\n                setCanvasTool(\"select\");\n                setActiveTool(e, \"select\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={\"images/Select2.png\"} alt=\"Select\"></img>\n                <span className={styles.tooltiptext}>Selection</span>\n              </div>\n            </button>\n            <button\n              id=\"text\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"text\");\n                setActiveTool(e, \"text\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={\"images/TextBox2.png\"} alt=\"TextBox\"></img>\n                <span className={styles.tooltiptext}>Text</span>\n              </div>\n            </button>\n            <button\n              id=\"pen\"\n              onClick={(e) => {\n                setCanvasTool(\"pen\");\n                canvas.isDrawingMode = 1;\n                if (stroke.a === 0) setStrokeColor({ r: 0, g: 0, b: 0, a: 1 });\n                canvas.freeDrawingBrush.color = stroke;\n                canvas.freeDrawingBrush.width = strokeWidth;\n                setActiveTool(e, \"pen\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={\"images/PenTool2.png\"} alt=\"Pen\"></img>\n                <span className={styles.tooltiptext}>Free-hand</span>\n              </div>\n            </button>\n            <button\n              id=\"cloud\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"cloud\");\n                setActiveTool(e, \"cloud\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={\"images/Cloud2.png\"} alt=\"Cloud\"></img>\n                <span className={styles.tooltiptext}>Cloud</span>\n              </div>\n            </button>\n            <button\n              id=\"callout\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"callout\");\n                setActiveTool(e, \"callout\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={\"images/CallOut2.png\"} alt=\"Callout\"></img>\n                <span className={styles.tooltiptext}>Callout</span>\n              </div>\n            </button>\n            <button\n              id=\"image\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"image\");\n                setActiveTool(e, \"image\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={\"images/Image2.png\"} alt=\"Edit\"></img>\n                <span className={styles.tooltiptext}>Image Edit</span>\n              </div>\n            </button>\n            <div className={styles.tabspace}></div>\n            <button\n              id=\"line\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                editPoly.current = true;\n                setCanvasTool(\"line\");\n                setActiveTool(e, \"line\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={\"images/Line2.png\"} alt=\"Line\"></img>\n                <span className={styles.tooltiptext}>Line</span>\n              </div>\n            </button>\n            <button\n              id=\"polyline\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                setCanvasTool(\"polyline\");\n                setActiveTool(e, \"polyline\");\n                canvas.selection = false;\n                var objects = canvas.getObjects();\n                for (var i = 0; i < objects.length; i++) {\n                  objects[i].set({ selectable: false, evented: false });\n                }\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={\"images/Polyline2.png\"} alt=\"Polyline\"></img>\n                <span className={styles.tooltiptext}>Polyline</span>\n              </div>\n            </button>\n            <button\n              id=\"arrow\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"arrow\");\n                setActiveTool(e, \"arrow\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={\"images/Arrow2.png\"} alt=\"Arrow\"></img>\n                <span className={styles.tooltiptext}>Arrow</span>\n              </div>\n            </button>\n            <button\n              id=\"arc\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"arc\");\n                setActiveTool(e, \"arc\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={\"images/Arc2.png\"} alt=\"Arc\"></img>\n                <span className={styles.tooltiptext}>Arc</span>\n              </div>\n            </button>\n            <button\n              id=\"rect\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                canvas.selection = false;\n                canvas.forEachObject(function (o) {\n                  o.selectable = false;\n                });\n                canvas.renderAll();\n                setCanvasTool(\"rect\");\n                setActiveTool(e, \"rect\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={\"images/Rectangle2.png\"} alt=\"Rectangle\"></img>\n                <span className={styles.tooltiptext}>Rectangle.current</span>\n              </div>\n            </button>\n            <button\n              id=\"polygon\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"polygon\");\n                setActiveTool(e, \"polygon\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={\"images/Polygon2.png\"} alt=\"Polygon\"></img>\n                <span className={styles.tooltiptext}>Polygon</span>\n              </div>\n            </button>\n            <button\n              id=\"rpolygon\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"rpolygon\");\n                setActiveTool(e, \"rpolygon\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={\"images/RPolygon2.png\"} alt=\"Regular Polygon\"></img>\n                <span className={styles.tooltiptext}>Regular Polygon</span>\n              </div>\n            </button>\n            <button\n              id=\"circle\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"circle\");\n                setActiveTool(e, \"circle\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={\"images/Circle2.png\"} alt=\"Circle\"></img>\n                <span className={styles.tooltiptext}>Circle</span>\n              </div>\n            </button>\n            <button\n              id=\"ellipse\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"ellipse\");\n                setActiveTool(e, \"ellipse\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={\"images/Ellipse2.png\"} alt=\"Ellipse\"></img>\n                <span className={styles.tooltiptext}>Ellipse</span>\n              </div>\n            </button>\n            <div className={styles.tabspace}></div>\n            <button\n              id=\"dimension\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"dimension\");\n                setActiveTool(e, \"dimension\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={\"images/Dimension2.png\"} alt=\"Dimension\"></img>\n                <span className={styles.tooltiptext}>Dimension</span>\n              </div>\n            </button>\n\n            <button\n              id=\"area\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"area\");\n                setActiveTool(e, \"area\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={\"images/Area2.png\"} alt=\"Area\"></img>\n                <span className={styles.tooltiptext}>Area</span>\n              </div>\n            </button>\n            <button\n              id=\"length\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"length\");\n                setActiveTool(e, \"length\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={\"images/Length2.png\"} alt=\"Length\"></img>\n                <span className={styles.tooltiptext}>Length</span>\n              </div>\n            </button>\n            <button\n              id=\"perimeter\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"perimeter\");\n                setActiveTool(e, \"perimeter\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={\"images/Perimeter2.png\"} alt=\"Perimeter\"></img>\n                <span className={styles.tooltiptext}>Perimeter</span>\n              </div>\n            </button>\n          </div>\n        </div>\n        <div>\n          <canvas\n            ref={canvasRef}\n            id=\"my-fabric-canvas\"\n            width=\"1191\"\n            height=\"842\"\n          ></canvas>\n        </div>\n      </div>\n    </MediaQuery>\n  );\n};\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"propBar\":\"toolbar_propBar__3mJek\",\"buttontoolbar\":\"toolbar_buttontoolbar__215b6\",\"tooltipDown\":\"toolbar_tooltipDown__3aC60\",\"tooltiptextDown\":\"toolbar_tooltiptextDown__CiR54\",\"dropdown\":\"toolbar_dropdown__3sqrp\",\"dropbtn\":\"toolbar_dropbtn__2ue1q\",\"dropdowncontent\":\"toolbar_dropdowncontent__3c3eV\",\"close\":\"toolbar_close__3sM_E\"};"],"sourceRoot":""}