{"ast":null,"code":"import _toConsumableArray from\"c:/Tutorials/elp-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _createForOfIteratorHelper from\"c:/Tutorials/elp-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"c:/Tutorials/elp-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from\"react\";import{fabric}from\"fabric\";import{SketchPicker}from\"react-color\";import reactCSS from\"reactcss\";import\"./styles.css\";import styles from\"./rightMenu.module.css\";import tbStyles from\"./toolbar.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={version:\"3.6.3\",objects:[{type:\"rect\",version:\"3.6.3\",originX:\"left\",originY:\"top\",left:0,top:0,width:1,height:1,fill:\"black\",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:\"butt\",strokeDashOffset:0,strokeLineJoin:\"miter\",strokeMiterLimit:4,scaleX:1,scaleY:1,angle:0,flipX:false,flipY:false,opacity:1,shadow:null,visible:false,clipTo:null,backgroundColor:\"\",fillRule:\"nonzero\",paintFirst:\"fill\",globalCompositeOperation:\"source-over\",transformMatrix:null,skewX:0,skewY:0,rx:0,ry:0,name:\"shape-rect-n\"}]};var fontCheck=new Set([// Windows 10\n\"Arial\",\"Arial Black\",\"Bahnschrift\",\"Calibri\",\"Cambria\",\"Cambria Math\",\"Candara\",\"Comic Sans MS\",\"Consolas\",\"Constantia\",\"Corbel\",\"Courier New\",\"Ebrima\",\"Franklin Gothic Medium\",\"Gabriola\",\"Gadugi\",\"Georgia\",\"HoloLens MDL2 Assets\",\"Impact\",\"Ink Free\",\"Javanese Text\",\"Leelawadee UI\",\"Lucida Console\",\"Lucida Sans Unicode\",\"Malgun Gothic\",\"Marlett\",\"Microsoft Himalaya\",\"Microsoft JhengHei\",\"Microsoft New Tai Lue\",\"Microsoft PhagsPa\",\"Microsoft Sans Serif\",\"Microsoft Tai Le\",\"Microsoft YaHei\",\"Microsoft Yi Baiti\",\"MingLiU-ExtB\",\"Mongolian Baiti\",\"MS Gothic\",\"MV Boli\",\"Myanmar Text\",\"Nirmala UI\",\"Palatino Linotype\",\"Segoe MDL2 Assets\",\"Segoe Print\",\"Segoe Script\",\"Segoe UI\",\"Segoe UI Historic\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"SimSun\",\"Sitka\",\"Sylfaen\",\"Symbol\",\"Tahoma\",\"Times New Roman\",\"Trebuchet MS\",\"Verdana\",\"Webdings\",\"Wingdings\",\"Yu Gothic\",// macOS\n\"American Typewriter\",\"Andale Mono\",\"Arial\",\"Arial Black\",\"Arial Narrow\",\"Arial Rounded MT Bold\",\"Arial Unicode MS\",\"Avenir\",\"Avenir Next\",\"Avenir Next Condensed\",\"Baskerville\",\"Big Caslon\",\"Bodoni 72\",\"Bodoni 72 Oldstyle\",\"Bodoni 72 Smallcaps\",\"Bradley Hand\",\"Brush Script MT\",\"Chalkboard\",\"Chalkboard SE\",\"Chalkduster\",\"Charter\",\"Cochin\",\"Comic Sans MS\",\"Copperplate\",\"Courier\",\"Courier New\",\"Didot\",\"DIN Alternate\",\"DIN Condensed\",\"Futura\",\"Geneva\",\"Georgia\",\"Gill Sans\",\"Helvetica\",\"Helvetica Neue\",\"Herculanum\",\"Hoefler Text\",\"Impact\",\"Lucida Grande\",\"Luminari\",\"Marker Felt\",\"Menlo\",\"Microsoft Sans Serif\",\"Monaco\",\"Noteworthy\",\"Optima\",\"Palatino\",\"Papyrus\",\"Phosphate\",\"Rockwell\",\"Savoye LET\",\"SignPainter\",\"Skia\",\"Snell Roundhand\",\"Tahoma\",\"Times\",\"Times New Roman\",\"Trattatello\",\"Trebuchet MS\",\"Verdana\",\"Zapfino\"].sort());// Or you can use:\n// const fabric = require(\"fabric\").fabric;\n//const canvas = new fabric.Canvas(\"my-fabric-canvas\");\nvar App=function App(){// for undo/redoing\nvar _useState=useState([initialState]),_useState2=_slicedToArray(_useState,2),past=_useState2[0],setPast=_useState2[1];var _useState3=useState([initialState]),_useState4=_slicedToArray(_useState3,2),future=_useState4[0],setFuture=_useState4[1];//const [newAction, setNewAction] = useState(0);\nvar _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),pageLoad=_useState6[0],setPageLoad=_useState6[1];var canvasRef=useRef();var mainDiv=useRef(null);var rightBar=useRef();var shapeCount=useRef(0);var isDrawing=useRef(false);var currentStroke=useRef(\"\");var editPoly=useRef(true);var openPoly=useRef(null);var polyType=useRef(\"\");//anchors\nvar _useState7=useState(),_useState8=_slicedToArray(_useState7,2),canvas=_useState8[0],setCanvas=_useState8[1];//const [canvasHistory, setCanvasHistory] = useState([initialState]);\n//const [canvasHistory, setCanvasHistory] = useState([]);\n// const [canvasState, setCanvasState] = useState(initialState);\n//const [canvasState, setCanvasState] = useState();\nvar _useState9=useState(\"select\"),_useState10=_slicedToArray(_useState9,2),canvasTool=_useState10[0],setCanvasTool=_useState10[1];var _useState11=useState(1),_useState12=_slicedToArray(_useState11,2),strokeWidth=_useState12[0],setStrokeWidth=_useState12[1];// const [stroke, setStrokeColor] = useState(\"black\");\nvar _useState13=useState({r:\"0\",g:\"0\",b:\"0\",a:\"1\"}),_useState14=_slicedToArray(_useState13,2),stroke=_useState14[0],setStrokeColor=_useState14[1];var _useState15=useState({r:\"0\",g:\"0\",b:\"0\",a:\"0\"}),_useState16=_slicedToArray(_useState15,2),fill=_useState16[0],setFillColor=_useState16[1];var _useState17=useState({r:\"255\",g:\"255\",b:\"0\",a:\"1\"}),_useState18=_slicedToArray(_useState17,2),textHighlight=_useState18[0],setHighlight=_useState18[1];// const [fill, setFillColor] = useState(\"black\");\nvar _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),dashSize=_useState20[0],setDashSize=_useState20[1];var _useState21=useState(0),_useState22=_slicedToArray(_useState21,2),gapSize=_useState22[0],setGapSize=_useState22[1];var _useState23=useState(100),_useState24=_slicedToArray(_useState23,2),opacity=_useState24[0],setOpacity=_useState24[1];// const [snap, setSnap] = useState(false);\nvar _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),font=_useState26[0],setFont=_useState26[1];var _useState27=useState(30),_useState28=_slicedToArray(_useState27,2),fontSize=_useState28[0],setFontSize=_useState28[1];var _useState29=useState(\"normal\"),_useState30=_slicedToArray(_useState29,2),fontWeight=_useState30[0],setFontWeight=_useState30[1];var _useState31=useState(\"regular\"),_useState32=_slicedToArray(_useState31,2),fontStyle=_useState32[0],setFontStyle=_useState32[1];//const [textHighlight, setHighlight] = useState(\"yellow\");\nvar _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),showStrokePicker=_useState34[0],setShowStrokePicker=_useState34[1];var _useState35=useState(false),_useState36=_slicedToArray(_useState35,2),showFillPicker=_useState36[0],setShowFillPicker=_useState36[1];var _useState37=useState(false),_useState38=_slicedToArray(_useState37,2),showHighlightPicker=_useState38[0],setShowHighlightPicker=_useState38[1];//const [shapeCount, setShapeCount] = useState(0);\n//const opacity = useRef(100);\nvar snap=useRef(false);var newShape=useRef(true);var anchors=useRef([]);var pointer=useRef();var line=useRef(null);var origX=useRef();var origY=useRef();var angle=useRef();var arrow=useRef(null);var selectedShape=useRef(null);var polyPoints=useRef([]);var rpolygon=useRef(null);var Rectangle=useRef(null);var circle=useRef(null);var ellipse=useRef(null);var polyLines=useRef([]);var currentToolId=useRef(null);var currentOpenPanel=\"none\";var drawingObject={};drawingObject.type=\"\";drawingObject.background=\"\";drawingObject.border=\"\";var StrokeSwatchClick=function StrokeSwatchClick(){setShowStrokePicker(function(showStrokePicker){return!showStrokePicker;});};var FillSwatchClick=function FillSwatchClick(){setShowFillPicker(function(showFillPicker){return!showFillPicker;});};var HighlightSwatchClick=function HighlightSwatchClick(){setShowHighlightPicker(function(showHighlightPicker){return!showHighlightPicker;});};var StrokeSwatchClose=function StrokeSwatchClose(){setShowStrokePicker(false);};var FillSwatchClose=function FillSwatchClose(){setShowFillPicker(false);};var HighlightSwatchClose=function HighlightSwatchClose(){setShowHighlightPicker(false);};var StrokeSwatchChange=function StrokeSwatchChange(color){//console.log(stroke);\nsetStrokeColor(color.rgb);setShapeAttributes({stroke:\"rgba(\"+color.rgb.r+\", \"+color.rgb.g+\", \"+color.rgb.b+\", \"+color.rgb.a+\")\"});};var FillSwatchChange=function FillSwatchChange(color){//console.log(stroke);\nsetFillColor(color.rgb);setShapeAttributes({fill:\"rgba(\"+color.rgb.r+\", \"+color.rgb.g+\", \"+color.rgb.b+\", \"+color.rgb.a+\")\"});//console.log(swatchStyles.fill);\n};var HighlightSwatchChange=function HighlightSwatchChange(color){//console.log(stroke);\nsetHighlight(color.rgb);setShapeAttributes({textBackgroundColor:\"rgba(\"+color.rgb.r+\", \"+color.rgb.g+\", \"+color.rgb.b+\", \"+color.rgb.a+\")\"});};var calcPolygonPoints=function calcPolygonPoints(sideCount,radius){var sweep=Math.PI*2/sideCount;var cx=radius;var cy=radius;var points=[];for(var i=0;i<sideCount;i++){var x=cx+radius*Math.cos(i*sweep);var y=cy+radius*Math.sin(i*sweep);points.push({x:x,y:y});}return points;};/*\n  function click(id) {\n    var ev = new MouseEvent(\"click\", {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    });\n\n    var el = document.getElementById(id);\n    el.dispatchEvent(ev);\n  }\n  */var saveCanvasState=function saveCanvasState(newCanvasState){past.push(newCanvasState);setPast(past);setFuture([]);localStorage.clear();localStorage.myFabricJSCanvas=JSON.stringify(newCanvasState);//console.log(localStorage.myFabricJSCanvas);\n};/*\n  const onObjectModified = useCallback(\n    (e) => {\n      const newCanvasState = e.target.canvas.toJSON([\"name\"]);\n      //const newCanvasState = canvas.toJSON([\"name\"]);\n      setCanvasState(newCanvasState);\n      // Limit history depth\n      setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\n      //setPast([...past, newCanvasState]);\n      //setFuture([]);\n      console.log(newCanvasState);\n    },\n    [setCanvasState, setCanvasHistory]\n  );\n*/React.useEffect(function(){var fontAvailable=new Set();var _iterator=_createForOfIteratorHelper(fontCheck.values()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _font=_step.value;if(document.fonts.check(\"12px \\\"\".concat(_font,\"\\\"\"))){fontAvailable.add(_font);var x=document.getElementById(\"fonts\");var option=document.createElement(\"option\");option.text=_font;x.add(option);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}},[]);// React.useEffect(() => {}, [canvasState]);\nReact.useEffect(function(){var canvas=new fabric.Canvas(canvasRef.current);canvas.set({fireMiddleClick:true,// <-- enable firing of middle click events\nstopContextMenu:true});//canvas.loadFromJSON(canvasState);\n//    console.log(past[past.length - 1]);\nif(pageLoad===null&&localStorage.myFabricJSCanvas!==\"undefined\"){setPageLoad(1);console.log(localStorage.myFabricJSCanvas);var data=JSON.parse(localStorage.myFabricJSCanvas);canvas.loadFromJSON(data);var json=canvas.toJSON([\"name\"]);past.push(json);setPast(past);setFuture([]);}else{canvas.loadFromJSON(past[past.length-1]);}canvas.renderAll();editPoly.current=true;if(canvasTool===\"pen\"){canvas.isDrawingMode=1;canvas.freeDrawingBrush.color=\"rgba(\"+stroke.r+\", \"+stroke.g+\", \"+stroke.b+\", \"+stroke.a+\")\";canvas.freeDrawingBrush.width=strokeWidth;}if(canvasTool!==\"select\"){canvas.selection=false;canvas.defaultCursor=\"crosshair\";canvas.forEachObject(function(o){o.selectable=false;o.hoverCursor=\"move\";});if(openPoly.current!==null){openPoly.current=null;canvas.forEachObject(function(o){if(o.name.includes(\"anchor\")){canvas.remove(o);}});anchors.current=[];canvas.renderAll();var newCanvasState=canvas.toJSON([\"name\"]);// setCanvasState(newCanvasState);\n// Save state to History and Limit history depth to 32\n// setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\nsaveCanvasState(newCanvasState);localStorage.myFabricJSCanvas=JSON.stringify(newCanvasState);}}else{canvas.selection=true;canvas.forEachObject(function(o){o.selectable=true;});}canvas.on(\"object:rotating\",function(options){if(!snap.current)return;var angle=options.target.angle;var locked=Math.ceil(options.target.angle/5)*5;if(Math.abs(angle-locked)<10||Math.abs(locked-angle)<10){angle=locked;}options.target.set({angle:angle});});//canvas.on(\"object:added\", onObjectModified);\n// canvas.on(\"object:modified\", onObjectModified);\ncanvas.on(\"object:modified\",function(e){var newCanvasState=e.target.canvas.toJSON([\"name\"]);past.push(newCanvasState);setPast(past);// console.log(past);\nsetFuture([]);localStorage.clear();localStorage.myFabricJSCanvas=JSON.stringify(newCanvasState);});canvas.on(\"mouse:dblclick\",function(e){if(canvasTool===\"polygon\"){canvas.remove(line.current);for(var i=0;i<polyLines.current.length;i++){canvas.remove(polyLines.current[i]);}newShape.current=true;isDrawing.current=false;var polyGon=null;polyGon=new fabric.Polygon(polyPoints.current,{stroke:\"rgba(\"+stroke.r+\", \"+stroke.g+\", \"+stroke.b+\", \"+stroke.a+\")\",fill:\"rgba(\"+fill.r+\", \"+fill.g+\", \"+fill.b+\", \"+fill.a+\")\",strokeWidth:strokeWidth,selectable:false,hoverCursor:\"default\",name:\"shape-polygon-\"+shapeCount.current});canvas.add(polyGon);editPoly.current=true;canvas.renderAll();shapeCount.current++;var _newCanvasState=canvas.toJSON([\"name\"]);// setCanvasState(newCanvasState);\n// Save state to History and Limit history depth to 32\n// setCanvasHistory ((history) => [...history, newCanvasState].slice(-32));\nsaveCanvasState(_newCanvasState);}if(canvasTool===\"polyline\"){canvas.remove(line.current);for(i=0;i<polyLines.current.length;i++){canvas.remove(polyLines.current[i]);}newShape.current=true;isDrawing.current=false;var maxX=Math.max(polyPoints.current[0].x,polyPoints.current[polyPoints.current.length-1].x);var minX=Math.min(polyPoints.current[0].x,polyPoints.current[polyPoints.current.length-1].x);var maxY=Math.max(polyPoints.current[0].y,polyPoints.current[polyPoints.current.length-1].y);var minY=Math.min(polyPoints.current[0].y,polyPoints.current[polyPoints.current.length-1].y);var xDiff=maxX-minX;var yDiff=maxY-minY;var distance=Math.sqrt(xDiff*xDiff+yDiff*yDiff);//console.log(distance);\nvar polyLine=null;if(distance<=10){polyLine=new fabric.Polyline(polyPoints.current,{stroke:\"rgba(\"+stroke.r+\", \"+stroke.g+\", \"+stroke.b+\", \"+stroke.a+\")\",fill:\"rgba(\"+fill.r+\", \"+fill.g+\", \"+fill.b+\", \"+fill.a+\")\",strokeWidth:strokeWidth,selectable:false,hoverCursor:\"default\",name:\"shape-polyline-\"+shapeCount.current});}else{polyLine=new fabric.Polyline(polyPoints.current,{stroke:\"rgba(\"+stroke.r+\", \"+stroke.g+\", \"+stroke.b+\", \"+stroke.a+\")\",fill:\"\",strokeWidth:strokeWidth,selectable:false,hoverCursor:\"default\",name:\"shape-polyline-\"+shapeCount.current});}canvas.add(polyLine);editPoly.current=true;canvas.renderAll();shapeCount.current++;var _newCanvasState2=canvas.toJSON([\"name\"]);// setCanvasState(newCanvasState);\n// Save state to History and Limit history depth to 32\n//  setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\nsaveCanvasState(_newCanvasState2);}if(canvasTool===\"select\"){if(e.target.type===\"polyline\"&&editPoly.current){canvas.forEachObject(function(o){if(o.name.includes(\"anchor\")){canvas.remove(o);}});anchors.current=[];polyType.current=\"polyline\";// polyPoints = [];\nvar editable=e.target;openPoly.current=editable;//for future hiding the anchor points.\neditable.set({hasControls:false,hasBorders:false,selectable:false,hoverCursor:\"default\"});editPoly.current=false;// console.log(editable.get(\"points\"));\nvar str=editable.get(\"name\");var id=str.split(\"-\");var matrix=editable.calcTransformMatrix();var transformedPoints=editable.get(\"points\").map(function(p){return new fabric.Point(p.x-editable.pathOffset.x,p.y-editable.pathOffset.y);}).map(function(p){return fabric.util.transformPoint(p,matrix);});var pFill=editable.get(\"fill\");var pStroke=editable.get(\"stroke\");var pName=editable.get(\"name\");canvas.remove(editable);var updatedPoly=new fabric.Polyline(transformedPoints,{fill:pFill,stroke:pStroke,name:pName,hasControls:false,hasBorders:false,selectable:false,hoverCursor:\"default\"});canvas.add(updatedPoly);canvas.sendToBack(updatedPoly);anchors.current=[];transformedPoints.forEach(function(p,index){var anchor=new fabric.Circle({left:p.x,top:p.y,radius:15,fill:\"green\",originX:\"center\",originY:\"center\",hasControls:false,hasBorders:false,name:\"anchor-\"+id[2]+\"-\"+index});canvas.add(anchor);anchors.current.push(anchor);});canvas.renderAll();return;}if(e.target.type===\"polyline\"&&!editPoly.current){polyType.current=\"\";editable=e.target;editable.set({hasControls:true,hasBorders:true,selectable:true,hoverCursor:\"move\"});editPoly.current=true;anchors.current.forEach(function(anchor){canvas.remove(anchor);});anchors.current=[];openPoly.current=null;canvas.renderAll();return;}if(e.target.type===\"polygon\"&&editPoly.current){if(e.target.name.includes(\"rpolygon\"))return;canvas.forEachObject(function(o){if(o.name.includes(\"anchor\")){canvas.remove(o);}});anchors.current=[];polyType.current=\"polygon\";// polyPoints = [];\neditable=e.target;openPoly.current=editable;//for future hiding the anchor points.\neditable.set({hasControls:false,hasBorders:false,selectable:false,hoverCursor:\"default\"});editPoly.current=false;// console.log(editable.get(\"points\"));\nstr=editable.get(\"name\");id=str.split(\"-\");matrix=editable.calcTransformMatrix();transformedPoints=editable.get(\"points\").map(function(p){return new fabric.Point(p.x-editable.pathOffset.x,p.y-editable.pathOffset.y);}).map(function(p){return fabric.util.transformPoint(p,matrix);});pFill=editable.get(\"fill\");pStroke=editable.get(\"stroke\");pName=editable.get(\"name\");canvas.remove(editable);updatedPoly=new fabric.Polygon(transformedPoints,{fill:pFill,stroke:pStroke,name:pName,hasControls:false,hasBorders:false,selectable:false,hoverCursor:\"default\"});canvas.add(updatedPoly);canvas.sendToBack(updatedPoly);anchors.current=[];transformedPoints.forEach(function(p,index){var anchor=new fabric.Circle({left:p.x,top:p.y,radius:15,fill:\"green\",originX:\"center\",originY:\"center\",hasControls:false,hasBorders:false,name:\"anchor-\"+id[2]+\"-\"+index});canvas.add(anchor);anchors.current.push(anchor);});canvas.renderAll();return;}if(e.target.type===\"polygon\"&&!editPoly.current){if(e.target.name.includes(\"rpolygon\"))return;polyType.current=\"\";editable=e.target;editable.set({hasControls:true,hasBorders:true,selectable:true,hoverCursor:\"move\"});editPoly.current=true;anchors.current.forEach(function(anchor){canvas.remove(anchor);});anchors.current=[];canvas.renderAll();return;}}});canvas.on(\"object:moving\",function(options){if(options.target.type!==\"circle\"){if(openPoly.current!==null){openPoly.current=null;editPoly.current=true;anchors.current.forEach(function(anchor){canvas.remove(anchor);});anchors.current=[];canvas.renderAll();return;}}if(options.target.type===\"circle\"){var p=options.target;//console.log(p.get(\"name\"));\nif(p.name.includes(\"circle\"))return;if(p.name.includes(\"arc\"))return;var str=p.name.split(\"-\");if(polyType.current===\"polyline\"){var pname=\"shape-polyline-\"+str[1];}if(polyType.current===\"polygon\"){pname=\"shape-polygon-\"+str[1];}//console.log(pname);\nvar object=null;var objects=canvas.getObjects();for(var i=0;i<objects.length;i++){if(objects[i].name&&objects[i].name===pname){object=objects[i];break;}}// console.log(object);\nobject.points[str[2]]={x:p.getCenterPoint().x,y:p.getCenterPoint().y};//console.log(p.getCenterPoint());\nvar pFill=object.get(\"fill\");var pStroke=object.get(\"stroke\");var pName=object.get(\"name\");var pPoints=object.get(\"points\");//UNCOMMENT LINES 39 - 42 TO HAVE A WORKAROUND\ncanvas.remove(object);if(polyType.current===\"polyline\"){var updatedPoly=new fabric.Polyline(pPoints,{fill:pFill,stroke:pStroke,name:pName,hasControls:false,hasBorders:false,selectable:false,hoverCursor:\"default\"});}if(polyType.current===\"polygon\"){updatedPoly=new fabric.Polygon(pPoints,{fill:pFill,stroke:pStroke,name:pName,hasControls:false,hasBorders:false,selectable:false,hoverCursor:\"default\"});}canvas.add(updatedPoly);canvas.sendToBack(updatedPoly);canvas.renderAll();}});canvas.on(\"mouse:up\",function(e){this.setViewportTransform(this.viewportTransform);this.isDragging=false;if(e.button===2)return;// this.selection = true;\nif(canvas.isDrawingMode){canvas.renderAll();//canvas.selection = true;\nvar _newCanvasState3=canvas.toJSON([\"name\"]);// setCanvasState(newCanvasState);\n// Save state to History and Limit history depth to 32\n// setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\nsaveCanvasState(_newCanvasState3);// }\n}if(canvasTool===\"text\"){pointer.current=canvas.getPointer(e);var text=new fabric.IText(\"Click to edit\",{left:pointer.current.x,top:pointer.current.y,fontFamily:\"Arial\",fontSize:\"30\",// fontWeight: \"regular\",\n//stroke: stroke,\n// strokeWidth: strokeWidth,\nselectable:false,hoverCursor:\"default\",name:\"shape-text-\"+shapeCount.current});//console.log(text);\ncanvas.add(text);canvas.renderAll();shapeCount.current=shapeCount.current+1;// Save the canvas to State variable\nvar _newCanvasState4=canvas.toJSON([\"name\"]);/// setCanvasState(newCanvasState);\n// Save state to History and Limit history depth to 32\n// setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\nsaveCanvasState(_newCanvasState4);}if(canvasTool===\"line\"){if(newShape.current){pointer.current=canvas.getPointer(e);var points=[pointer.current.x,pointer.current.y,pointer.current.x,pointer.current.y];line.current=new fabric.Line(points,{strokeWidth:strokeWidth,stroke:\"rgba(\"+stroke.r+\", \"+stroke.g+\", \"+stroke.b+\", \"+stroke.a+\")\",originX:\"center\",originY:\"center\",selectable:false,hoverCursor:\"default\",name:\"shape-line-\"+shapeCount.current});canvas.add(line.current);shapeCount.current=shapeCount.current+1;newShape.current=false;}else{pointer.current=canvas.getPointer(e);line.current.set({x2:pointer.current.x,y2:pointer.current.y});canvas.renderAll();newShape.current=true;// Save the canvas to State variable\nvar _newCanvasState5=canvas.toJSON([\"name\"]);// setCanvasState(newCanvasState);\n// Save state to History and Limit history depth to 32\n// setCanvasHistory((history) =>\n//    [...history, newCanvasState].slice(-32)\n// );\nsaveCanvasState(_newCanvasState5);}}if(canvasTool===\"arrow\"){if(newShape.current){pointer.current=canvas.getPointer(e);var arrowLinePoints=[pointer.current.x,pointer.current.y,pointer.current.x,pointer.current.y];line.current=new fabric.Line(arrowLinePoints,{stroke:\"rgba(\"+stroke.r+\", \"+stroke.g+\", \"+stroke.b+\", \"+stroke.a+\")\",strokeWidth:strokeWidth});// reference points for arrowhead\norigX.current=line.current.x2;origY.current=line.current.y2;var dx=line.current.x2-line.current.x1,dy=line.current.y2-line.current.y1;/* calculate angle.current of arrow.current */angle.current=Math.atan2(dy,dx);angle.current*=180/Math.PI;angle.current+=90;arrow.current=new fabric.Triangle({angle:angle.current,fill:\"rgba(\"+fill.r+\", \"+fill.g+\", \"+fill.b+\", \"+fill.a+\")\",top:line.current.y2,left:line.current.x2,width:15,height:15,originX:\"center\",originY:\"center\",stroke:\"rgba(\"+stroke.r+\", \"+stroke.g+\", \"+stroke.b+\", \"+stroke.a+\")\",strokeWidth:strokeWidth});canvas.add(line.current);canvas.add(arrow.current);canvas.renderAll();newShape.current=false;}else{canvas.remove(line.current);canvas.remove(arrow.current);selectedShape.current=new fabric.Group([line.current,arrow.current],{hasBorders:true,hasControls:true,selectable:false,hoverCursor:\"default\"});shapeCount.current=shapeCount.current+1;selectedShape.current.set(\"name\",\"shape-arrow-\"+shapeCount.current+1);canvas.add(selectedShape.current);newShape.current=true;// Save the canvas to State variable\nvar _newCanvasState6=canvas.toJSON([\"name\"]);// setCanvasState(newCanvasState);\n// Save state to History and Limit history depth to 32\n//  setCanvasHistory((history) =>\n//   [...history, newCanvasState].slice(-32)\n//  );\nsaveCanvasState(_newCanvasState6);}}if(canvasTool===\"polyline\"){if(newShape.current){polyPoints.current=[];isDrawing.current=true;pointer.current=canvas.getPointer(e);polyPoints.current.push(pointer.current);line.current=new fabric.Line([pointer.current.x,pointer.current.y,pointer.current.x,pointer.current.y],{stroke:\"rgba(\"+stroke.r+\", \"+stroke.g+\", \"+stroke.b+\", \"+stroke.a+\")\",strokeWidth:strokeWidth,hasControls:false,hasBorders:false,selectable:false,lockMovementX:true,lockMovementY:true,hoverCursor:\"default\",originX:\"center\",originY:\"center\"});canvas.add(line.current);//polyLines.current.push(polyline);\nnewShape.current=false;}else{pointer.current=canvas.getPointer(e);line.current.set({x1:pointer.current.x,y1:pointer.current.y});polyPoints.current.push(pointer.current);if(polyPoints.current.length>1){var startPoint=polyPoints.current[polyPoints.current.length-2];var endPoint=polyPoints.current[polyPoints.current.length-1];var newPolyLine=new fabric.Line([startPoint.x,startPoint.y,endPoint.x,endPoint.y],{stroke:\"rgba(\"+stroke.r+\", \"+stroke.g+\", \"+stroke.b+\", \"+stroke.a+\")\",strokeWidth:strokeWidth,hasControls:false,hasBorders:false,selectable:false,lockMovementX:true,lockMovementY:true,hoverCursor:\"default\",originX:\"center\",originY:\"center\"});canvas.add(newPolyLine);polyLines.current.push(newPolyLine);canvas.renderAll();}}}if(canvasTool===\"polygon\"){if(newShape.current){polyPoints.current=[];isDrawing.current=true;pointer.current=canvas.getPointer(e);polyPoints.current.push(pointer.current);line.current=new fabric.Line([pointer.current.x,pointer.current.y,pointer.current.x,pointer.current.y],{stroke:\"rgba(\"+stroke.r+\", \"+stroke.g+\", \"+stroke.b+\", \"+stroke.a+\")\",strokeWidth:strokeWidth,hasControls:false,hasBorders:false,selectable:false,lockMovementX:true,lockMovementY:true,hoverCursor:\"default\",originX:\"center\",originY:\"center\"});canvas.add(line.current);newShape.current=false;}else{pointer.current=canvas.getPointer(e);line.current.set({x1:pointer.current.x,y1:pointer.current.y});polyPoints.current.push(pointer.current);if(polyPoints.current.length>1){startPoint=polyPoints.current[polyPoints.current.length-2];endPoint=polyPoints.current[polyPoints.current.length-1];newPolyLine=new fabric.Line([startPoint.x,startPoint.y,endPoint.x,endPoint.y],{stroke:\"rgba(\"+stroke.r+\", \"+stroke.g+\", \"+stroke.b+\", \"+stroke.a+\")\",strokeWidth:strokeWidth,hasControls:false,hasBorders:false,selectable:false,lockMovementX:true,lockMovementY:true,hoverCursor:\"default\",originX:\"center\",originY:\"center\"});canvas.add(newPolyLine);polyLines.current.push(newPolyLine);canvas.renderAll();}}}if(canvasTool===\"rpolygon\"){if(newShape.current){pointer.current=canvas.getPointer(e);origX.current=pointer.current.x;origY.current=pointer.current.y;rpolygon.current=new fabric.Polygon(calcPolygonPoints(8,Math.abs(origX.current-pointer.current.x)/2),{objectCaching:false,left:origX.current,top:origY.current,originX:\"center\",originY:\"center\",fill:\"rgba(\"+fill.r+\", \"+fill.g+\", \"+fill.b+\", \"+fill.a+\")\",perPixelTargetFind:false,strokeWidth:strokeWidth,stroke:\"rgba(\"+stroke.r+\", \"+stroke.g+\", \"+stroke.b+\", \"+stroke.a+\")\",hasControls:false,hasBorders:false,name:\"shape-rpolygon-\"+shapeCount.current});canvas.add(rpolygon.current);newShape.current=false;shapeCount.current++;}else{newShape.current=true;var matrix=rpolygon.current.calcTransformMatrix();var transformedPoints=rpolygon.current.get(\"points\").map(function(p){return new fabric.Point(p.x-rpolygon.current.pathOffset.x,p.y-rpolygon.current.pathOffset.y);}).map(function(p){return fabric.util.transformPoint(p,matrix);});canvas.remove(rpolygon.current);var updatedPoly=new fabric.Polygon(transformedPoints,{fill:\"rgba(\"+fill.r+\", \"+fill.g+\", \"+fill.b+\", \"+fill.a+\")\",stroke:\"rgba(\"+stroke.r+\", \"+stroke.g+\", \"+stroke.b+\", \"+stroke.a+\")\",name:\"shape-rpolygon-\"+shapeCount.current,hasControls:false,hasBorders:false,selectable:false,hoverCursor:\"default\"});canvas.add(updatedPoly);canvas.renderAll();// Save the canvas to State variable\nvar _newCanvasState7=canvas.toJSON([\"name\"]);// setCanvasState(newCanvasState);\n// Save state to History and Limit history depth to 32\n//  setCanvasHistory((history) =>\n//   [...history, newCanvasState].slice(-32)\n// );\nsaveCanvasState(_newCanvasState7);}}if(canvasTool===\"rect\"){if(newShape.current){pointer.current=canvas.getPointer(e);origX.current=pointer.current.x;origY.current=pointer.current.y;Rectangle.current=new fabric.Rect({left:origX.current,top:origY.current,fill:\"rgba(\"+fill.r+\", \"+fill.g+\", \"+fill.b+\", \"+fill.a+\")\",stroke:\"rgba(\"+stroke.r+\", \"+stroke.g+\", \"+stroke.b+\", \"+stroke.a+\")\",strokeWidth:strokeWidth,strokeDashArray:[dashSize,gapSize],opacity:opacity,selectable:false,hoverCursor:\"default\",name:\"shape-rect-\"+shapeCount.current});shapeCount.current++;canvas.add(Rectangle.current);newShape.current=false;}else{pointer.current=canvas.getPointer(e);if(origX.current>pointer.current.x){Rectangle.current.set({left:Math.abs(pointer.current.x)});}if(origY.current>pointer.current.y){Rectangle.current.set({top:Math.abs(pointer.current.y)});}Rectangle.current.set({width:Math.abs(origX.current-pointer.current.x)});Rectangle.current.set({height:Math.abs(origY.current-pointer.current.y)});newShape.current=true;canvas.renderAll();// Save the canvas to State variable\nvar _newCanvasState8=canvas.toJSON([\"name\"]);// setCanvasState(newCanvasState);\n// Save state to History and Limit history depth to 32\n// setCanvasHistory((history) =>\n//    [...history, newCanvasState].slice(-32)\n//  );\nsaveCanvasState(_newCanvasState8);}}if(canvasTool===\"arc\"){if(newShape.current){pointer.current=canvas.getPointer(e);origX.current=pointer.current.x;origY.current=pointer.current.y;circle.current=new fabric.Circle({left:origX.current,top:origY.current,originX:\"left\",originY:\"top\",radius:pointer.current.x-origX.current,angle:45,startAngle:0,endAngle:Math.PI,fill:\"rgba(\"+fill.r+\", \"+fill.g+\", \"+fill.b+\", \"+fill.a+\")\",stroke:\"rgba(\"+stroke.r+\", \"+stroke.g+\", \"+stroke.b+\", \"+stroke.a+\")\",strokeWidth:strokeWidth,selectable:false,hoverCursor:\"default\",name:\"shape-arc-\"+shapeCount.current});canvas.add(circle.current);newShape.current=false;shapeCount.current++;}else{pointer.current=canvas.getPointer(e);var radius=Math.max(Math.abs(origY.current-pointer.current.y),Math.abs(origX.current-pointer.current.x))/2;if(radius>circle.current.strokeWidth){radius-=circle.current.strokeWidth/2;}circle.current.set({radius:radius});if(origX.current>pointer.current.x){circle.current.set({originX:\"right\"});}else{circle.current.set({originX:\"left\"});}if(origY.current>pointer.current.y){circle.current.set({originY:\"bottom\"});}else{circle.current.set({originY:\"top\"});}newShape.current=true;canvas.renderAll();// Save the canvas to State variable\nvar _newCanvasState9=canvas.toJSON([\"name\"]);// setCanvasState(newCanvasState);\n// Save state to History and Limit history depth to 32\n///  setCanvasHistory((history) =>\n//    [...history, newCanvasState].slice(-32)\n// );\nsaveCanvasState(_newCanvasState9);}}if(canvasTool===\"circle\"){if(newShape.current){pointer.current=canvas.getPointer(e);origX.current=pointer.current.x;origY.current=pointer.current.y;circle.current=new fabric.Circle({left:origX.current,top:origY.current,originX:\"left\",originY:\"top\",radius:pointer.current.x-origX.current,angle:0,fill:\"rgba(\"+fill.r+\", \"+fill.g+\", \"+fill.b+\", \"+fill.a+\")\",stroke:\"rgba(\"+stroke.r+\", \"+stroke.g+\", \"+stroke.b+\", \"+stroke.a+\")\",strokeWidth:strokeWidth,selectable:false,hoverCursor:\"default\",name:\"shape-circle-\"+shapeCount.current});canvas.add(circle.current);newShape.current=false;shapeCount.current++;}else{pointer.current=canvas.getPointer(e);radius=Math.max(Math.abs(origY.current-pointer.current.y),Math.abs(origX.current-pointer.current.x))/2;if(radius>circle.current.strokeWidth){radius-=circle.current.strokeWidth/2;}circle.current.set({radius:radius});if(origX.current>pointer.current.x){circle.current.set({originX:\"right\"});}else{circle.current.set({originX:\"left\"});}if(origY.current>pointer.current.y){circle.current.set({originY:\"bottom\"});}else{circle.current.set({originY:\"top\"});}newShape.current=true;canvas.renderAll();// Save the canvas to State variable\nvar _newCanvasState10=canvas.toJSON([\"name\"]);// setCanvasState(newCanvasState);\n// Save state to History and Limit history depth to 32\n//  setCanvasHistory((history) =>\n//    [...history, newCanvasState].slice(-32)\n//  );\nsaveCanvasState(_newCanvasState10);}}if(canvasTool===\"ellipse\"){if(newShape.current){pointer.current=canvas.getPointer(e);origX.current=pointer.current.x;origY.current=pointer.current.y;ellipse.current=new fabric.Ellipse({left:origX.current,top:origY.current,originX:\"left\",originY:\"top\",rx:pointer.current.x-origX.current,ry:pointer.current.y-origY.current,angle:0,fill:\"rgba(\"+fill.r+\", \"+fill.g+\", \"+fill.b+\", \"+fill.a+\")\",stroke:\"rgba(\"+stroke.r+\", \"+stroke.g+\", \"+stroke.b+\", \"+stroke.a+\")\",strokeWidth:strokeWidth,type:\"ellipse\",selectable:false,hoverCursor:\"default\",name:\"shape-ellipse-\"+shapeCount.current});canvas.add(ellipse.current);newShape.current=false;}else{pointer.current=canvas.getPointer(e);var rx=Math.abs(origX.current-pointer.current.x)/2;var ry=Math.abs(origY.current-pointer.current.y)/2;if(rx>ellipse.current.strokeWidth){rx-=ellipse.current.strokeWidth/2;}if(ry>ellipse.current.strokeWidth){ry-=ellipse.current.strokeWidth/2;}ellipse.current.set({rx:rx,ry:ry});if(origX.current>pointer.current.x){ellipse.current.set({originX:\"right\"});}else{ellipse.current.set({originX:\"left\"});}if(origY.current>pointer.current.y){ellipse.current.set({originY:\"bottom\"});}else{ellipse.current.set({originY:\"top\"});}newShape.current=true;canvas.renderAll();// Save the canvas to State variable\nvar _newCanvasState11=canvas.toJSON([\"name\"]);// setCanvasState(newCanvasState);\n// Save state to History and Limit history depth to 32\n//  setCanvasHistory((history) =>\n//    [...history, newCanvasState].slice(-32)\n//  );\nsaveCanvasState(_newCanvasState11);}}//check if user clicked an object\nif(e.target){if(!editPoly.current)return;var activeShape=canvas.getActiveObject();if(activeShape.length>1)return;// console.log(activeShape.type);\nif(activeShape){if(activeShape.stroke&&activeShape.type!==\"i-text\"){if(currentStroke.current!==null){var rgba=currentStroke.current.substr(5).split(\")\")[0].split(\",\");setStrokeColor({r:rgba[0],g:rgba[1],b:rgba[2],a:rgba[3]});}setStrokeWidth(activeShape.strokeWidth);}if(activeShape.fill){rgba=activeShape.fill.substr(5).split(\")\")[0].split(\",\");setFillColor({r:rgba[0],g:rgba[1],b:rgba[2],a:rgba[3]});}//console.log(activeShape.opacity);\nif(Number.isNaN(activeShape.opacity))setOpacity(100);else setOpacity(activeShape.opacity*100);//setOpacity(activeShape.opacity * 100);\n//setFont(activeShape.fontFamily);\n///setFontSize(activeShape.fontSize);\n//setFontWeight(activeShape.fontWeight);\n//setFontStyle(activeShape.fontStyle);\n}}});canvas.on(\"mouse:wheel\",function(opt){var delta=opt.e.deltaY;var zoom=canvas.getZoom();zoom*=Math.pow(0.999,delta);if(zoom>20)zoom=20;if(zoom<0.01)zoom=0.01;canvas.zoomToPoint({x:opt.e.offsetX,y:opt.e.offsetY},zoom);opt.e.preventDefault();opt.e.stopPropagation();var vpt=this.viewportTransform;if(zoom<400/1000){vpt[4]=200-1000*zoom/2;vpt[5]=200-1000*zoom/2;}else{if(vpt[4]>=0){vpt[4]=0;}else if(vpt[4]<canvas.getWidth()-1000*zoom){vpt[4]=canvas.getWidth()-1000*zoom;}if(vpt[5]>=0){vpt[5]=0;}else if(vpt[5]<canvas.getHeight()-1000*zoom){vpt[5]=canvas.getHeight()-1000*zoom;}}});canvas.on(\"mouse:down\",function(opt){if(canvasTool!==\"select\"){this.selection=false;}var evt=opt.e;if(opt.button===2){this.isDragging=true;this.selection=false;this.lastPosX=evt.clientX;this.lastPosY=evt.clientY;}});canvas.on(\"mouse:move\",function(opt){if(this.isDragging){var e=opt.e;var vpt=this.viewportTransform;vpt[4]+=e.clientX-this.lastPosX;vpt[5]+=e.clientY-this.lastPosY;this.requestRenderAll();this.lastPosX=e.clientX;this.lastPosY=e.clientY;}if(newShape.current===true&&canvasTool!==\"pen\"){return;}if(canvasTool===\"rect\"){pointer.current=canvas.getPointer(opt);if(origX.current>pointer.current.x){Rectangle.current.set({left:Math.abs(pointer.current.x)});}if(origY.current>pointer.current.y){Rectangle.current.set({top:Math.abs(pointer.current.y)});}Rectangle.current.set({width:Math.abs(origX.current-pointer.current.x)});Rectangle.current.set({height:Math.abs(origY.current-pointer.current.y)});canvas.renderAll();}if(canvasTool===\"line\"){pointer.current=canvas.getPointer(opt);line.current.set({x2:pointer.current.x,y2:pointer.current.y});canvas.renderAll();}if(canvasTool===\"arrow\"){pointer.current=canvas.getPointer(opt);line.current.set({x2:pointer.current.x,y2:pointer.current.y});var dx=line.current.x2-line.current.x1,dy=line.current.y2-line.current.y1;angle.current=Math.atan2(dy,dx);angle.current*=180/Math.PI;angle.current+=90;arrow.current.set({top:line.current.y2,left:line.current.x2,angle:angle.current,width:15,height:15});canvas.renderAll();}if(canvasTool===\"polyline\"){if(isDrawing.current){var endPoint=canvas.getPointer(opt);line.current.set({x2:endPoint.x,y2:endPoint.y});canvas.renderAll();}}if(canvasTool===\"polygon\"){if(isDrawing.current){endPoint=canvas.getPointer(opt);line.current.set({x2:endPoint.x,y2:endPoint.y});canvas.renderAll();}}if(canvasTool===\"rpolygon\"){pointer.current=canvas.getPointer(opt);rpolygon.current.set({points:calcPolygonPoints(8,Math.abs(origX.current-pointer.current.x)/2),left:origX.current,top:origY.current});canvas.renderAll();}if(canvasTool===\"arc\"){pointer.current=canvas.getPointer(opt);var radius=Math.max(Math.abs(origY.current-pointer.current.y),Math.abs(origX.current-pointer.current.x))/2;if(radius>circle.current.strokeWidth){radius-=circle.current.strokeWidth/2;}circle.current.set({radius:radius});if(origX.current>pointer.current.x){circle.current.set({originX:\"right\"});circle.current.set({angle:-135});}else{circle.current.set({originX:\"left\"});circle.current.set({angle:135});}if(origY.current>pointer.current.y){circle.current.set({originY:\"bottom\"});}else{circle.current.set({originY:\"top\"});}canvas.renderAll();}if(canvasTool===\"circle\"){pointer.current=canvas.getPointer(opt);radius=Math.max(Math.abs(origY.current-pointer.current.y),Math.abs(origX.current-pointer.current.x))/2;if(radius>circle.current.strokeWidth){radius-=circle.current.strokeWidth/2;}circle.current.set({radius:radius});if(origX.current>pointer.current.x){circle.current.set({originX:\"right\"});}else{circle.current.set({originX:\"left\"});}if(origY.current>pointer.current.y){circle.current.set({originY:\"bottom\"});}else{circle.current.set({originY:\"top\"});}canvas.renderAll();}if(canvasTool===\"ellipse\"){pointer.current=canvas.getPointer(opt);var rx=Math.abs(origX.current-pointer.current.x)/2;var ry=Math.abs(origY.current-pointer.current.y)/2;if(rx>ellipse.current.strokeWidth){rx-=ellipse.current.strokeWidth/2;}if(ry>ellipse.current.strokeWidth){ry-=ellipse.current.strokeWidth/2;}ellipse.current.set({rx:rx,ry:ry});if(origX.current>pointer.current.x){ellipse.current.set({originX:\"right\"});}else{ellipse.current.set({originX:\"left\"});}if(origY.current>pointer.current.y){ellipse.current.set({originY:\"bottom\"});}else{ellipse.current.set({originY:\"top\"});}canvas.renderAll();}});canvas.on(\"mouse:over\",function(e){if(e.target){//console.log(currentStroke.current);\ncurrentStroke.current=e.target.get(\"stroke\");console.log(currentStroke.current);e.target.set(\"stroke\",\"rgba(255,0,0,1)\");canvas.renderAll();}});canvas.on(\"mouse:out\",function(e){if(e.target){e.target.set(\"stroke\",currentStroke.current);canvas.renderAll();}});setCanvas(canvas);return function(){canvas.dispose();};},[canvasRef,canvasTool,setCanvas]);/*\n  const moveHistory = useCallback(\n    (step) => {\n      console.log(canvasState);\n      const currentStateIndex = canvasHistory.indexOf(canvasState);\n      const prevState = canvasHistory[currentStateIndex + step];\n      canvas.loadFromJSON(prevState);\n      setCanvasState(prevState);\n    },\n    [canvas, canvasState, canvasHistory, setCanvasState]\n  );\n*/ //const onUndo = useCallback(() => moveHistory(-1), [moveHistory]);\nvar onUndo=function onUndo(){var present=past.pop();var newFuture=[present].concat(_toConsumableArray(future));setFuture(newFuture);var previous=past[past.length-1];canvas.loadFromJSON(previous);setPast(past);console.log(past);};// const onRedo = useCallback(() => moveHistory(1), [moveHistory]);\nvar onRedo=function onRedo(){var next=future[0];canvas.loadFromJSON(next);var newFuture=future.slice(1);past.push(next);setPast(past);setFuture(newFuture);console.log(future);};var setShapeAttributes=function setShapeAttributes(attributes){var activeShape=canvas.getActiveObject();if(activeShape){var Attributes=attributes||{};if(activeShape.type===\"group\"){activeShape.item(0).set({stroke:Attributes.stroke||activeShape.item(1).stroke});activeShape.item(1).set({stroke:Attributes.stroke||activeShape.item(1).stroke,fill:Attributes.fill||activeShape.item(1).fill});}activeShape.set({strokeWidth:Attributes.strokeWidth||activeShape.strokeWidth,stroke:Attributes.stroke===\"nill\"?null:Attributes.stroke||activeShape.stroke,fill:Attributes.fill===\"nill\"?null:Attributes.fill||activeShape.fill,opacity:Attributes.opacity/100||activeShape.opacity,strokeDashArray:Attributes.strokeDashArray||activeShape.strokeDashArray,fontFamily:Attributes.fontFamily||activeShape.fontFamily,fontSize:Attributes.fontSize||activeShape.fontSize,fontWeight:Attributes.fontWeight||activeShape.fontWeight,fontStyle:Attributes.fontStyle||activeShape.fontStyle,textBackgroundColor:Attributes.textBackgroundColor||activeShape.textBackgroundColor});canvas.renderAll();canvas.setActiveObject(activeShape);var newCanvasState=canvas.toJSON([\"name\"]);//setCanvasState(newCanvasState);\n// Save state to History and Limit history depth to 32\n// setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\nsaveCanvasState(newCanvasState);// }\n}};function deleteObjects(){if(canvas.getActiveObjects===null)return;canvas.getActiveObjects().forEach(function(obj){canvas.remove(obj);});var newCanvasState=canvas.toJSON([\"name\"]);//setCanvasState(newCanvasState);\n// Save state to History and Limit history depth to 32\n//  setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\nsaveCanvasState(newCanvasState);}/*\n  function hexToRGB(hex, alpha) {\n    var r = parseInt(hex.slice(1, 3), 16),\n      g = parseInt(hex.slice(3, 5), 16),\n      b = parseInt(hex.slice(5, 7), 16);\n    if (alpha) {\n      return \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + alpha + \")\";\n    } else {\n      return \"rgb(\" + r + \", \" + g + \", \" + b + \")\";\n    }\n  }\n*/function w3_openPanel(evt,panelId){if(currentOpenPanel!==panelId){document.getElementById(\"Library\").style.height=\"400px\";document.getElementById(panelId).style.display=\"block\";if(currentOpenPanel!==\"none\")document.getElementById(currentOpenPanel).style.display=\"none\";currentOpenPanel=panelId;return;}if(currentOpenPanel===panelId){if(panelId===\"none\")return;document.getElementById(panelId).style.display=\"none\";currentOpenPanel=\"none\";document.getElementById(\"Library\").style.height=\"0px\";}/*\n    else {\n      if (currentOpenPanel !== \"None\") {\n        document.getElementById(currentOpenPanel).style.display = \"none\";\n      }\n      document.getElementById(\"Library\").style.height = \"400px\";\n      document.getElementById(panelId).style.display = \"block\";\n      currentOpenPanel = panelId;\n    }\n    */}var setActiveTool=function setActiveTool(e,id){if(currentToolId.current!==null){//console.log(currentToolId);\ndocument.getElementById(currentToolId.current).style.backgroundColor=\"#003059\";document.getElementById(id).style.backgroundColor=\"grey\";currentToolId.current=id;return;}else{//console.log(id);\ndocument.getElementById(id).style.backgroundColor=\"grey\";currentToolId.current=id;}};function handleKeyDown(event){if(event.key===\"s\"){setActiveTool(event,\"select\");return;}if(event.key===\"Delete\"){deleteObjects();return;}if(event.ctrlKey&&event.key===\"z\"){if(past.length===1)return;onUndo();return;}if(event.ctrlKey&&event.key===\"y\"){if(future.length===0)return;onRedo();return;}}var url=\"#\";var swatchStyles=reactCSS({default:{stroke:{width:\"36px\",height:\"14px\",borderRadius:\"2px\",background:\"rgba(\".concat(stroke.r,\", \").concat(stroke.g,\", \").concat(stroke.b,\", \").concat(stroke.a,\")\")},blank:{width:\"36px\",height:\"14px\",borderRadius:\"2px\"},fill:{width:\"36px\",height:\"14px\",borderRadius:\"2px\",background:\"rgba(\".concat(fill.r,\", \").concat(fill.g,\", \").concat(fill.b,\", \").concat(fill.a,\")\")},highlight:{width:\"36px\",height:\"14px\",borderRadius:\"2px\",background:\"rgba(\".concat(textHighlight.r,\", \").concat(textHighlight.g,\", \").concat(textHighlight.b,\", \").concat(textHighlight.a,\")\")},swatch:{padding:\"0px\",background:\"#fff\",borderRadius:\"1px\",boxShadow:\"0 0 0 1px rgba(0,0,0,.1)\",display:\"inline-block\",cursor:\"pointer\",backgroundImage:\"url(images/no.png)\"},pickerContainer:{display:\"inline-block\"},popover:{position:\"absolute\",zIndex:\"2\"},cover:{position:\"fixed\",top:\"50px\",right:\"0px\",bottom:\"0px\",left:\"100px\"}}});return/*#__PURE__*/_jsxs(\"div\",{ref:mainDiv,className:\"App\",onKeyDown:function onKeyDown(e){handleKeyDown(e);},tabIndex:\"0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:tbStyles.propBar,children:[/*#__PURE__*/_jsxs(\"a\",{href:url,children:[/*#__PURE__*/_jsx(\"button\",{className:tbStyles.buttontoolbar,onClick:onUndo,id:\"undo\"//disabled={canvasHistory[0] === canvasState}\n,disabled:past.length===1,children:/*#__PURE__*/_jsxs(\"div\",{className:tbStyles.tooltipDown,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/undo2.png\",alt:\"Undo\"}),/*#__PURE__*/_jsx(\"span\",{className:tbStyles.tooltiptextDown,children:\"Undo\"})]})}),/*#__PURE__*/_jsx(\"button\",{className:tbStyles.buttontoolbar,onClick:onRedo,id:\"redo\"//disabled={canvasHistory[canvasHistory.length - 1] === canvasState}\n,disabled:future.length===0,children:/*#__PURE__*/_jsxs(\"div\",{className:tbStyles.tooltipDown,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/redo2.png\",alt:\"Redo\"}),/*#__PURE__*/_jsx(\"span\",{className:tbStyles.tooltiptextDown,children:\"Redo\"})]})}),/*#__PURE__*/_jsx(\"button\",{className:tbStyles.buttontoolbar,onClick:deleteObjects,id:\"del\",children:/*#__PURE__*/_jsxs(\"div\",{className:tbStyles.tooltipDown,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/delete2.png\",alt:\"Delete\"}),/*#__PURE__*/_jsx(\"span\",{className:tbStyles.tooltiptextDown,children:\"Delete\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:tbStyles.dropdown,children:/*#__PURE__*/_jsxs(\"button\",{className:tbStyles.buttontoolbar,id:\"wList\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/lineWidth2.png\",alt:\"Line Width\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"wlDropDown\",className:tbStyles.dropdowncontent,children:[/*#__PURE__*/_jsx(\"a\",{href:url,onClick:function onClick(e){setStrokeWidth(1);setShapeAttributes({strokeWidth:1});},children:/*#__PURE__*/_jsx(\"img\",{src:\"images/stroke1.png\",alt:\"1\"})}),/*#__PURE__*/_jsx(\"a\",{href:url,onClick:function onClick(e){setStrokeWidth(2);setShapeAttributes({strokeWidth:2});},children:/*#__PURE__*/_jsx(\"img\",{src:\"images/stroke2.png\",alt:\"2\"})}),/*#__PURE__*/_jsx(\"a\",{href:url,onClick:function onClick(e){setStrokeWidth(4);setShapeAttributes({strokeWidth:4});},children:/*#__PURE__*/_jsx(\"img\",{src:\"images/stroke4.png\",alt:\"4\"})}),/*#__PURE__*/_jsx(\"a\",{href:url,onClick:function onClick(e){setStrokeWidth(5);setShapeAttributes({strokeWidth:5});},children:/*#__PURE__*/_jsx(\"img\",{src:\"images/stroke5.png\",alt:\"5\"})}),/*#__PURE__*/_jsx(\"a\",{href:url,onClick:function onClick(e){setStrokeWidth(10);setShapeAttributes({strokeWidth:10});},children:/*#__PURE__*/_jsx(\"img\",{src:\"images/stroke10.png\",alt:\"10\"})}),/*#__PURE__*/_jsx(\"a\",{href:url,onClick:function onClick(e){setStrokeWidth(12);setShapeAttributes({strokeWidth:12});},children:/*#__PURE__*/_jsx(\"img\",{src:\"images/stroke12.png\",alt:\"12\"})}),/*#__PURE__*/_jsx(\"a\",{href:url,onClick:function onClick(e){setStrokeWidth(15);setShapeAttributes({strokeWidth:15});},children:/*#__PURE__*/_jsx(\"img\",{src:\"images/stroke15.png\",alt:\"15\"})}),/*#__PURE__*/_jsx(\"a\",{href:url,onClick:function onClick(e){setStrokeWidth(20);setShapeAttributes({strokeWidth:20});},children:/*#__PURE__*/_jsx(\"img\",{src:\"images/stroke20.png\",alt:\"20\"})}),/*#__PURE__*/_jsx(\"a\",{href:url,onClick:function onClick(e){setStrokeWidth(25);setShapeAttributes({strokeWidth:25});},children:/*#__PURE__*/_jsx(\"img\",{src:\"images/stroke25.png\",alt:\"25\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:tbStyles.dropdown,children:/*#__PURE__*/_jsxs(\"button\",{className:tbStyles.buttontoolbar,id:\"sList\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/LineStyle2.png\",alt:\"Line Style\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"lsDropDown\",className:tbStyles.dropdowncontent,children:[/*#__PURE__*/_jsx(\"a\",{href:url,onClick:function onClick(e){setDashSize(0);setGapSize(0);setShapeAttributes({strokeDashArray:[0,0]});},children:/*#__PURE__*/_jsx(\"img\",{src:\"images/lineStyle1.png\",alt:\"1\"})}),/*#__PURE__*/_jsx(\"a\",{href:url,onClick:function onClick(e){setDashSize(10);setGapSize(5);setShapeAttributes({strokeDashArray:[10,5]});},children:/*#__PURE__*/_jsx(\"img\",{src:\"images/lineStyle2png.png\",alt:\"1\"})}),/*#__PURE__*/_jsx(\"a\",{href:url,onClick:function onClick(e){setDashSize(10);setGapSize(5);setShapeAttributes({strokeDashArray:[10,5]});},children:/*#__PURE__*/_jsx(\"img\",{src:\"images/lineStyle3.png\",alt:\"1\"})}),/*#__PURE__*/_jsx(\"a\",{href:url,onClick:function onClick(e){setDashSize(20);setGapSize(5);setShapeAttributes({strokeDashArray:[20,5]});},children:/*#__PURE__*/_jsx(\"img\",{src:\"images/lineStyle4.png\",alt:\"1\"})}),/*#__PURE__*/_jsx(\"a\",{href:url,onClick:function onClick(e){setDashSize(20);setGapSize(10);setShapeAttributes({strokeDashArray:[20,10]});},children:/*#__PURE__*/_jsx(\"img\",{src:\"images/lineStyle5.png\",alt:\"1\"})}),/*#__PURE__*/_jsx(\"a\",{href:url,onClick:function onClick(e){setDashSize(5);setGapSize(5);setShapeAttributes({strokeDashArray:[5,5]});},children:/*#__PURE__*/_jsx(\"img\",{src:\"images/lineStyle6.png\",alt:\"1\"})}),/*#__PURE__*/_jsx(\"a\",{href:url,onClick:function onClick(e){setDashSize(2);setGapSize(2);setShapeAttributes({strokeDashArray:[2,2]});},children:/*#__PURE__*/_jsx(\"img\",{src:\"images/lineStyle7.png\",alt:\"1\"})})]})]})}),/*#__PURE__*/_jsx(\"button\",{className:tbStyles.buttontoolbar,id:\"dropper\",children:/*#__PURE__*/_jsxs(\"div\",{className:tbStyles.tooltipDown,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/dropper2.png\",alt:\"Pick a color\"}),/*#__PURE__*/_jsx(\"span\",{className:tbStyles.tooltiptextDown,children:\"Pick a color\"})]})}),\"\\xA0Stroke\\xA0\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"strokePoint\",value:strokeWidth,min:\"0\",max:\"50\",onChange:function onChange(e){setStrokeWidth(+e.target.value);setShapeAttributes({strokeWidth:+e.target.value});}}),\"\\xA0Dash\\xA0\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",max:\"20\",id:\"dashSize\",value:dashSize,onChange:function onChange(e){setDashSize(+e.target.value);setShapeAttributes({strokeDashArray:[+e.target.value,+e.target.value]});}}),\"\\xA0Stroke Color\\xA0\",/*#__PURE__*/_jsxs(\"div\",{style:swatchStyles.pickerContainer,children:[/*#__PURE__*/_jsx(\"div\",{style:swatchStyles.swatch,onClick:StrokeSwatchClick,children:/*#__PURE__*/_jsx(\"div\",{style:swatchStyles.stroke})}),showStrokePicker?/*#__PURE__*/_jsxs(\"div\",{style:swatchStyles.popover,children:[/*#__PURE__*/_jsx(\"div\",{style:swatchStyles.cover,onClick:StrokeSwatchClose}),/*#__PURE__*/_jsx(SketchPicker,{color:stroke,onChange:StrokeSwatchChange})]}):null]}),\"\\xA0Fill Color\\xA0\",/*#__PURE__*/_jsxs(\"div\",{style:swatchStyles.pickerContainer,children:[/*#__PURE__*/_jsx(\"div\",{style:swatchStyles.swatch,onClick:FillSwatchClick,children:/*#__PURE__*/_jsx(\"div\",{id:\"fillSwatch\",style:swatchStyles.fill})}),showFillPicker?/*#__PURE__*/_jsxs(\"div\",{style:swatchStyles.popover,children:[/*#__PURE__*/_jsx(\"div\",{style:swatchStyles.cover,onClick:FillSwatchClose}),/*#__PURE__*/_jsx(SketchPicker,{color:fill,onChange:FillSwatchChange})]}):null]}),\"\\xA0HighlightText\\xA0\",/*#__PURE__*/_jsxs(\"div\",{style:swatchStyles.pickerContainer,children:[/*#__PURE__*/_jsx(\"div\",{style:swatchStyles.swatch,onClick:HighlightSwatchClick,children:/*#__PURE__*/_jsx(\"div\",{style:swatchStyles.highlight})}),showHighlightPicker?/*#__PURE__*/_jsxs(\"div\",{style:swatchStyles.popover,children:[/*#__PURE__*/_jsx(\"div\",{style:swatchStyles.cover,onClick:HighlightSwatchClose}),/*#__PURE__*/_jsx(SketchPicker,{color:textHighlight,onChange:HighlightSwatchChange})]}):null]}),\"\\xA0\",/*#__PURE__*/_jsx(\"button\",{id:\"noStroke\",onClick:function onClick(e){setStrokeColor({r:0,g:0,b:0,a:0});setShapeAttributes({stroke:\"rgba(0,0,0,0)\"});},children:/*#__PURE__*/_jsxs(\"div\",{className:tbStyles.tooltipDown,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/noStroke2.png\",alt:\"No stroke\"}),/*#__PURE__*/_jsx(\"span\",{className:tbStyles.tooltiptextDown,children:\"Set No Stroke\"})]})}),\"\\xA0\",/*#__PURE__*/_jsx(\"button\",{id:\"noFill\",onClick:function onClick(e){setFillColor({r:0,g:0,b:0,a:0});setShapeAttributes({fill:\"rgba(0,0,0,0)\"});},children:/*#__PURE__*/_jsxs(\"div\",{className:tbStyles.tooltipDown,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/noFill2.png\",alt:\"No fill\"}),/*#__PURE__*/_jsx(\"span\",{className:tbStyles.tooltiptextDown,children:\"Set No Fill\"})]})}),\"\\xA0Opacity\",/*#__PURE__*/_jsx(\"input\",{type:\"range\",id:\"opacityRange\",value:opacity,onChange:function onChange(e){//opacity.current = e.target.value;\nsetOpacity(e.target.value);setShapeAttributes({opacity:e.target.value});}}),\"\\xA0 Angle snap:\",/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"chkSnap\",onChange:function onChange(e){//console.log(e.target.checked);\nsnap.current=e.target.checked;}}),\"\\xA0Font\",/*#__PURE__*/_jsx(\"select\",{name:\"fonts\",id:\"fonts\",onChange:function onChange(e){setFont(e.target.value);setShapeAttributes({fontFamily:e.target.value});}}),\"\\xA0Size\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"fontSize\",value:fontSize,min:\"0\",max:\"100\",onChange:function onChange(e){setFontSize(+e.target.value);setShapeAttributes({fontSize:+e.target.value});}}),\"\\xA0\",/*#__PURE__*/_jsxs(\"label\",{children:[\"FontWeight:\",/*#__PURE__*/_jsxs(\"select\",{value:fontWeight,onChange:function onChange(e){setFontWeight(e.target.value);setShapeAttributes({fontWeight:e.target.value});},children:[/*#__PURE__*/_jsx(\"option\",{value:\"normal\",children:\"Normal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bold\",children:\"Bold\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"FontSyle:\",/*#__PURE__*/_jsxs(\"select\",{value:fontStyle,onChange:function onChange(e){setFontStyle(e.target.value);setShapeAttributes({fontStyle:e.target.value});},children:[/*#__PURE__*/_jsx(\"option\",{value:\"regular\",children:\"Regular\"}),/*#__PURE__*/_jsx(\"option\",{value:\"italic\",children:\"Italic\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{id:\"lMenu\",className:styles.menu,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tableft,children:[/*#__PURE__*/_jsx(\"button\",{onMouseEnter:function onMouseEnter(e){w3_openPanel(e,\"File\");},onClick:function onClick(e){w3_openPanel(e,currentOpenPanel);},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/FileAccess2.png\",alt:\"FileAccess\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextleft,children:\"File Access\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){w3_openPanel(e,currentOpenPanel);},onMouseEnter:function onMouseEnter(e){w3_openPanel(e,\"CanvasSet\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Canvas2.png\",alt:\"Canvas Settings\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextleft,children:\"Canvas Settings\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){w3_openPanel(e,currentOpenPanel);},onMouseEnter:function onMouseEnter(e){w3_openPanel(e,\"LayerSet\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Layers2.png\",alt:\"Layers\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextleft,children:\"Layers\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){w3_openPanel(e,currentOpenPanel);},onMouseEnter:function onMouseEnter(e){w3_openPanel(e,\"Warehouse\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Warehouse2.png\",alt:\"Warehouse\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextleft,children:\"Warehouse\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){w3_openPanel(e,currentOpenPanel);},onMouseEnter:function onMouseEnter(e){w3_openPanel(e,\"Phases\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Phases2.png\",alt:\"Phases\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextleft,children:\"Phases\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){w3_openPanel(e,currentOpenPanel);},onMouseEnter:function onMouseEnter(e){w3_openPanel(e,\"Measures\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Measure2.png\",alt:\"Measurements\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextleft,children:\"Measures\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){w3_openPanel(e,currentOpenPanel);},onMouseEnter:function onMouseEnter(e){w3_openPanel(e,\"Animation\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Animation2.png\",alt:\"Animation\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextleft,children:\"Phase Player\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:styles.tabbar})]})}),/*#__PURE__*/_jsxs(\"div\",{id:\"Library\",className:styles.library,children:[/*#__PURE__*/_jsxs(\"div\",{id:\"File\",className:styles.File,style:{display:\"none\"},children:[\"File Access\",/*#__PURE__*/_jsxs(\"div\",{className:styles.btngroup,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/NewFile2.png\",alt:\"NewFile\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"New File\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/OpenFile2.png\",alt:\"OpenFile\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Open File\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/recentFile2.png\",alt:\"RecentFile\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Recent File\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"CanvasSet\",className:styles.CanvasSet,style:{display:\"none\"},children:[\"Canvas Settings\",/*#__PURE__*/_jsxs(\"div\",{className:styles.btngroup,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/CanvasSize2.png\",alt:\"CanvasSize\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Canvas Size\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/CanvasColor2.png\",alt:\"CanvasColor\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Canvas Color\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/CanvasImage2.png\",alt:\"CanvasImage\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Canvas Image\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"LayerSet\",className:styles.LayerSet,style:{display:\"none\"},children:[\"Layers\",/*#__PURE__*/_jsxs(\"div\",{className:styles.sbtngroup,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/InsertBefore2.png\",alt:\"AddLayerBefore\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Add Layer Before\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/InsertAfter2.png\",alt:\"AddLayerAfter\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Add Layer After\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/Up2.png\",alt:\"LayerUp\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Layer Up\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/Down2.png\",alt:\"LayerDown\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Layer Down\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/Hide2.png\",alt:\"HideLayer\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Hide Layer\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/Lock2.png\",alt:\"LockLayer\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Lock Layer\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/SortAlpha2.png\",alt:\"SortLayer\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Sort layer\"})]})]}),/*#__PURE__*/_jsxs(\"ul\",{className:styles.a,children:[/*#__PURE__*/_jsx(\"li\",{children:\"Shapes\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"Circle\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Rectangle\"})]}),/*#__PURE__*/_jsx(\"li\",{children:\"Texts\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Lines\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"Warehouse\",className:styles.Warehouse,style:{display:\"none\"},children:[\"Warehouse\",/*#__PURE__*/_jsxs(\"div\",{className:styles.btngroup,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/Crane2.png\",alt:\"Crane\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Crane\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/Elevator2.png\",alt:\"Elevator\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Elevator\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/labels2.png\",alt:\"Labels\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Labels\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/CloudTool2.png\",alt:\"Cloud\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Cloud\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/CallOut2.png\",alt:\"Callout\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Callout\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/wedge2.png\",alt:\"Wedge\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Wedge\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/Ring2.png\",alt:\"Ring\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Ring\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/FilledArc2.png\",alt:\"FilledArc\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Filled Arc\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"Phases\",className:styles.Phases,style:{display:\"none\"},children:[\"Phases\",/*#__PURE__*/_jsxs(\"div\",{className:styles.btngroup,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/NewPhase2.png\",alt:\"NewPhase\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"NewPhase\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/StartDate2.png\",alt:\"StartDate\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Start Date\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/EndDate2.png\",alt:\"EndDate\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"End Date\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/DeletePhase2.png\",alt:\"DeletePhase\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Delete Phase \"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"Measures\",className:styles.Measures,style:{display:\"none\"},children:[\"Measurement\",/*#__PURE__*/_jsxs(\"div\",{className:styles.btngroup,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/PageScale2.png\",alt:\"PageScale\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Page Scale\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/setunit2.png\",alt:\"SetUnits\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Set Units\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/Length2.png\",alt:\"Length\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Length\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/Perimeter2.png\",alt:\"Perimeter\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Perimeter\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/Area2.png\",alt:\"Area\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Area\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"Animation\",className:styles.Animation,style:{display:\"none\"},children:[\"Phase Player\",/*#__PURE__*/_jsxs(\"div\",{className:styles.sbtngroup,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:\"Phase1\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Play\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:\"Phase2\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Play\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:\"Phase3\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Play\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.sbtngroup,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"images/Play2.png\",alt:\"Play\"})}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"Play/Stop\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"1\",max:\"100\"}),\"Play Speed\",/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:\"1\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"1 Day/Second\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:\"2\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"2 Day/Second\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:\"5\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"5 Day/Second\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:\"10\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"10 Day/Second\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"button\",{children:\"30\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptextB,children:\"30 Day/Second\"})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.right,ref:rightBar,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tab,children:[/*#__PURE__*/_jsx(\"button\",{id:\"select\",onClick:function onClick(e){canvas.isDrawingMode=false;canvas.selection=true;setCanvasTool(\"select\");setActiveTool(e,\"select\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Select2.png\",alt:\"Select\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptext,children:\"Selection\"})]})}),/*#__PURE__*/_jsx(\"button\",{id:\"text\",onClick:function onClick(e){canvas.isDrawingMode=false;canvas.selection=false;setCanvasTool(\"text\");setActiveTool(e,\"text\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/TextBox2.png\",alt:\"TextBox\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptext,children:\"Text\"})]})}),/*#__PURE__*/_jsx(\"button\",{id:\"pen\",onClick:function onClick(e){setCanvasTool(\"pen\");canvas.isDrawingMode=1;canvas.freeDrawingBrush.color=\"black\";canvas.freeDrawingBrush.width=strokeWidth;setActiveTool(e,\"pen\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/PenTool2.png\",alt:\"Pen\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptext,children:\"Free-hand\"})]})}),/*#__PURE__*/_jsx(\"button\",{id:\"cloud\",onClick:function onClick(e){canvas.isDrawingMode=false;canvas.selection=false;setCanvasTool(\"cloud\");setActiveTool(e,\"cloud\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Cloud2.png\",alt:\"Cloud\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptext,children:\"Cloud\"})]})}),/*#__PURE__*/_jsx(\"button\",{id:\"callout\",onClick:function onClick(e){canvas.isDrawingMode=false;canvas.selection=false;setCanvasTool(\"callout\");setActiveTool(e,\"callout\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/CallOut2.png\",alt:\"Callout\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptext,children:\"Callout\"})]})}),/*#__PURE__*/_jsx(\"button\",{id:\"image\",onClick:function onClick(e){canvas.isDrawingMode=false;canvas.selection=false;setCanvasTool(\"image\");setActiveTool(e,\"image\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Image2.png\",alt:\"Edit\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptext,children:\"Image Edit\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:styles.tabspace}),/*#__PURE__*/_jsx(\"button\",{id:\"line\",onClick:function onClick(e){canvas.isDrawingMode=false;canvas.selection=false;editPoly.current=true;setCanvasTool(\"line\");setActiveTool(e,\"line\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Line2.png\",alt:\"Line\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptext,children:\"Line\"})]})}),/*#__PURE__*/_jsx(\"button\",{id:\"polyline\",onClick:function onClick(e){canvas.isDrawingMode=false;setCanvasTool(\"polyline\");setActiveTool(e,\"polyline\");canvas.selection=false;var objects=canvas.getObjects();for(var i=0;i<objects.length;i++){objects[i].set({selectable:false,evented:false});}},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Polyline2.png\",alt:\"Polyline\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptext,children:\"Polyline\"})]})}),/*#__PURE__*/_jsx(\"button\",{id:\"arrow\",onClick:function onClick(e){canvas.isDrawingMode=false;canvas.selection=false;setCanvasTool(\"arrow\");setActiveTool(e,\"arrow\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Arrow2.png\",alt:\"Arrow\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptext,children:\"Arrow\"})]})}),/*#__PURE__*/_jsx(\"button\",{id:\"arc\",onClick:function onClick(e){canvas.isDrawingMode=false;canvas.selection=false;setCanvasTool(\"arc\");setActiveTool(e,\"arc\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Arc2.png\",alt:\"Arc\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptext,children:\"Arc\"})]})}),/*#__PURE__*/_jsx(\"button\",{id:\"rect\",onClick:function onClick(e){canvas.isDrawingMode=false;canvas.selection=false;canvas.selection=false;canvas.forEachObject(function(o){o.selectable=false;});canvas.renderAll();setCanvasTool(\"rect\");setActiveTool(e,\"rect\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Rectangle2.png\",alt:\"Rectangle\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptext,children:\"Rectangle.current\"})]})}),/*#__PURE__*/_jsx(\"button\",{id:\"polygon\",onClick:function onClick(e){canvas.isDrawingMode=false;canvas.selection=false;setCanvasTool(\"polygon\");setActiveTool(e,\"polygon\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Polygon2.png\",alt:\"Polygon\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptext,children:\"Polygon\"})]})}),/*#__PURE__*/_jsx(\"button\",{id:\"rpolygon\",onClick:function onClick(e){canvas.isDrawingMode=false;canvas.selection=false;setCanvasTool(\"rpolygon\");setActiveTool(e,\"rpolygon\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/RPolygon2.png\",alt:\"Regular Polygon\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptext,children:\"Regular Polygon\"})]})}),/*#__PURE__*/_jsx(\"button\",{id:\"circle\",onClick:function onClick(e){canvas.isDrawingMode=false;canvas.selection=false;setCanvasTool(\"circle\");setActiveTool(e,\"circle\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Circle2.png\",alt:\"Circle\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptext,children:\"Circle\"})]})}),/*#__PURE__*/_jsx(\"button\",{id:\"ellipse\",onClick:function onClick(e){canvas.isDrawingMode=false;canvas.selection=false;setCanvasTool(\"ellipse\");setActiveTool(e,\"ellipse\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Ellipse2.png\",alt:\"Ellipse\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptext,children:\"Ellipse\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:styles.tabspace}),/*#__PURE__*/_jsx(\"button\",{id:\"dimension\",onClick:function onClick(e){canvas.isDrawingMode=false;canvas.selection=false;setCanvasTool(\"dimension\");setActiveTool(e,\"dimension\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Dimension2.png\",alt:\"Dimension\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptext,children:\"Dimension\"})]})}),/*#__PURE__*/_jsx(\"button\",{id:\"area\",onClick:function onClick(e){canvas.isDrawingMode=false;canvas.selection=false;setCanvasTool(\"area\");setActiveTool(e,\"area\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Area2.png\",alt:\"Area\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptext,children:\"Area\"})]})}),/*#__PURE__*/_jsx(\"button\",{id:\"length\",onClick:function onClick(e){canvas.isDrawingMode=false;canvas.selection=false;setCanvasTool(\"length\");setActiveTool(e,\"length\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Length2.png\",alt:\"Length\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptext,children:\"Length\"})]})}),/*#__PURE__*/_jsx(\"button\",{id:\"perimeter\",onClick:function onClick(e){canvas.isDrawingMode=false;canvas.selection=false;setCanvasTool(\"perimeter\");setActiveTool(e,\"perimeter\");},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tooltip,children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/Perimeter2.png\",alt:\"Perimeter\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tooltiptext,children:\"Perimeter\"})]})})]})}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,id:\"my-fabric-canvas\",width:\"1191\",height:\"842\"})]});};export default App;","map":{"version":3,"sources":["c:/Tutorials/elp-app/src/App.js"],"names":["React","useRef","useState","fabric","SketchPicker","reactCSS","styles","tbStyles","initialState","version","objects","type","originX","originY","left","top","width","height","fill","stroke","strokeWidth","strokeDashArray","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","scaleX","scaleY","angle","flipX","flipY","opacity","shadow","visible","clipTo","backgroundColor","fillRule","paintFirst","globalCompositeOperation","transformMatrix","skewX","skewY","rx","ry","name","fontCheck","Set","sort","App","past","setPast","future","setFuture","pageLoad","setPageLoad","canvasRef","mainDiv","rightBar","shapeCount","isDrawing","currentStroke","editPoly","openPoly","polyType","canvas","setCanvas","canvasTool","setCanvasTool","setStrokeWidth","r","g","b","a","setStrokeColor","setFillColor","textHighlight","setHighlight","dashSize","setDashSize","gapSize","setGapSize","setOpacity","font","setFont","fontSize","setFontSize","fontWeight","setFontWeight","fontStyle","setFontStyle","showStrokePicker","setShowStrokePicker","showFillPicker","setShowFillPicker","showHighlightPicker","setShowHighlightPicker","snap","newShape","anchors","pointer","line","origX","origY","arrow","selectedShape","polyPoints","rpolygon","Rectangle","circle","ellipse","polyLines","currentToolId","currentOpenPanel","drawingObject","background","border","StrokeSwatchClick","FillSwatchClick","HighlightSwatchClick","StrokeSwatchClose","FillSwatchClose","HighlightSwatchClose","StrokeSwatchChange","color","rgb","setShapeAttributes","FillSwatchChange","HighlightSwatchChange","textBackgroundColor","calcPolygonPoints","sideCount","radius","sweep","Math","PI","cx","cy","points","i","x","cos","y","sin","push","saveCanvasState","newCanvasState","localStorage","clear","myFabricJSCanvas","JSON","stringify","useEffect","fontAvailable","values","document","fonts","check","add","getElementById","option","createElement","text","Canvas","current","set","fireMiddleClick","stopContextMenu","console","log","data","parse","loadFromJSON","json","toJSON","length","renderAll","isDrawingMode","freeDrawingBrush","selection","defaultCursor","forEachObject","o","selectable","hoverCursor","includes","remove","on","options","target","locked","ceil","abs","e","polyGon","Polygon","maxX","max","minX","min","maxY","minY","xDiff","yDiff","distance","sqrt","polyLine","Polyline","editable","hasControls","hasBorders","str","get","id","split","matrix","calcTransformMatrix","transformedPoints","map","p","Point","pathOffset","util","transformPoint","pFill","pStroke","pName","updatedPoly","sendToBack","forEach","index","anchor","Circle","pname","object","getObjects","getCenterPoint","pPoints","setViewportTransform","viewportTransform","isDragging","button","getPointer","IText","fontFamily","Line","x2","y2","arrowLinePoints","dx","x1","dy","y1","atan2","Triangle","Group","lockMovementX","lockMovementY","startPoint","endPoint","newPolyLine","objectCaching","perPixelTargetFind","Rect","startAngle","endAngle","Ellipse","activeShape","getActiveObject","rgba","substr","Number","isNaN","opt","delta","deltaY","zoom","getZoom","zoomToPoint","offsetX","offsetY","preventDefault","stopPropagation","vpt","getWidth","getHeight","evt","lastPosX","clientX","lastPosY","clientY","requestRenderAll","dispose","onUndo","present","pop","newFuture","previous","onRedo","next","slice","attributes","Attributes","item","setActiveObject","deleteObjects","getActiveObjects","obj","w3_openPanel","panelId","style","display","setActiveTool","handleKeyDown","event","key","ctrlKey","url","swatchStyles","default","borderRadius","blank","highlight","swatch","padding","boxShadow","cursor","backgroundImage","pickerContainer","popover","position","zIndex","cover","right","bottom","propBar","buttontoolbar","tooltipDown","tooltiptextDown","dropdown","dropdowncontent","value","checked","menu","tableft","tooltip","tooltiptextleft","tabbar","library","File","btngroup","tooltiptextB","CanvasSet","LayerSet","sbtngroup","Warehouse","Phases","Measures","Animation","tab","tooltiptext","tabspace","evented"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from \"react\";\nimport { fabric } from \"fabric\";\nimport { SketchPicker } from \"react-color\";\nimport reactCSS from \"reactcss\";\n\nimport \"./styles.css\";\nimport styles from \"./rightMenu.module.css\";\nimport tbStyles from \"./toolbar.module.css\";\n\nconst initialState = {\n  version: \"3.6.3\",\n  objects: [\n    {\n      type: \"rect\",\n      version: \"3.6.3\",\n      originX: \"left\",\n      originY: \"top\",\n      left: 0,\n      top: 0,\n      width: 1,\n      height: 1,\n      fill: \"black\",\n      stroke: null,\n      strokeWidth: 1,\n      strokeDashArray: null,\n      strokeLineCap: \"butt\",\n      strokeDashOffset: 0,\n      strokeLineJoin: \"miter\",\n      strokeMiterLimit: 4,\n      scaleX: 1,\n      scaleY: 1,\n      angle: 0,\n      flipX: false,\n      flipY: false,\n      opacity: 1,\n      shadow: null,\n      visible: false,\n      clipTo: null,\n      backgroundColor: \"\",\n      fillRule: \"nonzero\",\n      paintFirst: \"fill\",\n      globalCompositeOperation: \"source-over\",\n      transformMatrix: null,\n      skewX: 0,\n      skewY: 0,\n      rx: 0,\n      ry: 0,\n      name: \"shape-rect-n\",\n    },\n  ],\n};\n\nconst fontCheck = new Set(\n  [\n    // Windows 10\n    \"Arial\",\n    \"Arial Black\",\n    \"Bahnschrift\",\n    \"Calibri\",\n    \"Cambria\",\n    \"Cambria Math\",\n    \"Candara\",\n    \"Comic Sans MS\",\n    \"Consolas\",\n    \"Constantia\",\n    \"Corbel\",\n    \"Courier New\",\n    \"Ebrima\",\n    \"Franklin Gothic Medium\",\n    \"Gabriola\",\n    \"Gadugi\",\n    \"Georgia\",\n    \"HoloLens MDL2 Assets\",\n    \"Impact\",\n    \"Ink Free\",\n    \"Javanese Text\",\n    \"Leelawadee UI\",\n    \"Lucida Console\",\n    \"Lucida Sans Unicode\",\n    \"Malgun Gothic\",\n    \"Marlett\",\n    \"Microsoft Himalaya\",\n    \"Microsoft JhengHei\",\n    \"Microsoft New Tai Lue\",\n    \"Microsoft PhagsPa\",\n    \"Microsoft Sans Serif\",\n    \"Microsoft Tai Le\",\n    \"Microsoft YaHei\",\n    \"Microsoft Yi Baiti\",\n    \"MingLiU-ExtB\",\n    \"Mongolian Baiti\",\n    \"MS Gothic\",\n    \"MV Boli\",\n    \"Myanmar Text\",\n    \"Nirmala UI\",\n    \"Palatino Linotype\",\n    \"Segoe MDL2 Assets\",\n    \"Segoe Print\",\n    \"Segoe Script\",\n    \"Segoe UI\",\n    \"Segoe UI Historic\",\n    \"Segoe UI Emoji\",\n    \"Segoe UI Symbol\",\n    \"SimSun\",\n    \"Sitka\",\n    \"Sylfaen\",\n    \"Symbol\",\n    \"Tahoma\",\n    \"Times New Roman\",\n    \"Trebuchet MS\",\n    \"Verdana\",\n    \"Webdings\",\n    \"Wingdings\",\n    \"Yu Gothic\",\n    // macOS\n    \"American Typewriter\",\n    \"Andale Mono\",\n    \"Arial\",\n    \"Arial Black\",\n    \"Arial Narrow\",\n    \"Arial Rounded MT Bold\",\n    \"Arial Unicode MS\",\n    \"Avenir\",\n    \"Avenir Next\",\n    \"Avenir Next Condensed\",\n    \"Baskerville\",\n    \"Big Caslon\",\n    \"Bodoni 72\",\n    \"Bodoni 72 Oldstyle\",\n    \"Bodoni 72 Smallcaps\",\n    \"Bradley Hand\",\n    \"Brush Script MT\",\n    \"Chalkboard\",\n    \"Chalkboard SE\",\n    \"Chalkduster\",\n    \"Charter\",\n    \"Cochin\",\n    \"Comic Sans MS\",\n    \"Copperplate\",\n    \"Courier\",\n    \"Courier New\",\n    \"Didot\",\n    \"DIN Alternate\",\n    \"DIN Condensed\",\n    \"Futura\",\n    \"Geneva\",\n    \"Georgia\",\n    \"Gill Sans\",\n    \"Helvetica\",\n    \"Helvetica Neue\",\n    \"Herculanum\",\n    \"Hoefler Text\",\n    \"Impact\",\n    \"Lucida Grande\",\n    \"Luminari\",\n    \"Marker Felt\",\n    \"Menlo\",\n    \"Microsoft Sans Serif\",\n    \"Monaco\",\n    \"Noteworthy\",\n    \"Optima\",\n    \"Palatino\",\n    \"Papyrus\",\n    \"Phosphate\",\n    \"Rockwell\",\n    \"Savoye LET\",\n    \"SignPainter\",\n    \"Skia\",\n    \"Snell Roundhand\",\n    \"Tahoma\",\n    \"Times\",\n    \"Times New Roman\",\n    \"Trattatello\",\n    \"Trebuchet MS\",\n    \"Verdana\",\n    \"Zapfino\",\n  ].sort()\n);\n// Or you can use:\n// const fabric = require(\"fabric\").fabric;\n//const canvas = new fabric.Canvas(\"my-fabric-canvas\");\nconst App = () => {\n  // for undo/redoing\n  const [past, setPast] = useState([initialState]);\n  const [future, setFuture] = useState([initialState]);\n  //const [newAction, setNewAction] = useState(0);\n  const [pageLoad, setPageLoad] = useState(null);\n  const canvasRef = useRef();\n  const mainDiv = useRef(null);\n  const rightBar = useRef();\n  const shapeCount = useRef(0);\n  const isDrawing = useRef(false);\n  const currentStroke = useRef(\"\");\n  const editPoly = useRef(true);\n  const openPoly = useRef(null);\n  const polyType = useRef(\"\");\n  //anchors\n  const [canvas, setCanvas] = useState();\n  //const [canvasHistory, setCanvasHistory] = useState([initialState]);\n  //const [canvasHistory, setCanvasHistory] = useState([]);\n  // const [canvasState, setCanvasState] = useState(initialState);\n  //const [canvasState, setCanvasState] = useState();\n  const [canvasTool, setCanvasTool] = useState(\"select\");\n  const [strokeWidth, setStrokeWidth] = useState(1);\n  // const [stroke, setStrokeColor] = useState(\"black\");\n  const [stroke, setStrokeColor] = useState({\n    r: \"0\",\n    g: \"0\",\n    b: \"0\",\n    a: \"1\",\n  });\n  const [fill, setFillColor] = useState({\n    r: \"0\",\n    g: \"0\",\n    b: \"0\",\n    a: \"0\",\n  });\n  const [textHighlight, setHighlight] = useState({\n    r: \"255\",\n    g: \"255\",\n    b: \"0\",\n    a: \"1\",\n  });\n  // const [fill, setFillColor] = useState(\"black\");\n  const [dashSize, setDashSize] = useState(0);\n  const [gapSize, setGapSize] = useState(0);\n  const [opacity, setOpacity] = useState(100);\n  // const [snap, setSnap] = useState(false);\n  const [font, setFont] = useState(\"\");\n  const [fontSize, setFontSize] = useState(30);\n  const [fontWeight, setFontWeight] = useState(\"normal\");\n  const [fontStyle, setFontStyle] = useState(\"regular\");\n  //const [textHighlight, setHighlight] = useState(\"yellow\");\n\n  const [showStrokePicker, setShowStrokePicker] = useState(false);\n  const [showFillPicker, setShowFillPicker] = useState(false);\n  const [showHighlightPicker, setShowHighlightPicker] = useState(false);\n  //const [shapeCount, setShapeCount] = useState(0);\n\n  //const opacity = useRef(100);\n  const snap = useRef(false);\n  const newShape = useRef(true);\n  const anchors = useRef([]);\n  const pointer = useRef();\n  const line = useRef(null);\n  const origX = useRef();\n  const origY = useRef();\n  const angle = useRef();\n  const arrow = useRef(null);\n  const selectedShape = useRef(null);\n  const polyPoints = useRef([]);\n  const rpolygon = useRef(null);\n  const Rectangle = useRef(null);\n  const circle = useRef(null);\n  const ellipse = useRef(null);\n  const polyLines = useRef([]);\n  const currentToolId = useRef(null);\n\n  var currentOpenPanel = \"none\";\n  var drawingObject = {};\n  drawingObject.type = \"\";\n  drawingObject.background = \"\";\n  drawingObject.border = \"\";\n\n  const StrokeSwatchClick = () => {\n    setShowStrokePicker((showStrokePicker) => !showStrokePicker);\n  };\n  const FillSwatchClick = () => {\n    setShowFillPicker((showFillPicker) => !showFillPicker);\n  };\n  const HighlightSwatchClick = () => {\n    setShowHighlightPicker((showHighlightPicker) => !showHighlightPicker);\n  };\n  const StrokeSwatchClose = () => {\n    setShowStrokePicker(false);\n  };\n  const FillSwatchClose = () => {\n    setShowFillPicker(false);\n  };\n  const HighlightSwatchClose = () => {\n    setShowHighlightPicker(false);\n  };\n  const StrokeSwatchChange = (color) => {\n    //console.log(stroke);\n    setStrokeColor(color.rgb);\n    setShapeAttributes({\n      stroke:\n        \"rgba(\" +\n        color.rgb.r +\n        \", \" +\n        color.rgb.g +\n        \", \" +\n        color.rgb.b +\n        \", \" +\n        color.rgb.a +\n        \")\",\n    });\n  };\n  const FillSwatchChange = (color) => {\n    //console.log(stroke);\n    setFillColor(color.rgb);\n    setShapeAttributes({\n      fill:\n        \"rgba(\" +\n        color.rgb.r +\n        \", \" +\n        color.rgb.g +\n        \", \" +\n        color.rgb.b +\n        \", \" +\n        color.rgb.a +\n        \")\",\n    });\n    //console.log(swatchStyles.fill);\n  };\n  const HighlightSwatchChange = (color) => {\n    //console.log(stroke);\n    setHighlight(color.rgb);\n    setShapeAttributes({\n      textBackgroundColor:\n        \"rgba(\" +\n        color.rgb.r +\n        \", \" +\n        color.rgb.g +\n        \", \" +\n        color.rgb.b +\n        \", \" +\n        color.rgb.a +\n        \")\",\n    });\n  };\n  var calcPolygonPoints = (sideCount, radius) => {\n    var sweep = (Math.PI * 2) / sideCount;\n    var cx = radius;\n    var cy = radius;\n    var points = [];\n\n    for (var i = 0; i < sideCount; i++) {\n      var x = cx + radius * Math.cos(i * sweep);\n      var y = cy + radius * Math.sin(i * sweep);\n      points.push({ x: x, y: y });\n    }\n    return points;\n  };\n  /*\n  function click(id) {\n    var ev = new MouseEvent(\"click\", {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    });\n\n    var el = document.getElementById(id);\n    el.dispatchEvent(ev);\n  }\n  */\n  const saveCanvasState = (newCanvasState) => {\n    past.push(newCanvasState);\n    setPast(past);\n    setFuture([]);\n    localStorage.clear();\n    localStorage.myFabricJSCanvas = JSON.stringify(newCanvasState);\n    //console.log(localStorage.myFabricJSCanvas);\n  };\n  /*\n  const onObjectModified = useCallback(\n    (e) => {\n      const newCanvasState = e.target.canvas.toJSON([\"name\"]);\n      //const newCanvasState = canvas.toJSON([\"name\"]);\n      setCanvasState(newCanvasState);\n      // Limit history depth\n      setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\n      //setPast([...past, newCanvasState]);\n      //setFuture([]);\n      console.log(newCanvasState);\n    },\n    [setCanvasState, setCanvasHistory]\n  );\n*/\n  React.useEffect(() => {\n    const fontAvailable = new Set();\n    for (const font of fontCheck.values()) {\n      if (document.fonts.check(`12px \"${font}\"`)) {\n        fontAvailable.add(font);\n        var x = document.getElementById(\"fonts\");\n        var option = document.createElement(\"option\");\n        option.text = font;\n        x.add(option);\n      }\n    }\n  }, []);\n  // React.useEffect(() => {}, [canvasState]);\n\n  React.useEffect(() => {\n    const canvas = new fabric.Canvas(canvasRef.current);\n    canvas.set({\n      fireMiddleClick: true, // <-- enable firing of middle click events\n      stopContextMenu: true,\n    });\n    //canvas.loadFromJSON(canvasState);\n    //    console.log(past[past.length - 1]);\n    if (pageLoad === null && localStorage.myFabricJSCanvas !== \"undefined\") {\n      setPageLoad(1);\n      console.log(localStorage.myFabricJSCanvas);\n      const data = JSON.parse(localStorage.myFabricJSCanvas);\n      canvas.loadFromJSON(data);\n      var json = canvas.toJSON([\"name\"]);\n      past.push(json);\n      setPast(past);\n      setFuture([]);\n    } else {\n      canvas.loadFromJSON(past[past.length - 1]);\n    }\n    canvas.renderAll();\n    editPoly.current = true;\n    if (canvasTool === \"pen\") {\n      canvas.isDrawingMode = 1;\n      canvas.freeDrawingBrush.color =\n        \"rgba(\" +\n        stroke.r +\n        \", \" +\n        stroke.g +\n        \", \" +\n        stroke.b +\n        \", \" +\n        stroke.a +\n        \")\";\n      canvas.freeDrawingBrush.width = strokeWidth;\n    }\n    if (canvasTool !== \"select\") {\n      canvas.selection = false;\n      canvas.defaultCursor = \"crosshair\";\n      canvas.forEachObject(function (o) {\n        o.selectable = false;\n        o.hoverCursor = \"move\";\n      });\n      if (openPoly.current !== null) {\n        openPoly.current = null;\n        canvas.forEachObject(function (o) {\n          if (o.name.includes(\"anchor\")) {\n            canvas.remove(o);\n          }\n        });\n        anchors.current = [];\n        canvas.renderAll();\n        const newCanvasState = canvas.toJSON([\"name\"]);\n        // setCanvasState(newCanvasState);\n        // Save state to History and Limit history depth to 32\n        // setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\n        saveCanvasState(newCanvasState);\n        localStorage.myFabricJSCanvas = JSON.stringify(newCanvasState);\n      }\n    } else {\n      canvas.selection = true;\n      canvas.forEachObject(function (o) {\n        o.selectable = true;\n      });\n    }\n\n    canvas.on(\"object:rotating\", function (options) {\n      if (!snap.current) return;\n      var angle = options.target.angle;\n      var locked = Math.ceil(options.target.angle / 5) * 5;\n      if (Math.abs(angle - locked) < 10 || Math.abs(locked - angle) < 10) {\n        angle = locked;\n      }\n\n      options.target.set({\n        angle: angle,\n      });\n    });\n    //canvas.on(\"object:added\", onObjectModified);\n    // canvas.on(\"object:modified\", onObjectModified);\n    canvas.on(\"object:modified\", function (e) {\n      const newCanvasState = e.target.canvas.toJSON([\"name\"]);\n      past.push(newCanvasState);\n      setPast(past);\n      // console.log(past);\n      setFuture([]);\n      localStorage.clear();\n      localStorage.myFabricJSCanvas = JSON.stringify(newCanvasState);\n    });\n\n    canvas.on(\"mouse:dblclick\", function (e) {\n      if (canvasTool === \"polygon\") {\n        canvas.remove(line.current);\n        for (var i = 0; i < polyLines.current.length; i++) {\n          canvas.remove(polyLines.current[i]);\n        }\n        newShape.current = true;\n        isDrawing.current = false;\n        var polyGon = null;\n        polyGon = new fabric.Polygon(polyPoints.current, {\n          stroke:\n            \"rgba(\" +\n            stroke.r +\n            \", \" +\n            stroke.g +\n            \", \" +\n            stroke.b +\n            \", \" +\n            stroke.a +\n            \")\",\n          fill:\n            \"rgba(\" +\n            fill.r +\n            \", \" +\n            fill.g +\n            \", \" +\n            fill.b +\n            \", \" +\n            fill.a +\n            \")\",\n          strokeWidth: strokeWidth,\n          selectable: false,\n          hoverCursor: \"default\",\n          name: \"shape-polygon-\" + shapeCount.current,\n        });\n        canvas.add(polyGon);\n        editPoly.current = true;\n        canvas.renderAll();\n        shapeCount.current++;\n        const newCanvasState = canvas.toJSON([\"name\"]);\n        // setCanvasState(newCanvasState);\n        // Save state to History and Limit history depth to 32\n        // setCanvasHistory ((history) => [...history, newCanvasState].slice(-32));\n        saveCanvasState(newCanvasState);\n      }\n\n      if (canvasTool === \"polyline\") {\n        canvas.remove(line.current);\n        for (i = 0; i < polyLines.current.length; i++) {\n          canvas.remove(polyLines.current[i]);\n        }\n        newShape.current = true;\n        isDrawing.current = false;\n        var maxX = Math.max(\n          polyPoints.current[0].x,\n          polyPoints.current[polyPoints.current.length - 1].x\n        );\n        var minX = Math.min(\n          polyPoints.current[0].x,\n          polyPoints.current[polyPoints.current.length - 1].x\n        );\n        var maxY = Math.max(\n          polyPoints.current[0].y,\n          polyPoints.current[polyPoints.current.length - 1].y\n        );\n        var minY = Math.min(\n          polyPoints.current[0].y,\n          polyPoints.current[polyPoints.current.length - 1].y\n        );\n        var xDiff = maxX - minX;\n        var yDiff = maxY - minY;\n        var distance = Math.sqrt(xDiff * xDiff + yDiff * yDiff);\n        //console.log(distance);\n        var polyLine = null;\n        if (distance <= 10) {\n          polyLine = new fabric.Polyline(polyPoints.current, {\n            stroke:\n              \"rgba(\" +\n              stroke.r +\n              \", \" +\n              stroke.g +\n              \", \" +\n              stroke.b +\n              \", \" +\n              stroke.a +\n              \")\",\n            fill:\n              \"rgba(\" +\n              fill.r +\n              \", \" +\n              fill.g +\n              \", \" +\n              fill.b +\n              \", \" +\n              fill.a +\n              \")\",\n            strokeWidth: strokeWidth,\n            selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-polyline-\" + shapeCount.current,\n          });\n        } else {\n          polyLine = new fabric.Polyline(polyPoints.current, {\n            stroke:\n              \"rgba(\" +\n              stroke.r +\n              \", \" +\n              stroke.g +\n              \", \" +\n              stroke.b +\n              \", \" +\n              stroke.a +\n              \")\",\n            fill: \"\",\n            strokeWidth: strokeWidth,\n            selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-polyline-\" + shapeCount.current,\n          });\n        }\n        canvas.add(polyLine);\n        editPoly.current = true;\n        canvas.renderAll();\n        shapeCount.current++;\n        const newCanvasState = canvas.toJSON([\"name\"]);\n        // setCanvasState(newCanvasState);\n        // Save state to History and Limit history depth to 32\n        //  setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\n        saveCanvasState(newCanvasState);\n      }\n      if (canvasTool === \"select\") {\n        if (e.target.type === \"polyline\" && editPoly.current) {\n          canvas.forEachObject(function (o) {\n            if (o.name.includes(\"anchor\")) {\n              canvas.remove(o);\n            }\n          });\n          anchors.current = [];\n          polyType.current = \"polyline\";\n          // polyPoints = [];\n          var editable = e.target;\n          openPoly.current = editable; //for future hiding the anchor points.\n          editable.set({\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\",\n          });\n          editPoly.current = false;\n          // console.log(editable.get(\"points\"));\n          var str = editable.get(\"name\");\n          var id = str.split(\"-\");\n          var matrix = editable.calcTransformMatrix();\n          var transformedPoints = editable\n            .get(\"points\")\n            .map(function (p) {\n              return new fabric.Point(\n                p.x - editable.pathOffset.x,\n                p.y - editable.pathOffset.y\n              );\n            })\n            .map(function (p) {\n              return fabric.util.transformPoint(p, matrix);\n            });\n          var pFill = editable.get(\"fill\");\n          var pStroke = editable.get(\"stroke\");\n          var pName = editable.get(\"name\");\n          canvas.remove(editable);\n          var updatedPoly = new fabric.Polyline(transformedPoints, {\n            fill: pFill,\n            stroke: pStroke,\n            name: pName,\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\",\n          });\n          canvas.add(updatedPoly);\n          canvas.sendToBack(updatedPoly);\n          anchors.current = [];\n          transformedPoints.forEach(function (p, index) {\n            var anchor = new fabric.Circle({\n              left: p.x,\n              top: p.y,\n              radius: 15,\n              fill: \"green\",\n              originX: \"center\",\n              originY: \"center\",\n              hasControls: false,\n              hasBorders: false,\n              name: \"anchor-\" + id[2] + \"-\" + index,\n            });\n            canvas.add(anchor);\n            anchors.current.push(anchor);\n          });\n          canvas.renderAll();\n          return;\n        }\n        if (e.target.type === \"polyline\" && !editPoly.current) {\n          polyType.current = \"\";\n          editable = e.target;\n          editable.set({\n            hasControls: true,\n            hasBorders: true,\n            selectable: true,\n            hoverCursor: \"move\",\n          });\n          editPoly.current = true;\n          anchors.current.forEach(function (anchor) {\n            canvas.remove(anchor);\n          });\n          anchors.current = [];\n          openPoly.current = null;\n          canvas.renderAll();\n          return;\n        }\n        if (e.target.type === \"polygon\" && editPoly.current) {\n          if (e.target.name.includes(\"rpolygon\")) return;\n          canvas.forEachObject(function (o) {\n            if (o.name.includes(\"anchor\")) {\n              canvas.remove(o);\n            }\n          });\n          anchors.current = [];\n          polyType.current = \"polygon\";\n          // polyPoints = [];\n          editable = e.target;\n          openPoly.current = editable; //for future hiding the anchor points.\n          editable.set({\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\",\n          });\n          editPoly.current = false;\n          // console.log(editable.get(\"points\"));\n          str = editable.get(\"name\");\n          id = str.split(\"-\");\n          matrix = editable.calcTransformMatrix();\n          transformedPoints = editable\n            .get(\"points\")\n            .map(function (p) {\n              return new fabric.Point(\n                p.x - editable.pathOffset.x,\n                p.y - editable.pathOffset.y\n              );\n            })\n            .map(function (p) {\n              return fabric.util.transformPoint(p, matrix);\n            });\n          pFill = editable.get(\"fill\");\n          pStroke = editable.get(\"stroke\");\n          pName = editable.get(\"name\");\n          canvas.remove(editable);\n          updatedPoly = new fabric.Polygon(transformedPoints, {\n            fill: pFill,\n            stroke: pStroke,\n            name: pName,\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\",\n          });\n          canvas.add(updatedPoly);\n          canvas.sendToBack(updatedPoly);\n          anchors.current = [];\n          transformedPoints.forEach(function (p, index) {\n            var anchor = new fabric.Circle({\n              left: p.x,\n              top: p.y,\n              radius: 15,\n              fill: \"green\",\n              originX: \"center\",\n              originY: \"center\",\n              hasControls: false,\n              hasBorders: false,\n              name: \"anchor-\" + id[2] + \"-\" + index,\n            });\n            canvas.add(anchor);\n            anchors.current.push(anchor);\n          });\n          canvas.renderAll();\n          return;\n        }\n        if (e.target.type === \"polygon\" && !editPoly.current) {\n          if (e.target.name.includes(\"rpolygon\")) return;\n          polyType.current = \"\";\n          editable = e.target;\n          editable.set({\n            hasControls: true,\n            hasBorders: true,\n            selectable: true,\n            hoverCursor: \"move\",\n          });\n          editPoly.current = true;\n          anchors.current.forEach(function (anchor) {\n            canvas.remove(anchor);\n          });\n          anchors.current = [];\n          canvas.renderAll();\n          return;\n        }\n      }\n    });\n\n    canvas.on(\"object:moving\", function (options) {\n      if (options.target.type !== \"circle\") {\n        if (openPoly.current !== null) {\n          openPoly.current = null;\n          editPoly.current = true;\n          anchors.current.forEach(function (anchor) {\n            canvas.remove(anchor);\n          });\n          anchors.current = [];\n          canvas.renderAll();\n          return;\n        }\n      }\n      if (options.target.type === \"circle\") {\n        var p = options.target;\n        //console.log(p.get(\"name\"));\n        if (p.name.includes(\"circle\")) return;\n        if (p.name.includes(\"arc\")) return;\n        var str = p.name.split(\"-\");\n        if (polyType.current === \"polyline\") {\n          var pname = \"shape-polyline-\" + str[1];\n        }\n        if (polyType.current === \"polygon\") {\n          pname = \"shape-polygon-\" + str[1];\n        }\n\n        //console.log(pname);\n        var object = null;\n        var objects = canvas.getObjects();\n        for (var i = 0; i < objects.length; i++) {\n          if (objects[i].name && objects[i].name === pname) {\n            object = objects[i];\n            break;\n          }\n        }\n        // console.log(object);\n        object.points[str[2]] = {\n          x: p.getCenterPoint().x,\n          y: p.getCenterPoint().y,\n        };\n\n        //console.log(p.getCenterPoint());\n        var pFill = object.get(\"fill\");\n        var pStroke = object.get(\"stroke\");\n        var pName = object.get(\"name\");\n        var pPoints = object.get(\"points\");\n        //UNCOMMENT LINES 39 - 42 TO HAVE A WORKAROUND\n        canvas.remove(object);\n        if (polyType.current === \"polyline\") {\n          var updatedPoly = new fabric.Polyline(pPoints, {\n            fill: pFill,\n            stroke: pStroke,\n            name: pName,\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\",\n          });\n        }\n        if (polyType.current === \"polygon\") {\n          updatedPoly = new fabric.Polygon(pPoints, {\n            fill: pFill,\n            stroke: pStroke,\n            name: pName,\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\",\n          });\n        }\n        canvas.add(updatedPoly);\n        canvas.sendToBack(updatedPoly);\n        canvas.renderAll();\n      }\n    });\n\n    canvas.on(\"mouse:up\", function (e) {\n      this.setViewportTransform(this.viewportTransform);\n      this.isDragging = false;\n      if (e.button === 2) return;\n      // this.selection = true;\n      if (canvas.isDrawingMode) {\n        canvas.renderAll();\n        //canvas.selection = true;\n        const newCanvasState = canvas.toJSON([\"name\"]);\n        // setCanvasState(newCanvasState);\n        // Save state to History and Limit history depth to 32\n        // setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\n        saveCanvasState(newCanvasState);\n        // }\n      }\n\n      if (canvasTool === \"text\") {\n        pointer.current = canvas.getPointer(e);\n        var text = new fabric.IText(\"Click to edit\", {\n          left: pointer.current.x,\n          top: pointer.current.y,\n          fontFamily: \"Arial\",\n          fontSize: \"30\",\n          // fontWeight: \"regular\",\n          //stroke: stroke,\n          // strokeWidth: strokeWidth,\n          selectable: false,\n          hoverCursor: \"default\",\n          name: \"shape-text-\" + shapeCount.current,\n        });\n        //console.log(text);\n        canvas.add(text);\n        canvas.renderAll();\n        shapeCount.current = shapeCount.current + 1;\n        // Save the canvas to State variable\n        const newCanvasState = canvas.toJSON([\"name\"]);\n        /// setCanvasState(newCanvasState);\n        // Save state to History and Limit history depth to 32\n        // setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\n        saveCanvasState(newCanvasState);\n      }\n      if (canvasTool === \"line\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          var points = [\n            pointer.current.x,\n            pointer.current.y,\n            pointer.current.x,\n            pointer.current.y,\n          ];\n          line.current = new fabric.Line(points, {\n            strokeWidth: strokeWidth,\n            stroke:\n              \"rgba(\" +\n              stroke.r +\n              \", \" +\n              stroke.g +\n              \", \" +\n              stroke.b +\n              \", \" +\n              stroke.a +\n              \")\",\n            originX: \"center\",\n            originY: \"center\",\n            selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-line-\" + shapeCount.current,\n          });\n          canvas.add(line.current);\n          shapeCount.current = shapeCount.current + 1;\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          line.current.set({ x2: pointer.current.x, y2: pointer.current.y });\n          canvas.renderAll();\n          newShape.current = true;\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          // setCanvasState(newCanvasState);\n          // Save state to History and Limit history depth to 32\n          // setCanvasHistory((history) =>\n          //    [...history, newCanvasState].slice(-32)\n          // );\n          saveCanvasState(newCanvasState);\n        }\n      }\n      if (canvasTool === \"arrow\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          let arrowLinePoints = [\n            pointer.current.x,\n            pointer.current.y,\n            pointer.current.x,\n            pointer.current.y,\n          ];\n          line.current = new fabric.Line(arrowLinePoints, {\n            stroke:\n              \"rgba(\" +\n              stroke.r +\n              \", \" +\n              stroke.g +\n              \", \" +\n              stroke.b +\n              \", \" +\n              stroke.a +\n              \")\",\n            strokeWidth: strokeWidth,\n          });\n          // reference points for arrowhead\n          origX.current = line.current.x2;\n          origY.current = line.current.y2;\n          let dx = line.current.x2 - line.current.x1,\n            dy = line.current.y2 - line.current.y1;\n          /* calculate angle.current of arrow.current */\n          angle.current = Math.atan2(dy, dx);\n          angle.current *= 180 / Math.PI;\n          angle.current += 90;\n\n          arrow.current = new fabric.Triangle({\n            angle: angle.current,\n            fill:\n              \"rgba(\" +\n              fill.r +\n              \", \" +\n              fill.g +\n              \", \" +\n              fill.b +\n              \", \" +\n              fill.a +\n              \")\",\n            top: line.current.y2,\n            left: line.current.x2,\n            width: 15,\n            height: 15,\n            originX: \"center\",\n            originY: \"center\",\n            stroke:\n              \"rgba(\" +\n              stroke.r +\n              \", \" +\n              stroke.g +\n              \", \" +\n              stroke.b +\n              \", \" +\n              stroke.a +\n              \")\",\n            strokeWidth: strokeWidth,\n          });\n          canvas.add(line.current);\n          canvas.add(arrow.current);\n          canvas.renderAll();\n          newShape.current = false;\n        } else {\n          canvas.remove(line.current);\n          canvas.remove(arrow.current);\n          selectedShape.current = new fabric.Group(\n            [line.current, arrow.current],\n            {\n              hasBorders: true,\n              hasControls: true,\n              selectable: false,\n              hoverCursor: \"default\",\n            }\n          );\n          shapeCount.current = shapeCount.current + 1;\n          selectedShape.current.set(\n            \"name\",\n            \"shape-arrow-\" + shapeCount.current + 1\n          );\n          canvas.add(selectedShape.current);\n          newShape.current = true;\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          // setCanvasState(newCanvasState);\n          // Save state to History and Limit history depth to 32\n          //  setCanvasHistory((history) =>\n          //   [...history, newCanvasState].slice(-32)\n          //  );\n          saveCanvasState(newCanvasState);\n        }\n      }\n      if (canvasTool === \"polyline\") {\n        if (newShape.current) {\n          polyPoints.current = [];\n          isDrawing.current = true;\n          pointer.current = canvas.getPointer(e);\n          polyPoints.current.push(pointer.current);\n          line.current = new fabric.Line(\n            [\n              pointer.current.x,\n              pointer.current.y,\n              pointer.current.x,\n              pointer.current.y,\n            ],\n            {\n              stroke:\n                \"rgba(\" +\n                stroke.r +\n                \", \" +\n                stroke.g +\n                \", \" +\n                stroke.b +\n                \", \" +\n                stroke.a +\n                \")\",\n              strokeWidth: strokeWidth,\n              hasControls: false,\n              hasBorders: false,\n              selectable: false,\n              lockMovementX: true,\n              lockMovementY: true,\n              hoverCursor: \"default\",\n              originX: \"center\",\n              originY: \"center\",\n            }\n          );\n          canvas.add(line.current);\n          //polyLines.current.push(polyline);\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          line.current.set({ x1: pointer.current.x, y1: pointer.current.y });\n          polyPoints.current.push(pointer.current);\n          if (polyPoints.current.length > 1) {\n            var startPoint = polyPoints.current[polyPoints.current.length - 2];\n            var endPoint = polyPoints.current[polyPoints.current.length - 1];\n            var newPolyLine = new fabric.Line(\n              [startPoint.x, startPoint.y, endPoint.x, endPoint.y],\n              {\n                stroke:\n                  \"rgba(\" +\n                  stroke.r +\n                  \", \" +\n                  stroke.g +\n                  \", \" +\n                  stroke.b +\n                  \", \" +\n                  stroke.a +\n                  \")\",\n                strokeWidth: strokeWidth,\n                hasControls: false,\n                hasBorders: false,\n                selectable: false,\n                lockMovementX: true,\n                lockMovementY: true,\n                hoverCursor: \"default\",\n                originX: \"center\",\n                originY: \"center\",\n              }\n            );\n            canvas.add(newPolyLine);\n            polyLines.current.push(newPolyLine);\n            canvas.renderAll();\n          }\n        }\n      }\n      if (canvasTool === \"polygon\") {\n        if (newShape.current) {\n          polyPoints.current = [];\n          isDrawing.current = true;\n          pointer.current = canvas.getPointer(e);\n          polyPoints.current.push(pointer.current);\n          line.current = new fabric.Line(\n            [\n              pointer.current.x,\n              pointer.current.y,\n              pointer.current.x,\n              pointer.current.y,\n            ],\n            {\n              stroke:\n                \"rgba(\" +\n                stroke.r +\n                \", \" +\n                stroke.g +\n                \", \" +\n                stroke.b +\n                \", \" +\n                stroke.a +\n                \")\",\n              strokeWidth: strokeWidth,\n              hasControls: false,\n              hasBorders: false,\n              selectable: false,\n              lockMovementX: true,\n              lockMovementY: true,\n              hoverCursor: \"default\",\n              originX: \"center\",\n              originY: \"center\",\n            }\n          );\n          canvas.add(line.current);\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          line.current.set({ x1: pointer.current.x, y1: pointer.current.y });\n          polyPoints.current.push(pointer.current);\n          if (polyPoints.current.length > 1) {\n            startPoint = polyPoints.current[polyPoints.current.length - 2];\n            endPoint = polyPoints.current[polyPoints.current.length - 1];\n            newPolyLine = new fabric.Line(\n              [startPoint.x, startPoint.y, endPoint.x, endPoint.y],\n              {\n                stroke:\n                  \"rgba(\" +\n                  stroke.r +\n                  \", \" +\n                  stroke.g +\n                  \", \" +\n                  stroke.b +\n                  \", \" +\n                  stroke.a +\n                  \")\",\n                strokeWidth: strokeWidth,\n                hasControls: false,\n                hasBorders: false,\n                selectable: false,\n                lockMovementX: true,\n                lockMovementY: true,\n                hoverCursor: \"default\",\n                originX: \"center\",\n                originY: \"center\",\n              }\n            );\n            canvas.add(newPolyLine);\n            polyLines.current.push(newPolyLine);\n            canvas.renderAll();\n          }\n        }\n      }\n      if (canvasTool === \"rpolygon\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          rpolygon.current = new fabric.Polygon(\n            calcPolygonPoints(\n              8,\n              Math.abs(origX.current - pointer.current.x) / 2\n            ),\n            {\n              objectCaching: false,\n              left: origX.current,\n              top: origY.current,\n              originX: \"center\",\n              originY: \"center\",\n              fill:\n                \"rgba(\" +\n                fill.r +\n                \", \" +\n                fill.g +\n                \", \" +\n                fill.b +\n                \", \" +\n                fill.a +\n                \")\",\n              perPixelTargetFind: false,\n              strokeWidth: strokeWidth,\n              stroke:\n                \"rgba(\" +\n                stroke.r +\n                \", \" +\n                stroke.g +\n                \", \" +\n                stroke.b +\n                \", \" +\n                stroke.a +\n                \")\",\n              hasControls: false,\n              hasBorders: false,\n              name: \"shape-rpolygon-\" + shapeCount.current,\n            }\n          );\n          canvas.add(rpolygon.current);\n          newShape.current = false;\n          shapeCount.current++;\n        } else {\n          newShape.current = true;\n          var matrix = rpolygon.current.calcTransformMatrix();\n          var transformedPoints = rpolygon.current\n            .get(\"points\")\n            .map(function (p) {\n              return new fabric.Point(\n                p.x - rpolygon.current.pathOffset.x,\n                p.y - rpolygon.current.pathOffset.y\n              );\n            })\n            .map(function (p) {\n              return fabric.util.transformPoint(p, matrix);\n            });\n          canvas.remove(rpolygon.current);\n          var updatedPoly = new fabric.Polygon(transformedPoints, {\n            fill:\n              \"rgba(\" +\n              fill.r +\n              \", \" +\n              fill.g +\n              \", \" +\n              fill.b +\n              \", \" +\n              fill.a +\n              \")\",\n            stroke:\n              \"rgba(\" +\n              stroke.r +\n              \", \" +\n              stroke.g +\n              \", \" +\n              stroke.b +\n              \", \" +\n              stroke.a +\n              \")\",\n            name: \"shape-rpolygon-\" + shapeCount.current,\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\",\n          });\n          canvas.add(updatedPoly);\n          canvas.renderAll();\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          // setCanvasState(newCanvasState);\n          // Save state to History and Limit history depth to 32\n          //  setCanvasHistory((history) =>\n          //   [...history, newCanvasState].slice(-32)\n          // );\n          saveCanvasState(newCanvasState);\n        }\n      }\n      if (canvasTool === \"rect\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          Rectangle.current = new fabric.Rect({\n            left: origX.current,\n            top: origY.current,\n            fill:\n              \"rgba(\" +\n              fill.r +\n              \", \" +\n              fill.g +\n              \", \" +\n              fill.b +\n              \", \" +\n              fill.a +\n              \")\",\n            stroke:\n              \"rgba(\" +\n              stroke.r +\n              \", \" +\n              stroke.g +\n              \", \" +\n              stroke.b +\n              \", \" +\n              stroke.a +\n              \")\",\n            strokeWidth: strokeWidth,\n            strokeDashArray: [dashSize, gapSize],\n            opacity: opacity,\n            selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-rect-\" + shapeCount.current,\n          });\n          shapeCount.current++;\n          canvas.add(Rectangle.current);\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          if (origX.current > pointer.current.x) {\n            Rectangle.current.set({ left: Math.abs(pointer.current.x) });\n          }\n          if (origY.current > pointer.current.y) {\n            Rectangle.current.set({ top: Math.abs(pointer.current.y) });\n          }\n          Rectangle.current.set({\n            width: Math.abs(origX.current - pointer.current.x),\n          });\n          Rectangle.current.set({\n            height: Math.abs(origY.current - pointer.current.y),\n          });\n          newShape.current = true;\n          canvas.renderAll();\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          // setCanvasState(newCanvasState);\n          // Save state to History and Limit history depth to 32\n          // setCanvasHistory((history) =>\n          //    [...history, newCanvasState].slice(-32)\n          //  );\n          saveCanvasState(newCanvasState);\n        }\n      }\n      if (canvasTool === \"arc\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          circle.current = new fabric.Circle({\n            left: origX.current,\n            top: origY.current,\n            originX: \"left\",\n            originY: \"top\",\n            radius: pointer.current.x - origX.current,\n            angle: 45,\n            startAngle: 0,\n            endAngle: Math.PI,\n            fill:\n              \"rgba(\" +\n              fill.r +\n              \", \" +\n              fill.g +\n              \", \" +\n              fill.b +\n              \", \" +\n              fill.a +\n              \")\",\n            stroke:\n              \"rgba(\" +\n              stroke.r +\n              \", \" +\n              stroke.g +\n              \", \" +\n              stroke.b +\n              \", \" +\n              stroke.a +\n              \")\",\n            strokeWidth: strokeWidth,\n            selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-arc-\" + shapeCount.current,\n          });\n          canvas.add(circle.current);\n          newShape.current = false;\n          shapeCount.current++;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          var radius =\n            Math.max(\n              Math.abs(origY.current - pointer.current.y),\n              Math.abs(origX.current - pointer.current.x)\n            ) / 2;\n          if (radius > circle.current.strokeWidth) {\n            radius -= circle.current.strokeWidth / 2;\n          }\n          circle.current.set({ radius: radius });\n\n          if (origX.current > pointer.current.x) {\n            circle.current.set({ originX: \"right\" });\n          } else {\n            circle.current.set({ originX: \"left\" });\n          }\n          if (origY.current > pointer.current.y) {\n            circle.current.set({ originY: \"bottom\" });\n          } else {\n            circle.current.set({ originY: \"top\" });\n          }\n          newShape.current = true;\n          canvas.renderAll();\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          // setCanvasState(newCanvasState);\n          // Save state to History and Limit history depth to 32\n          ///  setCanvasHistory((history) =>\n          //    [...history, newCanvasState].slice(-32)\n          // );\n          saveCanvasState(newCanvasState);\n        }\n      }\n      if (canvasTool === \"circle\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          circle.current = new fabric.Circle({\n            left: origX.current,\n            top: origY.current,\n            originX: \"left\",\n            originY: \"top\",\n            radius: pointer.current.x - origX.current,\n            angle: 0,\n            fill:\n              \"rgba(\" +\n              fill.r +\n              \", \" +\n              fill.g +\n              \", \" +\n              fill.b +\n              \", \" +\n              fill.a +\n              \")\",\n            stroke:\n              \"rgba(\" +\n              stroke.r +\n              \", \" +\n              stroke.g +\n              \", \" +\n              stroke.b +\n              \", \" +\n              stroke.a +\n              \")\",\n            strokeWidth: strokeWidth,\n            selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-circle-\" + shapeCount.current,\n          });\n          canvas.add(circle.current);\n          newShape.current = false;\n          shapeCount.current++;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          radius =\n            Math.max(\n              Math.abs(origY.current - pointer.current.y),\n              Math.abs(origX.current - pointer.current.x)\n            ) / 2;\n          if (radius > circle.current.strokeWidth) {\n            radius -= circle.current.strokeWidth / 2;\n          }\n          circle.current.set({ radius: radius });\n\n          if (origX.current > pointer.current.x) {\n            circle.current.set({ originX: \"right\" });\n          } else {\n            circle.current.set({ originX: \"left\" });\n          }\n          if (origY.current > pointer.current.y) {\n            circle.current.set({ originY: \"bottom\" });\n          } else {\n            circle.current.set({ originY: \"top\" });\n          }\n          newShape.current = true;\n          canvas.renderAll();\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          // setCanvasState(newCanvasState);\n          // Save state to History and Limit history depth to 32\n          //  setCanvasHistory((history) =>\n          //    [...history, newCanvasState].slice(-32)\n          //  );\n          saveCanvasState(newCanvasState);\n        }\n      }\n      if (canvasTool === \"ellipse\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          ellipse.current = new fabric.Ellipse({\n            left: origX.current,\n            top: origY.current,\n            originX: \"left\",\n            originY: \"top\",\n            rx: pointer.current.x - origX.current,\n            ry: pointer.current.y - origY.current,\n            angle: 0,\n            fill:\n              \"rgba(\" +\n              fill.r +\n              \", \" +\n              fill.g +\n              \", \" +\n              fill.b +\n              \", \" +\n              fill.a +\n              \")\",\n            stroke:\n              \"rgba(\" +\n              stroke.r +\n              \", \" +\n              stroke.g +\n              \", \" +\n              stroke.b +\n              \", \" +\n              stroke.a +\n              \")\",\n            strokeWidth: strokeWidth,\n            type: \"ellipse\",\n            selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-ellipse-\" + shapeCount.current,\n          });\n          canvas.add(ellipse.current);\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          var rx = Math.abs(origX.current - pointer.current.x) / 2;\n          var ry = Math.abs(origY.current - pointer.current.y) / 2;\n          if (rx > ellipse.current.strokeWidth) {\n            rx -= ellipse.current.strokeWidth / 2;\n          }\n          if (ry > ellipse.current.strokeWidth) {\n            ry -= ellipse.current.strokeWidth / 2;\n          }\n          ellipse.current.set({ rx: rx, ry: ry });\n\n          if (origX.current > pointer.current.x) {\n            ellipse.current.set({ originX: \"right\" });\n          } else {\n            ellipse.current.set({ originX: \"left\" });\n          }\n          if (origY.current > pointer.current.y) {\n            ellipse.current.set({ originY: \"bottom\" });\n          } else {\n            ellipse.current.set({ originY: \"top\" });\n          }\n          newShape.current = true;\n          canvas.renderAll();\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          // setCanvasState(newCanvasState);\n          // Save state to History and Limit history depth to 32\n          //  setCanvasHistory((history) =>\n          //    [...history, newCanvasState].slice(-32)\n          //  );\n          saveCanvasState(newCanvasState);\n        }\n      }\n      //check if user clicked an object\n      if (e.target) {\n        if (!editPoly.current) return;\n        var activeShape = canvas.getActiveObject();\n        if (activeShape.length > 1) return;\n        // console.log(activeShape.type);\n        if (activeShape) {\n          if (activeShape.stroke && activeShape.type !== \"i-text\") {\n            if (currentStroke.current !== null) {\n              var rgba = currentStroke.current\n                .substr(5)\n                .split(\")\")[0]\n                .split(\",\");\n              setStrokeColor({\n                r: rgba[0],\n                g: rgba[1],\n                b: rgba[2],\n                a: rgba[3],\n              });\n            }\n            setStrokeWidth(activeShape.strokeWidth);\n          }\n          if (activeShape.fill) {\n            rgba = activeShape.fill.substr(5).split(\")\")[0].split(\",\");\n            setFillColor({ r: rgba[0], g: rgba[1], b: rgba[2], a: rgba[3] });\n          }\n          //console.log(activeShape.opacity);\n          if (Number.isNaN(activeShape.opacity)) setOpacity(100);\n          else setOpacity(activeShape.opacity * 100);\n          //setOpacity(activeShape.opacity * 100);\n          //setFont(activeShape.fontFamily);\n          ///setFontSize(activeShape.fontSize);\n          //setFontWeight(activeShape.fontWeight);\n          //setFontStyle(activeShape.fontStyle);\n        }\n      }\n    });\n\n    canvas.on(\"mouse:wheel\", function (opt) {\n      var delta = opt.e.deltaY;\n      var zoom = canvas.getZoom();\n      zoom *= 0.999 ** delta;\n      if (zoom > 20) zoom = 20;\n      if (zoom < 0.01) zoom = 0.01;\n      canvas.zoomToPoint({ x: opt.e.offsetX, y: opt.e.offsetY }, zoom);\n      opt.e.preventDefault();\n      opt.e.stopPropagation();\n      var vpt = this.viewportTransform;\n      if (zoom < 400 / 1000) {\n        vpt[4] = 200 - (1000 * zoom) / 2;\n        vpt[5] = 200 - (1000 * zoom) / 2;\n      } else {\n        if (vpt[4] >= 0) {\n          vpt[4] = 0;\n        } else if (vpt[4] < canvas.getWidth() - 1000 * zoom) {\n          vpt[4] = canvas.getWidth() - 1000 * zoom;\n        }\n        if (vpt[5] >= 0) {\n          vpt[5] = 0;\n        } else if (vpt[5] < canvas.getHeight() - 1000 * zoom) {\n          vpt[5] = canvas.getHeight() - 1000 * zoom;\n        }\n      }\n    });\n    canvas.on(\"mouse:down\", function (opt) {\n      if (canvasTool !== \"select\") {\n        this.selection = false;\n      }\n      var evt = opt.e;\n      if (opt.button === 2) {\n        this.isDragging = true;\n        this.selection = false;\n        this.lastPosX = evt.clientX;\n        this.lastPosY = evt.clientY;\n      }\n    });\n    canvas.on(\"mouse:move\", function (opt) {\n      if (this.isDragging) {\n        var e = opt.e;\n        var vpt = this.viewportTransform;\n        vpt[4] += e.clientX - this.lastPosX;\n        vpt[5] += e.clientY - this.lastPosY;\n        this.requestRenderAll();\n        this.lastPosX = e.clientX;\n        this.lastPosY = e.clientY;\n      }\n      if (newShape.current === true && canvasTool !== \"pen\") {\n        return;\n      }\n      if (canvasTool === \"rect\") {\n        pointer.current = canvas.getPointer(opt);\n        if (origX.current > pointer.current.x) {\n          Rectangle.current.set({ left: Math.abs(pointer.current.x) });\n        }\n        if (origY.current > pointer.current.y) {\n          Rectangle.current.set({ top: Math.abs(pointer.current.y) });\n        }\n        Rectangle.current.set({\n          width: Math.abs(origX.current - pointer.current.x),\n        });\n        Rectangle.current.set({\n          height: Math.abs(origY.current - pointer.current.y),\n        });\n        canvas.renderAll();\n      }\n      if (canvasTool === \"line\") {\n        pointer.current = canvas.getPointer(opt);\n        line.current.set({ x2: pointer.current.x, y2: pointer.current.y });\n        canvas.renderAll();\n      }\n      if (canvasTool === \"arrow\") {\n        pointer.current = canvas.getPointer(opt);\n        line.current.set({\n          x2: pointer.current.x,\n          y2: pointer.current.y,\n        });\n        let dx = line.current.x2 - line.current.x1,\n          dy = line.current.y2 - line.current.y1;\n        angle.current = Math.atan2(dy, dx);\n        angle.current *= 180 / Math.PI;\n        angle.current += 90;\n        arrow.current.set({\n          top: line.current.y2,\n          left: line.current.x2,\n          angle: angle.current,\n          width: 15,\n          height: 15,\n        });\n        canvas.renderAll();\n      }\n      if (canvasTool === \"polyline\") {\n        if (isDrawing.current) {\n          var endPoint = canvas.getPointer(opt);\n          line.current.set({\n            x2: endPoint.x,\n            y2: endPoint.y,\n          });\n          canvas.renderAll();\n        }\n      }\n      if (canvasTool === \"polygon\") {\n        if (isDrawing.current) {\n          endPoint = canvas.getPointer(opt);\n          line.current.set({\n            x2: endPoint.x,\n            y2: endPoint.y,\n          });\n          canvas.renderAll();\n        }\n      }\n      if (canvasTool === \"rpolygon\") {\n        pointer.current = canvas.getPointer(opt);\n        rpolygon.current.set({\n          points: calcPolygonPoints(\n            8,\n            Math.abs(origX.current - pointer.current.x) / 2\n          ),\n          left: origX.current,\n          top: origY.current,\n        });\n        canvas.renderAll();\n      }\n      if (canvasTool === \"arc\") {\n        pointer.current = canvas.getPointer(opt);\n        var radius =\n          Math.max(\n            Math.abs(origY.current - pointer.current.y),\n            Math.abs(origX.current - pointer.current.x)\n          ) / 2;\n        if (radius > circle.current.strokeWidth) {\n          radius -= circle.current.strokeWidth / 2;\n        }\n        circle.current.set({ radius: radius });\n        if (origX.current > pointer.current.x) {\n          circle.current.set({ originX: \"right\" });\n          circle.current.set({ angle: -135 });\n        } else {\n          circle.current.set({ originX: \"left\" });\n          circle.current.set({ angle: 135 });\n        }\n        if (origY.current > pointer.current.y) {\n          circle.current.set({ originY: \"bottom\" });\n        } else {\n          circle.current.set({ originY: \"top\" });\n        }\n        canvas.renderAll();\n      }\n      if (canvasTool === \"circle\") {\n        pointer.current = canvas.getPointer(opt);\n        radius =\n          Math.max(\n            Math.abs(origY.current - pointer.current.y),\n            Math.abs(origX.current - pointer.current.x)\n          ) / 2;\n        if (radius > circle.current.strokeWidth) {\n          radius -= circle.current.strokeWidth / 2;\n        }\n        circle.current.set({ radius: radius });\n        if (origX.current > pointer.current.x) {\n          circle.current.set({ originX: \"right\" });\n        } else {\n          circle.current.set({ originX: \"left\" });\n        }\n        if (origY.current > pointer.current.y) {\n          circle.current.set({ originY: \"bottom\" });\n        } else {\n          circle.current.set({ originY: \"top\" });\n        }\n        canvas.renderAll();\n      }\n      if (canvasTool === \"ellipse\") {\n        pointer.current = canvas.getPointer(opt);\n        var rx = Math.abs(origX.current - pointer.current.x) / 2;\n        var ry = Math.abs(origY.current - pointer.current.y) / 2;\n        if (rx > ellipse.current.strokeWidth) {\n          rx -= ellipse.current.strokeWidth / 2;\n        }\n        if (ry > ellipse.current.strokeWidth) {\n          ry -= ellipse.current.strokeWidth / 2;\n        }\n        ellipse.current.set({ rx: rx, ry: ry });\n        if (origX.current > pointer.current.x) {\n          ellipse.current.set({ originX: \"right\" });\n        } else {\n          ellipse.current.set({ originX: \"left\" });\n        }\n        if (origY.current > pointer.current.y) {\n          ellipse.current.set({ originY: \"bottom\" });\n        } else {\n          ellipse.current.set({ originY: \"top\" });\n        }\n        canvas.renderAll();\n      }\n    });\n\n    canvas.on(\"mouse:over\", function (e) {\n      if (e.target) {\n        //console.log(currentStroke.current);\n        currentStroke.current = e.target.get(\"stroke\");\n        console.log(currentStroke.current);\n        e.target.set(\"stroke\", \"rgba(255,0,0,1)\");\n        canvas.renderAll();\n      }\n    });\n\n    canvas.on(\"mouse:out\", function (e) {\n      if (e.target) {\n        e.target.set(\"stroke\", currentStroke.current);\n        canvas.renderAll();\n      }\n    });\n\n    setCanvas(canvas);\n    return () => {\n      canvas.dispose();\n    };\n  }, [canvasRef, canvasTool, setCanvas]);\n  /*\n  const moveHistory = useCallback(\n    (step) => {\n      console.log(canvasState);\n      const currentStateIndex = canvasHistory.indexOf(canvasState);\n      const prevState = canvasHistory[currentStateIndex + step];\n      canvas.loadFromJSON(prevState);\n      setCanvasState(prevState);\n    },\n    [canvas, canvasState, canvasHistory, setCanvasState]\n  );\n*/\n  //const onUndo = useCallback(() => moveHistory(-1), [moveHistory]);\n  const onUndo = () => {\n    const present = past.pop();\n    const newFuture = [present, ...future];\n    setFuture(newFuture);\n    const previous = past[past.length - 1];\n    canvas.loadFromJSON(previous);\n    setPast(past);\n    console.log(past);\n  };\n  // const onRedo = useCallback(() => moveHistory(1), [moveHistory]);\n  const onRedo = () => {\n    const next = future[0];\n    canvas.loadFromJSON(next);\n    const newFuture = future.slice(1);\n    past.push(next);\n    setPast(past);\n    setFuture(newFuture);\n    console.log(future);\n  };\n  const setShapeAttributes = (attributes) => {\n    var activeShape = canvas.getActiveObject();\n    if (activeShape) {\n      var Attributes = attributes || {};\n      if (activeShape.type === \"group\") {\n        activeShape.item(0).set({\n          stroke: Attributes.stroke || activeShape.item(1).stroke,\n        });\n        activeShape.item(1).set({\n          stroke: Attributes.stroke || activeShape.item(1).stroke,\n          fill: Attributes.fill || activeShape.item(1).fill,\n        });\n      }\n      activeShape.set({\n        strokeWidth: Attributes.strokeWidth || activeShape.strokeWidth,\n        stroke:\n          Attributes.stroke === \"nill\"\n            ? null\n            : Attributes.stroke || activeShape.stroke,\n        fill:\n          Attributes.fill === \"nill\"\n            ? null\n            : Attributes.fill || activeShape.fill,\n        opacity: Attributes.opacity / 100 || activeShape.opacity,\n        strokeDashArray:\n          Attributes.strokeDashArray || activeShape.strokeDashArray,\n        fontFamily: Attributes.fontFamily || activeShape.fontFamily,\n        fontSize: Attributes.fontSize || activeShape.fontSize,\n        fontWeight: Attributes.fontWeight || activeShape.fontWeight,\n        fontStyle: Attributes.fontStyle || activeShape.fontStyle,\n        textBackgroundColor:\n          Attributes.textBackgroundColor || activeShape.textBackgroundColor,\n      });\n      canvas.renderAll();\n      canvas.setActiveObject(activeShape);\n      const newCanvasState = canvas.toJSON([\"name\"]);\n      //setCanvasState(newCanvasState);\n      // Save state to History and Limit history depth to 32\n      // setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\n      saveCanvasState(newCanvasState);\n      // }\n    }\n  };\n\n  function deleteObjects() {\n    if (canvas.getActiveObjects === null) return;\n    canvas.getActiveObjects().forEach((obj) => {\n      canvas.remove(obj);\n    });\n    const newCanvasState = canvas.toJSON([\"name\"]);\n    //setCanvasState(newCanvasState);\n    // Save state to History and Limit history depth to 32\n    //  setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\n    saveCanvasState(newCanvasState);\n  }\n  /*\n  function hexToRGB(hex, alpha) {\n    var r = parseInt(hex.slice(1, 3), 16),\n      g = parseInt(hex.slice(3, 5), 16),\n      b = parseInt(hex.slice(5, 7), 16);\n    if (alpha) {\n      return \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + alpha + \")\";\n    } else {\n      return \"rgb(\" + r + \", \" + g + \", \" + b + \")\";\n    }\n  }\n*/\n  function w3_openPanel(evt, panelId) {\n    if (currentOpenPanel !== panelId) {\n      document.getElementById(\"Library\").style.height = \"400px\";\n      document.getElementById(panelId).style.display = \"block\";\n      if (currentOpenPanel !== \"none\")\n        document.getElementById(currentOpenPanel).style.display = \"none\";\n      currentOpenPanel = panelId;\n      return;\n    }\n\n    if (currentOpenPanel === panelId) {\n      if (panelId === \"none\") return;\n      document.getElementById(panelId).style.display = \"none\";\n      currentOpenPanel = \"none\";\n      document.getElementById(\"Library\").style.height = \"0px\";\n    }\n    /*\n    else {\n      if (currentOpenPanel !== \"None\") {\n        document.getElementById(currentOpenPanel).style.display = \"none\";\n      }\n      document.getElementById(\"Library\").style.height = \"400px\";\n      document.getElementById(panelId).style.display = \"block\";\n      currentOpenPanel = panelId;\n    }\n    */\n  }\n\n  const setActiveTool = (e, id) => {\n    if (currentToolId.current !== null) {\n      //console.log(currentToolId);\n      document.getElementById(currentToolId.current).style.backgroundColor =\n        \"#003059\";\n      document.getElementById(id).style.backgroundColor = \"grey\";\n      currentToolId.current = id;\n      return;\n    } else {\n      //console.log(id);\n      document.getElementById(id).style.backgroundColor = \"grey\";\n      currentToolId.current = id;\n    }\n  };\n\n  function handleKeyDown(event) {\n    if (event.key === \"s\") {\n      setActiveTool(event, \"select\");\n      return;\n    }\n    if (event.key === \"Delete\") {\n      deleteObjects();\n      return;\n    }\n    if (event.ctrlKey && event.key === \"z\") {\n      if (past.length === 1) return;\n      onUndo();\n      return;\n    }\n    if (event.ctrlKey && event.key === \"y\") {\n      if (future.length === 0) return;\n      onRedo();\n      return;\n    }\n  }\n\n  let url = \"#\";\n\n  const swatchStyles = reactCSS({\n    default: {\n      stroke: {\n        width: \"36px\",\n        height: \"14px\",\n        borderRadius: \"2px\",\n        background: `rgba(${stroke.r}, ${stroke.g}, ${stroke.b}, ${stroke.a})`,\n      },\n      blank: {\n        width: \"36px\",\n        height: \"14px\",\n        borderRadius: \"2px\",\n      },\n      fill: {\n        width: \"36px\",\n        height: \"14px\",\n        borderRadius: \"2px\",\n        background: `rgba(${fill.r}, ${fill.g}, ${fill.b}, ${fill.a})`,\n      },\n      highlight: {\n        width: \"36px\",\n        height: \"14px\",\n        borderRadius: \"2px\",\n        background: `rgba(${textHighlight.r}, ${textHighlight.g}, ${textHighlight.b}, ${textHighlight.a})`,\n      },\n      swatch: {\n        padding: \"0px\",\n        background: \"#fff\",\n        borderRadius: \"1px\",\n        boxShadow: \"0 0 0 1px rgba(0,0,0,.1)\",\n        display: \"inline-block\",\n        cursor: \"pointer\",\n        backgroundImage: \"url(images/no.png)\",\n      },\n      pickerContainer: {\n        display: \"inline-block\",\n      },\n      popover: {\n        position: \"absolute\",\n        zIndex: \"2\",\n      },\n      cover: {\n        position: \"fixed\",\n        top: \"50px\",\n        right: \"0px\",\n        bottom: \"0px\",\n        left: \"100px\",\n      },\n    },\n  });\n\n  return (\n    <div\n      ref={mainDiv}\n      className=\"App\"\n      onKeyDown={(e) => {\n        handleKeyDown(e);\n      }}\n      tabIndex=\"0\"\n    >\n      <div className={tbStyles.propBar}>\n        <a href={url}>\n          <button\n            className={tbStyles.buttontoolbar}\n            onClick={onUndo}\n            id=\"undo\"\n            //disabled={canvasHistory[0] === canvasState}\n            disabled={past.length === 1}\n          >\n            <div className={tbStyles.tooltipDown}>\n              <img src=\"images/undo2.png\" alt=\"Undo\"></img>\n              <span className={tbStyles.tooltiptextDown}>Undo</span>\n            </div>\n          </button>\n          <button\n            className={tbStyles.buttontoolbar}\n            onClick={onRedo}\n            id=\"redo\"\n            //disabled={canvasHistory[canvasHistory.length - 1] === canvasState}\n            disabled={future.length === 0}\n          >\n            <div className={tbStyles.tooltipDown}>\n              <img src=\"images/redo2.png\" alt=\"Redo\"></img>\n              <span className={tbStyles.tooltiptextDown}>Redo</span>\n            </div>\n          </button>\n          <button\n            className={tbStyles.buttontoolbar}\n            onClick={deleteObjects}\n            id=\"del\"\n          >\n            <div className={tbStyles.tooltipDown}>\n              <img src=\"images/delete2.png\" alt=\"Delete\"></img>\n              <span className={tbStyles.tooltiptextDown}>Delete</span>\n            </div>\n          </button>\n        </a>\n        <div className={tbStyles.dropdown}>\n          <button className={tbStyles.buttontoolbar} id=\"wList\">\n            <img src=\"images/lineWidth2.png\" alt=\"Line Width\"></img>\n            <div id=\"wlDropDown\" className={tbStyles.dropdowncontent}>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setStrokeWidth(1);\n                  setShapeAttributes({\n                    strokeWidth: 1,\n                  });\n                }}\n              >\n                <img src=\"images/stroke1.png\" alt=\"1\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setStrokeWidth(2);\n                  setShapeAttributes({\n                    strokeWidth: 2,\n                  });\n                }}\n              >\n                <img src=\"images/stroke2.png\" alt=\"2\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setStrokeWidth(4);\n                  setShapeAttributes({\n                    strokeWidth: 4,\n                  });\n                }}\n              >\n                <img src=\"images/stroke4.png\" alt=\"4\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setStrokeWidth(5);\n                  setShapeAttributes({\n                    strokeWidth: 5,\n                  });\n                }}\n              >\n                <img src=\"images/stroke5.png\" alt=\"5\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setStrokeWidth(10);\n                  setShapeAttributes({\n                    strokeWidth: 10,\n                  });\n                }}\n              >\n                <img src=\"images/stroke10.png\" alt=\"10\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setStrokeWidth(12);\n                  setShapeAttributes({\n                    strokeWidth: 12,\n                  });\n                }}\n              >\n                <img src=\"images/stroke12.png\" alt=\"12\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setStrokeWidth(15);\n                  setShapeAttributes({\n                    strokeWidth: 15,\n                  });\n                }}\n              >\n                <img src=\"images/stroke15.png\" alt=\"15\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setStrokeWidth(20);\n                  setShapeAttributes({\n                    strokeWidth: 20,\n                  });\n                }}\n              >\n                <img src=\"images/stroke20.png\" alt=\"20\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setStrokeWidth(25);\n                  setShapeAttributes({\n                    strokeWidth: 25,\n                  });\n                }}\n              >\n                <img src=\"images/stroke25.png\" alt=\"25\"></img>\n              </a>\n            </div>\n          </button>\n        </div>\n        <div className={tbStyles.dropdown}>\n          <button className={tbStyles.buttontoolbar} id=\"sList\">\n            <img src=\"images/LineStyle2.png\" alt=\"Line Style\"></img>\n            <div id=\"lsDropDown\" className={tbStyles.dropdowncontent}>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setDashSize(0);\n                  setGapSize(0);\n                  setShapeAttributes({\n                    strokeDashArray: [0, 0],\n                  });\n                }}\n              >\n                <img src=\"images/lineStyle1.png\" alt=\"1\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setDashSize(10);\n                  setGapSize(5);\n                  setShapeAttributes({\n                    strokeDashArray: [10, 5],\n                  });\n                }}\n              >\n                <img src=\"images/lineStyle2png.png\" alt=\"1\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setDashSize(10);\n                  setGapSize(5);\n                  setShapeAttributes({\n                    strokeDashArray: [10, 5],\n                  });\n                }}\n              >\n                <img src=\"images/lineStyle3.png\" alt=\"1\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setDashSize(20);\n                  setGapSize(5);\n                  setShapeAttributes({\n                    strokeDashArray: [20, 5],\n                  });\n                }}\n              >\n                <img src=\"images/lineStyle4.png\" alt=\"1\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setDashSize(20);\n                  setGapSize(10);\n                  setShapeAttributes({\n                    strokeDashArray: [20, 10],\n                  });\n                }}\n              >\n                <img src=\"images/lineStyle5.png\" alt=\"1\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setDashSize(5);\n                  setGapSize(5);\n                  setShapeAttributes({\n                    strokeDashArray: [5, 5],\n                  });\n                }}\n              >\n                <img src=\"images/lineStyle6.png\" alt=\"1\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setDashSize(2);\n                  setGapSize(2);\n                  setShapeAttributes({\n                    strokeDashArray: [2, 2],\n                  });\n                }}\n              >\n                <img src=\"images/lineStyle7.png\" alt=\"1\"></img>\n              </a>\n            </div>\n          </button>\n        </div>\n        <button className={tbStyles.buttontoolbar} id=\"dropper\">\n          <div className={tbStyles.tooltipDown}>\n            <img src=\"images/dropper2.png\" alt=\"Pick a color\"></img>\n            <span className={tbStyles.tooltiptextDown}>Pick a color</span>\n          </div>\n        </button>\n        &nbsp;Stroke&nbsp;\n        <input\n          type=\"number\"\n          id=\"strokePoint\"\n          value={strokeWidth}\n          min=\"0\"\n          max=\"50\"\n          onChange={(e) => {\n            setStrokeWidth(+e.target.value);\n            setShapeAttributes({\n              strokeWidth: +e.target.value,\n            });\n          }}\n        ></input>\n        &nbsp;Dash&nbsp;\n        <input\n          type=\"number\"\n          min=\"0\"\n          max=\"20\"\n          id=\"dashSize\"\n          value={dashSize}\n          onChange={(e) => {\n            setDashSize(+e.target.value);\n            setShapeAttributes({\n              strokeDashArray: [+e.target.value, +e.target.value],\n            });\n          }}\n        ></input>\n        &nbsp;Stroke Color&nbsp;\n        <div style={swatchStyles.pickerContainer}>\n          <div style={swatchStyles.swatch} onClick={StrokeSwatchClick}>\n            <div style={swatchStyles.stroke} />\n          </div>\n          {showStrokePicker ? (\n            <div style={swatchStyles.popover}>\n              <div style={swatchStyles.cover} onClick={StrokeSwatchClose} />\n              <SketchPicker color={stroke} onChange={StrokeSwatchChange} />\n            </div>\n          ) : null}\n        </div>\n        &nbsp;Fill Color&nbsp;\n        <div style={swatchStyles.pickerContainer}>\n          <div style={swatchStyles.swatch} onClick={FillSwatchClick}>\n            <div id=\"fillSwatch\" style={swatchStyles.fill} />\n          </div>\n          {showFillPicker ? (\n            <div style={swatchStyles.popover}>\n              <div style={swatchStyles.cover} onClick={FillSwatchClose} />\n              <SketchPicker color={fill} onChange={FillSwatchChange} />\n            </div>\n          ) : null}\n        </div>\n        &nbsp;HighlightText&nbsp;\n        <div style={swatchStyles.pickerContainer}>\n          <div style={swatchStyles.swatch} onClick={HighlightSwatchClick}>\n            <div style={swatchStyles.highlight} />\n          </div>\n          {showHighlightPicker ? (\n            <div style={swatchStyles.popover}>\n              <div style={swatchStyles.cover} onClick={HighlightSwatchClose} />\n              <SketchPicker\n                color={textHighlight}\n                onChange={HighlightSwatchChange}\n              />\n            </div>\n          ) : null}\n        </div>\n        &nbsp;\n        <button\n          id=\"noStroke\"\n          onClick={(e) => {\n            setStrokeColor({ r: 0, g: 0, b: 0, a: 0 });\n            setShapeAttributes({\n              stroke: \"rgba(0,0,0,0)\",\n            });\n          }}\n        >\n          <div className={tbStyles.tooltipDown}>\n            <img src=\"images/noStroke2.png\" alt=\"No stroke\"></img>\n            <span className={tbStyles.tooltiptextDown}>Set No Stroke</span>\n          </div>\n        </button>\n        &nbsp;\n        <button\n          id=\"noFill\"\n          onClick={(e) => {\n            setFillColor({ r: 0, g: 0, b: 0, a: 0 });\n            setShapeAttributes({\n              fill: \"rgba(0,0,0,0)\",\n            });\n          }}\n        >\n          <div className={tbStyles.tooltipDown}>\n            <img src=\"images/noFill2.png\" alt=\"No fill\"></img>\n            <span className={tbStyles.tooltiptextDown}>Set No Fill</span>\n          </div>\n        </button>\n        &nbsp;Opacity\n        <input\n          type=\"range\"\n          id=\"opacityRange\"\n          value={opacity}\n          onChange={(e) => {\n            //opacity.current = e.target.value;\n            setOpacity(e.target.value);\n            setShapeAttributes({\n              opacity: e.target.value,\n            });\n          }}\n        ></input>\n        &nbsp; Angle snap:\n        <input\n          type=\"checkbox\"\n          id=\"chkSnap\"\n          onChange={(e) => {\n            //console.log(e.target.checked);\n            snap.current = e.target.checked;\n          }}\n        ></input>\n        &nbsp;Font\n        <select\n          name=\"fonts\"\n          id=\"fonts\"\n          onChange={(e) => {\n            setFont(e.target.value);\n            setShapeAttributes({ fontFamily: e.target.value });\n          }}\n        ></select>\n        &nbsp;Size\n        <input\n          type=\"number\"\n          id=\"fontSize\"\n          value={fontSize}\n          min=\"0\"\n          max=\"100\"\n          onChange={(e) => {\n            setFontSize(+e.target.value);\n            setShapeAttributes({\n              fontSize: +e.target.value,\n            });\n          }}\n        ></input>\n        &nbsp;\n        <label>\n          FontWeight:\n          <select\n            value={fontWeight}\n            onChange={(e) => {\n              setFontWeight(e.target.value);\n              setShapeAttributes({\n                fontWeight: e.target.value,\n              });\n            }}\n          >\n            <option value=\"normal\">Normal</option>\n            <option value=\"bold\">Bold</option>\n          </select>\n        </label>\n        <label>\n          FontSyle:\n          <select\n            value={fontStyle}\n            onChange={(e) => {\n              setFontStyle(e.target.value);\n              setShapeAttributes({\n                fontStyle: e.target.value,\n              });\n            }}\n          >\n            <option value=\"regular\">Regular</option>\n            <option value=\"italic\">Italic</option>\n          </select>\n        </label>\n      </div>\n      <div id=\"lMenu\" className={styles.menu}>\n        <div className={styles.tableft}>\n          <button\n            onMouseEnter={(e) => {\n              w3_openPanel(e, \"File\");\n            }}\n            onClick={(e) => {\n              w3_openPanel(e, currentOpenPanel);\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src=\"images/FileAccess2.png\" alt=\"FileAccess\"></img>\n              <span className={styles.tooltiptextleft}>File Access</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              w3_openPanel(e, currentOpenPanel);\n            }}\n            onMouseEnter={(e) => {\n              w3_openPanel(e, \"CanvasSet\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src=\"images/Canvas2.png\" alt=\"Canvas Settings\"></img>\n              <span className={styles.tooltiptextleft}>Canvas Settings</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              w3_openPanel(e, currentOpenPanel);\n            }}\n            onMouseEnter={(e) => {\n              w3_openPanel(e, \"LayerSet\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src=\"images/Layers2.png\" alt=\"Layers\"></img>\n              <span className={styles.tooltiptextleft}>Layers</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              w3_openPanel(e, currentOpenPanel);\n            }}\n            onMouseEnter={(e) => {\n              w3_openPanel(e, \"Warehouse\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src=\"images/Warehouse2.png\" alt=\"Warehouse\"></img>\n              <span className={styles.tooltiptextleft}>Warehouse</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              w3_openPanel(e, currentOpenPanel);\n            }}\n            onMouseEnter={(e) => {\n              w3_openPanel(e, \"Phases\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src=\"images/Phases2.png\" alt=\"Phases\"></img>\n              <span className={styles.tooltiptextleft}>Phases</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              w3_openPanel(e, currentOpenPanel);\n            }}\n            onMouseEnter={(e) => {\n              w3_openPanel(e, \"Measures\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src=\"images/Measure2.png\" alt=\"Measurements\"></img>\n              <span className={styles.tooltiptextleft}>Measures</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              w3_openPanel(e, currentOpenPanel);\n            }}\n            onMouseEnter={(e) => {\n              w3_openPanel(e, \"Animation\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src=\"images/Animation2.png\" alt=\"Animation\"></img>\n              <span className={styles.tooltiptextleft}>Phase Player</span>\n            </div>\n          </button>\n          <div className={styles.tabbar}></div>\n        </div>\n      </div>\n      <div id=\"Library\" className={styles.library}>\n        <div id=\"File\" className={styles.File} style={{ display: \"none\" }}>\n          File Access\n          <div className={styles.btngroup}>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/NewFile2.png\" alt=\"NewFile\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>New File</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/OpenFile2.png\" alt=\"OpenFile\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Open File</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/recentFile2.png\" alt=\"RecentFile\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Recent File</span>\n            </div>\n          </div>\n        </div>\n        <div\n          id=\"CanvasSet\"\n          className={styles.CanvasSet}\n          style={{ display: \"none\" }}\n        >\n          Canvas Settings\n          <div className={styles.btngroup}>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/CanvasSize2.png\" alt=\"CanvasSize\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Canvas Size</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/CanvasColor2.png\" alt=\"CanvasColor\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Canvas Color</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/CanvasImage2.png\" alt=\"CanvasImage\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Canvas Image</span>\n            </div>\n          </div>\n        </div>\n        <div\n          id=\"LayerSet\"\n          className={styles.LayerSet}\n          style={{ display: \"none\" }}\n        >\n          Layers\n          <div className={styles.sbtngroup}>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/InsertBefore2.png\" alt=\"AddLayerBefore\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Add Layer Before</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/InsertAfter2.png\" alt=\"AddLayerAfter\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Add Layer After</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/Up2.png\" alt=\"LayerUp\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Layer Up</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/Down2.png\" alt=\"LayerDown\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Layer Down</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/Hide2.png\" alt=\"HideLayer\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Hide Layer</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/Lock2.png\" alt=\"LockLayer\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Lock Layer</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/SortAlpha2.png\" alt=\"SortLayer\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Sort layer</span>\n            </div>\n          </div>\n          <ul className={styles.a}>\n            <li>Shapes</li>\n            <ul>\n              <li>Circle</li>\n              <li>Rectangle</li>\n            </ul>\n            <li>Texts</li>\n            <li>Lines</li>\n          </ul>\n        </div>\n        <div\n          id=\"Warehouse\"\n          className={styles.Warehouse}\n          style={{ display: \"none\" }}\n        >\n          Warehouse\n          <div className={styles.btngroup}>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/Crane2.png\" alt=\"Crane\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Crane</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/Elevator2.png\" alt=\"Elevator\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Elevator</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/labels2.png\" alt=\"Labels\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Labels</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/CloudTool2.png\" alt=\"Cloud\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Cloud</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/CallOut2.png\" alt=\"Callout\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Callout</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/wedge2.png\" alt=\"Wedge\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Wedge</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/Ring2.png\" alt=\"Ring\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Ring</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/FilledArc2.png\" alt=\"FilledArc\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Filled Arc</span>\n            </div>\n          </div>\n        </div>\n        <div id=\"Phases\" className={styles.Phases} style={{ display: \"none\" }}>\n          Phases\n          <div className={styles.btngroup}>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/NewPhase2.png\" alt=\"NewPhase\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>NewPhase</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/StartDate2.png\" alt=\"StartDate\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Start Date</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/EndDate2.png\" alt=\"EndDate\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>End Date</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/DeletePhase2.png\" alt=\"DeletePhase\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Delete Phase </span>\n            </div>\n          </div>\n        </div>\n        <div\n          id=\"Measures\"\n          className={styles.Measures}\n          style={{ display: \"none\" }}\n        >\n          Measurement\n          <div className={styles.btngroup}>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/PageScale2.png\" alt=\"PageScale\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Page Scale</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/setunit2.png\" alt=\"SetUnits\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Set Units</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/Length2.png\" alt=\"Length\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Length</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/Perimeter2.png\" alt=\"Perimeter\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Perimeter</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/Area2.png\" alt=\"Area\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Area</span>\n            </div>\n          </div>\n        </div>\n        <div\n          id=\"Animation\"\n          className={styles.Animation}\n          style={{ display: \"none\" }}\n        >\n          Phase Player\n          <div className={styles.sbtngroup}>\n            <div className={styles.tooltip}>\n              <button>Phase1</button>\n              <span className={styles.tooltiptextB}>Play</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>Phase2</button>\n              <span className={styles.tooltiptextB}>Play</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>Phase3</button>\n              <span className={styles.tooltiptextB}>Play</span>\n            </div>\n          </div>\n          <div className={styles.sbtngroup}>\n            <div className={styles.tooltip}>\n              <button>\n                <img src=\"images/Play2.png\" alt=\"Play\"></img>\n              </button>\n              <span className={styles.tooltiptextB}>Play/Stop</span>\n            </div>\n            <input type=\"range\" min=\"1\" max=\"100\"></input>\n            Play Speed\n            <div className={styles.tooltip}>\n              <button>1</button>\n              <span className={styles.tooltiptextB}>1 Day/Second</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>2</button>\n              <span className={styles.tooltiptextB}>2 Day/Second</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>5</button>\n              <span className={styles.tooltiptextB}>5 Day/Second</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>10</button>\n              <span className={styles.tooltiptextB}>10 Day/Second</span>\n            </div>\n            <div className={styles.tooltip}>\n              <button>30</button>\n              <span className={styles.tooltiptextB}>30 Day/Second</span>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className={styles.right} ref={rightBar}>\n        <div className={styles.tab}>\n          <button\n            id=\"select\"\n            onClick={(e) => {\n              canvas.isDrawingMode = false;\n              canvas.selection = true;\n              setCanvasTool(\"select\");\n              setActiveTool(e, \"select\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Select2.png\"} alt=\"Select\"></img>\n              <span className={styles.tooltiptext}>Selection</span>\n            </div>\n          </button>\n          <button\n            id=\"text\"\n            onClick={(e) => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"text\");\n              setActiveTool(e, \"text\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/TextBox2.png\"} alt=\"TextBox\"></img>\n              <span className={styles.tooltiptext}>Text</span>\n            </div>\n          </button>\n          <button\n            id=\"pen\"\n            onClick={(e) => {\n              setCanvasTool(\"pen\");\n              canvas.isDrawingMode = 1;\n              canvas.freeDrawingBrush.color = \"black\";\n              canvas.freeDrawingBrush.width = strokeWidth;\n              setActiveTool(e, \"pen\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/PenTool2.png\"} alt=\"Pen\"></img>\n              <span className={styles.tooltiptext}>Free-hand</span>\n            </div>\n          </button>\n          <button\n            id=\"cloud\"\n            onClick={(e) => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"cloud\");\n              setActiveTool(e, \"cloud\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Cloud2.png\"} alt=\"Cloud\"></img>\n              <span className={styles.tooltiptext}>Cloud</span>\n            </div>\n          </button>\n          <button\n            id=\"callout\"\n            onClick={(e) => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"callout\");\n              setActiveTool(e, \"callout\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/CallOut2.png\"} alt=\"Callout\"></img>\n              <span className={styles.tooltiptext}>Callout</span>\n            </div>\n          </button>\n          <button\n            id=\"image\"\n            onClick={(e) => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"image\");\n              setActiveTool(e, \"image\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Image2.png\"} alt=\"Edit\"></img>\n              <span className={styles.tooltiptext}>Image Edit</span>\n            </div>\n          </button>\n          <div className={styles.tabspace}></div>\n          <button\n            id=\"line\"\n            onClick={(e) => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              editPoly.current = true;\n              setCanvasTool(\"line\");\n              setActiveTool(e, \"line\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Line2.png\"} alt=\"Line\"></img>\n              <span className={styles.tooltiptext}>Line</span>\n            </div>\n          </button>\n          <button\n            id=\"polyline\"\n            onClick={(e) => {\n              canvas.isDrawingMode = false;\n              setCanvasTool(\"polyline\");\n              setActiveTool(e, \"polyline\");\n              canvas.selection = false;\n              var objects = canvas.getObjects();\n              for (var i = 0; i < objects.length; i++) {\n                objects[i].set({ selectable: false, evented: false });\n              }\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Polyline2.png\"} alt=\"Polyline\"></img>\n              <span className={styles.tooltiptext}>Polyline</span>\n            </div>\n          </button>\n          <button\n            id=\"arrow\"\n            onClick={(e) => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"arrow\");\n              setActiveTool(e, \"arrow\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Arrow2.png\"} alt=\"Arrow\"></img>\n              <span className={styles.tooltiptext}>Arrow</span>\n            </div>\n          </button>\n          <button\n            id=\"arc\"\n            onClick={(e) => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"arc\");\n              setActiveTool(e, \"arc\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Arc2.png\"} alt=\"Arc\"></img>\n              <span className={styles.tooltiptext}>Arc</span>\n            </div>\n          </button>\n          <button\n            id=\"rect\"\n            onClick={(e) => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              canvas.selection = false;\n              canvas.forEachObject(function (o) {\n                o.selectable = false;\n              });\n              canvas.renderAll();\n              setCanvasTool(\"rect\");\n              setActiveTool(e, \"rect\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Rectangle2.png\"} alt=\"Rectangle\"></img>\n              <span className={styles.tooltiptext}>Rectangle.current</span>\n            </div>\n          </button>\n          <button\n            id=\"polygon\"\n            onClick={(e) => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"polygon\");\n              setActiveTool(e, \"polygon\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Polygon2.png\"} alt=\"Polygon\"></img>\n              <span className={styles.tooltiptext}>Polygon</span>\n            </div>\n          </button>\n          <button\n            id=\"rpolygon\"\n            onClick={(e) => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"rpolygon\");\n              setActiveTool(e, \"rpolygon\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/RPolygon2.png\"} alt=\"Regular Polygon\"></img>\n              <span className={styles.tooltiptext}>Regular Polygon</span>\n            </div>\n          </button>\n          <button\n            id=\"circle\"\n            onClick={(e) => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"circle\");\n              setActiveTool(e, \"circle\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Circle2.png\"} alt=\"Circle\"></img>\n              <span className={styles.tooltiptext}>Circle</span>\n            </div>\n          </button>\n          <button\n            id=\"ellipse\"\n            onClick={(e) => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"ellipse\");\n              setActiveTool(e, \"ellipse\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Ellipse2.png\"} alt=\"Ellipse\"></img>\n              <span className={styles.tooltiptext}>Ellipse</span>\n            </div>\n          </button>\n          <div className={styles.tabspace}></div>\n          <button\n            id=\"dimension\"\n            onClick={(e) => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"dimension\");\n              setActiveTool(e, \"dimension\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Dimension2.png\"} alt=\"Dimension\"></img>\n              <span className={styles.tooltiptext}>Dimension</span>\n            </div>\n          </button>\n\n          <button\n            id=\"area\"\n            onClick={(e) => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"area\");\n              setActiveTool(e, \"area\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Area2.png\"} alt=\"Area\"></img>\n              <span className={styles.tooltiptext}>Area</span>\n            </div>\n          </button>\n          <button\n            id=\"length\"\n            onClick={(e) => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"length\");\n              setActiveTool(e, \"length\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Length2.png\"} alt=\"Length\"></img>\n              <span className={styles.tooltiptext}>Length</span>\n            </div>\n          </button>\n          <button\n            id=\"perimeter\"\n            onClick={(e) => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"perimeter\");\n              setActiveTool(e, \"perimeter\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Perimeter2.png\"} alt=\"Perimeter\"></img>\n              <span className={styles.tooltiptext}>Perimeter</span>\n            </div>\n          </button>\n        </div>\n      </div>\n      <canvas\n        ref={canvasRef}\n        id=\"my-fabric-canvas\"\n        width=\"1191\"\n        height=\"842\"\n      ></canvas>\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}