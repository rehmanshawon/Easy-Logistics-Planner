{"ast":null,"code":"import _slicedToArray from\"C:/Tutorials/elp-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"C:/Tutorials/elp-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10;import React,{useState,useRef,useEffect,forwardRef}from\"react\";import styled from\"styled-components\";import{parseHSL,convertHSLToRGB,copyToClipboard,RGBAToHSLA}from\"./utils\";import Modal from\"./Modal\";import Hue from\"./Hue\";import Square from\"./Square\";import Input from\"./Input\";import Alpha from\"./Alpha\";import Svg from\"./Svg\";import Menu from\"./Menu\";import config from\"./config\";import imgNone from\"./../../images/no.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var defaultColors=Array.from({length:10},function(){return\"\";});var squareSize=config.squareSize,barSize=config.barSize,crossSize=config.crossSize,inputSize=config.inputSize,outputSize=config.outputSize,colorsSize=config.colorsSize;export var PickerWrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  user-select: none;\\n\"])));export var SwatchWrapper=styled.div.attrs(function(p){return{style:{backgroundColor:p.color,backgroundImage:p.color!==\"nill\"?\"none\":\"url(\".concat(p.bg,\")\"),backgroundRepeat:\"no-repeat\",backgroundSize:\"cover\"}};})(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  width: 50px;\\n  height: 20px;\\n  display: inline-block;\\n  cursor: pointer;\\n\"])));export var PickerOuter=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  width: \",\"px;\\n  display: grid;\\n  border-radius: 2px;\\n  background: #ffffff;\\n  box-shadow: 0 3px 3px rgba(0, 0, 0, 0.3);\\n\"])),squareSize+20);export var PickerInner=styled.div.attrs(function(p){return{style:{gridTemplateRows:p.showColors?\"\".concat(squareSize+20,\"px \").concat(barSize,\"px \").concat(barSize+10,\"px \").concat(inputSize,\"px \").concat(outputSize,\"px \").concat(colorsSize,\"px\"):\"\".concat(squareSize+20,\"px \").concat(barSize,\"px \").concat(barSize+10,\"px \").concat(inputSize,\"px \").concat(outputSize,\"px\")}};})(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  display: grid;\\n  align-items: center;\\n  justify-items: center;\\n\"])));export var Inputs=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  align-self: flex-end;\\n  width: 100%;\\n  display: grid;\\n  grid-template-columns: repeat(4, 1fr);\\n  align-items: center;\\n  justify-items: center;\\n  padding-left: 5px;\\n  padding-right: 5px;\\n\"])));export var Outputs=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  display: grid;\\n  grid-template-columns: 1fr;\\n  grid-gap: 10px;\\n  justify-items: center;\\n  padding-left: 10px;\\n  padding-right: 10px;\\n  .arrow {\\n    width: 100%;\\n    height: 100%;\\n    display: grid;\\n    align-items: center;\\n    justify-items: center;\\n    &:hover svg {\\n      fill: #333333;\\n    }\\n    svg {\\n      width: 12px;\\n      height: 12px;\\n      fill: #606060;\\n    }\\n  }\\n  .noColor {\\n    width: 100%;\\n    height: 100%;\\n    display: grid;\\n    align-items: center;\\n    justify-items: center;\\n    &:hover svg {\\n      fill: #dd0000;\\n    }\\n    svg {\\n      width: 20px;\\n      height: 20px;\\n    }\\n  }\\n\"])));export var OutputText=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  align-self: center;\\n  width: 100%;\\n  display: grid;\\n  grid-template-columns: 20px 1fr;\\n  align-items: center;\\n  border: 1px solid #ddd;\\n  .cycle {\\n    display: grid;\\n    align-items: center;\\n    justify-items: center;\\n    svg {\\n      width: 12px;\\n      height: 12px;\\n      fill: #606060;\\n    }\\n  }\\n  input {\\n    justify-self: flex-start;\\n    width: 100%;\\n    text-align: center;\\n    font-family: monospace;\\n    font-size: 15px;\\n    outline: 0;\\n    border: 0;\\n    padding: 4px 2px;\\n    cursor: auto;\\n    &::selection {\\n      background: transparent;\\n    }\\n  }\\n\"])));export var Colors=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: \",\"px;\\n  display: \",\";\\n  grid-template-columns: repeat(6, 1fr);\\n  grid-template-rows: 1fr 1fr;\\n  align-items: center;\\n  justify-items: start;\\n  padding-bottom: 5px;\\n  padding-right: 10px;\\n  padding-left: 10px;\\n  button {\\n    font-size: 11px;\\n    width: 50px;\\n    height: 28px;\\n  }\\n\"])),colorsSize,function(p){return p.show?\"grid\":\"none\";});export var Color=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  width: 30px;\\n  height: 30px;\\n  background: \",\";\\n  border: 1px solid #ddd;\\n\"])),function(p){return p.color||\"#fafafa\";});export var ColorAction=styled.div.attrs(function(p){return{style:{gridColumn:p.col,gridRow:p.row}};})(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  width: 25px;\\n  height: 25px;\\n  display: grid;\\n  align-items: center;\\n  justify-items: center;\\n  font-size: 14px;\\n  svg {\\n    width: 12px;\\n    height: 12px;\\n    fill: #606060;\\n  }\\n\"])));function computeHueX(h){return Math.round(squareSize/360*h-barSize/2);}function computeSquareXY(s,l){var t=s*(l<50?l:100-l)/100;var s1=Math.round(200*t/(l+t))|0;var b1=Math.round(t+l);var x=squareSize/100*s1-crossSize/2;var y=squareSize-squareSize/100*b1-crossSize/2;return[x,y];}function computeAlphaX(a){return Math.round(squareSize/100*a-barSize/2);}var Picker=/*#__PURE__*/forwardRef(function(_ref,ref){var swatchStyle=_ref.swatchStyle,setPickerColor=_ref.setPickerColor,type=_ref.type;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState([0,0]),_useState4=_slicedToArray(_useState3,2),position=_useState4[0],setPosition=_useState4[1];var _useState5=useState(180),_useState6=_slicedToArray(_useState5,2),hue=_useState6[0],setHue=_useState6[1];var _useState7=useState(function(){return squareSize/2-barSize/2;}),_useState8=_slicedToArray(_useState7,2),hueX=_useState8[0],setHueX=_useState8[1];var _useState9=useState([0,type===\"Stroke\"?0:100]),_useState10=_slicedToArray(_useState9,2),square=_useState10[0],setSquare=_useState10[1];var _useState11=useState(function(){return[squareSize-crossSize/2,crossSize/-2];}),_useState12=_slicedToArray(_useState11,2),squareXY=_useState12[0],setSquareXY=_useState12[1];var _useState13=useState(100),_useState14=_slicedToArray(_useState13,2),alpha=_useState14[0],setAlpha=_useState14[1];var _useState15=useState(squareSize-barSize/2),_useState16=_slicedToArray(_useState15,2),alphaX=_useState16[0],setAlphaX=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),offsetTop=_useState18[0],setOffsetTop=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),offsetLeft=_useState20[0],setOffsetLeft=_useState20[1];var _useState21=useState(type===\"Stroke\"?\"hsla(180, 0%, 0%, 1)\":\"hsla(180, 0%, 100%, 1)\"),_useState22=_slicedToArray(_useState21,2),color=_useState22[0],setColor=_useState22[1];var _useState23=useState(\"hsla\"),_useState24=_slicedToArray(_useState23,2),outputFormat=_useState24[0],setOutputFormat=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),copied=_useState26[0],setCopied=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),animate=_useState28[0],setAnimate=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),showColors=_useState30[0],setShowColors=_useState30[1];var _useState31=useState(defaultColors),_useState32=_slicedToArray(_useState31,2),colors=_useState32[0],setColors=_useState32[1];var _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),showMenu=_useState34[0],setShowMenu=_useState34[1];var _useState35=useState([0,0]),_useState36=_slicedToArray(_useState35,2),positionMenu=_useState36[0],setPositionMenu=_useState36[1];var _useState37=useState(\"\"),_useState38=_slicedToArray(_useState37,2),swatchBG=_useState38[0],setSwatchBG=_useState38[1];var modalPicker=useRef(null);var modalMenu=useRef(null);var modalSwatch=useRef(null);var setActiveStrokeColor=function setActiveStrokeColor(strokeColor){//console.log(\"calling child fn... params are: \", strokeColor);\nif(strokeColor!==\"nill\"){var c=RGBAToHSLA(strokeColor);setColor(c);}else{setColor(\"nill\");}};ref.current=setActiveStrokeColor;useEffect(function(){var initalColors=JSON.parse(window.localStorage.getItem(\"colors\"))||defaultColors;setColors(initalColors);//activeObjectStrokeRef.current = changeColor;\n},[]);// function changeColor() {\n//   console.log(\"I was called\");\n//   console.log(strokeColor);\n//   RGBAToHSLA(strokeColor);\n//   setColor(strokeColor);\n// }\nuseEffect(function(){window.localStorage.setItem(\"colors\",JSON.stringify(colors));},[colors]);useEffect(function(){function onResize(){var _window=window,innerWidth=_window.innerWidth,innerHeight=_window.innerHeight;var x=innerWidth/2-(squareSize+20)/2;var y=innerHeight/2-(squareSize+20+barSize+barSize+5+inputSize+outputSize+colorsSize)/2;var px=modalSwatch.current.offsetLeft;var py=modalSwatch.current.offsetTop+25;setPosition([px,py]);setOffsetTop(modalPicker.current.offsetTop);setOffsetLeft(modalPicker.current.offsetLeft);}if(modalPicker.current){onResize();window.addEventListener(\"resize\",onResize);}else{window.removeEventListener(\"resize\",onResize);}return function(){window.removeEventListener(\"resize\",onResize);};},[show]);useEffect(function(){var id;if(copied){id=setTimeout(function(){return setCopied(false);},4000);}return function(){clearTimeout(id);};},[copied]);useEffect(function(){setColor(\"hsla(\".concat(hue,\", \").concat(square[0],\"%, \").concat(square[1],\"%, \").concat(alpha/100,\")\"));var c=\"hsla(\".concat(hue,\", \").concat(square[0],\"%, \").concat(square[1],\"%, \").concat(alpha/100,\")\");setPickerColor(convertHSLToRGB(parseHSL(c)).rgba);//let { red, green, blue, a } = convertHSLToRGB(parseHSL(c));\n//console.log(red, green, blue, a);\n},[hue,square,alpha,setPickerColor]);function onHueChange(n){setAnimate(true);setHue(n);setHueX(computeHueX(n));var c=\"hsla(\".concat(n,\", \").concat(square[0],\"%, \").concat(square[1],\"%, \").concat(alpha/100,\")\");setPickerColor(convertHSLToRGB(parseHSL(c)).rgba);}function onSaturationChange(n){setAnimate(true);setSquare([n,square[1]]);setSquareXY(computeSquareXY(n,square[1]));var c=\"hsla(\".concat(hue,\", \").concat(n,\"%, \").concat(square[1],\"%, \").concat(alpha/100,\")\");setPickerColor(convertHSLToRGB(parseHSL(c)).rgba);}function onLightnessChange(n){setAnimate(true);setSquare([square[0],n]);setSquareXY(computeSquareXY(square[0],n));var c=\"hsla(\".concat(hue,\", \").concat(square[0],\"%, \").concat(n,\"%, \").concat(alpha/100,\")\");setPickerColor(convertHSLToRGB(parseHSL(c)).rgba);}function onAlphaChange(n){setAnimate(true);setAlpha(n);setAlphaX(computeAlphaX(n));var c=\"hsla(\".concat(hue,\", \").concat(square[0],\"%, \").concat(square[1],\"%, \").concat(n,\")\");setPickerColor(convertHSLToRGB(parseHSL(c)).rgba);}function addColor(){var index=colors.findIndex(function(c){return!c;});if(index!==-1){var newColors=colors.slice();newColors[index]=color;setColors(newColors);}}function removeColor(e,i){e.preventDefault();var shouldRemove=window.confirm(\"Delete color?\");if(shouldRemove){var newColors=colors.slice();newColors.splice(i,1,\"\");setColors(newColors);}}function resetColors(){var shouldReset=window.confirm(\"Delete all colors?\");if(shouldReset){setColors(defaultColors);setShowMenu(false);}}function onColorClick(c){if(c){setPickerColor(convertHSLToRGB(parseHSL(c)).rgba);var _parseHSL=parseHSL(c),_parseHSL2=_slicedToArray(_parseHSL,4),h=_parseHSL2[0],s=_parseHSL2[1],l=_parseHSL2[2],a=_parseHSL2[3];onHueChange(h);setSquare([s,l]);setSquareXY(computeSquareXY(s,l));onAlphaChange(a*100);copyToClipboard(formatOutput(c));setCopied(true);}}function formatOutput(c){if(outputFormat===\"hsla\")return c;else if(outputFormat===\"rgba\")return convertHSLToRGB(parseHSL(c)).rgba;else if(outputFormat===\"hexa\")return convertHSLToRGB(parseHSL(c)).hexa;}function cycleFormat(){setOutputFormat(function(curr){return curr===\"hsla\"?\"rgba\":curr===\"rgba\"?\"hexa\":\"hsla\";});}function openMenu(e){var clientX=e.clientX,clientY=e.clientY;setPositionMenu([clientX+20,clientY-100]);setShowMenu(true);}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(PickerWrapper,{color:color,children:[/*#__PURE__*/_jsx(SwatchWrapper,{styles:swatchStyle,ref:modalSwatch,color:color,bg:swatchBG,onClick:function onClick(){return setShow(true);}}),/*#__PURE__*/_jsx(Modal,{modal:modalPicker,show:show,position:position,zIndex:2,backdrop:true,animate:true,onClose:function onClose(){return setShow(false);},children:/*#__PURE__*/_jsx(PickerOuter,{children:/*#__PURE__*/_jsxs(PickerInner,{showColors:showColors,children:[/*#__PURE__*/_jsx(Square,{hue:hue,squareXY:squareXY,offsetTop:offsetTop,offsetLeft:offsetLeft,animate:animate,setSquare:setSquare,setSquareXY:setSquareXY,setAnimate:setAnimate}),/*#__PURE__*/_jsx(Hue,{hueX:hueX,offsetLeft:offsetLeft,animate:animate,setHueX:setHueX,setHue:setHue,setAnimate:setAnimate}),/*#__PURE__*/_jsx(Alpha,{hue:hue,alphaX:alphaX,offsetLeft:offsetLeft,animate:animate,setAlpha:setAlpha,setAlphaX:setAlphaX,setAnimate:setAnimate}),/*#__PURE__*/_jsxs(Inputs,{children:[/*#__PURE__*/_jsx(Input,{label:\"H\",value:hue,min:0,max:360,defaultValue:180,setValue:onHueChange}),/*#__PURE__*/_jsx(Input,{label:\"S\",value:square[0],min:0,max:100,defaultValue:100,setValue:onSaturationChange}),/*#__PURE__*/_jsx(Input,{label:\"L\",value:square[1],min:0,max:100,defaultValue:100,setValue:onLightnessChange}),/*#__PURE__*/_jsx(Input,{label:\"A\",value:alpha,min:0,max:100,defaultValue:100,setValue:onAlphaChange})]}),/*#__PURE__*/_jsx(Outputs,{children:/*#__PURE__*/_jsxs(OutputText,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"cycle\",onClick:cycleFormat,children:/*#__PURE__*/_jsx(Svg,{name:\"refresh\"})}),/*#__PURE__*/_jsx(\"input\",{value:copied?\"Copied...\":formatOutput(color),readOnly:true,onClick:function onClick(){return onColorClick(color);}})]})}),/*#__PURE__*/_jsxs(Colors,{show:true,children:[colors.map(function(c,i){return/*#__PURE__*/_jsx(Color,{color:c,onClick:function onClick(){return onColorClick(c);},onContextMenu:function onContextMenu(e){return removeColor(e,i);}},i);}),/*#__PURE__*/_jsx(ColorAction,{col:6,row:1,onClick:addColor,children:/*#__PURE__*/_jsx(Svg,{name:\"add\"})}),/*#__PURE__*/_jsx(ColorAction,{col:6,row:2,children:/*#__PURE__*/_jsxs(\"button\",{style:{// backgroundImage: `url(${imgNone})`,\n// backgroundRepeat: \"no-repeat\",\n// backgroundSize: \"cover\",\n// color: \"white\",\n},onClick:function onClick(){setSwatchBG(imgNone);setColor(\"nill\");setPickerColor(\"nill\");//console.log(\"clicked\");\n},children:[\"No \",type]})})]})]})})}),/*#__PURE__*/_jsx(Modal,{modal:modalMenu,show:showMenu,position:positionMenu,zIndex:4,backdrop:false,animate:false,onClose:function onClose(){return setShowMenu(false);},children:/*#__PURE__*/_jsx(Menu,{resetColors:resetColors})})]})});});export default Picker;","map":{"version":3,"sources":["C:/Tutorials/elp-app/src/components/Picker/Picker.js"],"names":["React","useState","useRef","useEffect","forwardRef","styled","parseHSL","convertHSLToRGB","copyToClipboard","RGBAToHSLA","Modal","Hue","Square","Input","Alpha","Svg","Menu","config","imgNone","defaultColors","Array","from","length","squareSize","barSize","crossSize","inputSize","outputSize","colorsSize","PickerWrapper","div","SwatchWrapper","attrs","p","style","backgroundColor","color","backgroundImage","bg","backgroundRepeat","backgroundSize","PickerOuter","PickerInner","gridTemplateRows","showColors","Inputs","Outputs","OutputText","Colors","show","Color","ColorAction","gridColumn","col","gridRow","row","computeHueX","h","Math","round","computeSquareXY","s","l","t","s1","b1","x","y","computeAlphaX","a","Picker","ref","swatchStyle","setPickerColor","type","setShow","position","setPosition","hue","setHue","hueX","setHueX","square","setSquare","squareXY","setSquareXY","alpha","setAlpha","alphaX","setAlphaX","offsetTop","setOffsetTop","offsetLeft","setOffsetLeft","setColor","outputFormat","setOutputFormat","copied","setCopied","animate","setAnimate","setShowColors","colors","setColors","showMenu","setShowMenu","positionMenu","setPositionMenu","swatchBG","setSwatchBG","modalPicker","modalMenu","modalSwatch","setActiveStrokeColor","strokeColor","c","current","initalColors","JSON","parse","window","localStorage","getItem","setItem","stringify","onResize","innerWidth","innerHeight","px","py","addEventListener","removeEventListener","id","setTimeout","clearTimeout","rgba","onHueChange","n","onSaturationChange","onLightnessChange","onAlphaChange","addColor","index","findIndex","newColors","slice","removeColor","e","i","preventDefault","shouldRemove","confirm","splice","resetColors","shouldReset","onColorClick","formatOutput","hexa","cycleFormat","curr","openMenu","clientX","clientY","map"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect, forwardRef } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport {\r\n  parseHSL,\r\n  convertHSLToRGB,\r\n  copyToClipboard,\r\n  RGBAToHSLA,\r\n} from \"./utils\";\r\nimport Modal from \"./Modal\";\r\nimport Hue from \"./Hue\";\r\nimport Square from \"./Square\";\r\nimport Input from \"./Input\";\r\nimport Alpha from \"./Alpha\";\r\nimport Svg from \"./Svg\";\r\nimport Menu from \"./Menu\";\r\nimport config from \"./config\";\r\nimport imgNone from \"./../../images/no.png\";\r\n\r\nconst defaultColors = Array.from({ length: 10 }, () => \"\");\r\n\r\nconst { squareSize, barSize, crossSize, inputSize, outputSize, colorsSize } =\r\n  config;\r\n\r\nexport const PickerWrapper = styled.div`\r\n  user-select: none;\r\n`;\r\n\r\nexport const SwatchWrapper = styled.div.attrs((p) => ({\r\n  style: {\r\n    backgroundColor: p.color,\r\n    backgroundImage: p.color !== \"nill\" ? \"none\" : `url(${p.bg})`,\r\n    backgroundRepeat: \"no-repeat\",\r\n    backgroundSize: \"cover\",\r\n  },\r\n}))`\r\n  width: 50px;\r\n  height: 20px;\r\n  display: inline-block;\r\n  cursor: pointer;\r\n`;\r\n\r\nexport const PickerOuter = styled.div`\r\n  width: ${squareSize + 20}px;\r\n  display: grid;\r\n  border-radius: 2px;\r\n  background: #ffffff;\r\n  box-shadow: 0 3px 3px rgba(0, 0, 0, 0.3);\r\n`;\r\n\r\nexport const PickerInner = styled.div.attrs((p) => ({\r\n  style: {\r\n    gridTemplateRows: p.showColors\r\n      ? `${squareSize + 20}px ${barSize}px ${\r\n          barSize + 10\r\n        }px ${inputSize}px ${outputSize}px ${colorsSize}px`\r\n      : `${squareSize + 20}px ${barSize}px ${\r\n          barSize + 10\r\n        }px ${inputSize}px ${outputSize}px`,\r\n  },\r\n}))`\r\n  display: grid;\r\n  align-items: center;\r\n  justify-items: center;\r\n`;\r\n\r\nexport const Inputs = styled.div`\r\n  align-self: flex-end;\r\n  width: 100%;\r\n  display: grid;\r\n  grid-template-columns: repeat(4, 1fr);\r\n  align-items: center;\r\n  justify-items: center;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n`;\r\n\r\nexport const Outputs = styled.div`\r\n  width: 100%;\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  grid-gap: 10px;\r\n  justify-items: center;\r\n  padding-left: 10px;\r\n  padding-right: 10px;\r\n  .arrow {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: grid;\r\n    align-items: center;\r\n    justify-items: center;\r\n    &:hover svg {\r\n      fill: #333333;\r\n    }\r\n    svg {\r\n      width: 12px;\r\n      height: 12px;\r\n      fill: #606060;\r\n    }\r\n  }\r\n  .noColor {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: grid;\r\n    align-items: center;\r\n    justify-items: center;\r\n    &:hover svg {\r\n      fill: #dd0000;\r\n    }\r\n    svg {\r\n      width: 20px;\r\n      height: 20px;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const OutputText = styled.div`\r\n  align-self: center;\r\n  width: 100%;\r\n  display: grid;\r\n  grid-template-columns: 20px 1fr;\r\n  align-items: center;\r\n  border: 1px solid #ddd;\r\n  .cycle {\r\n    display: grid;\r\n    align-items: center;\r\n    justify-items: center;\r\n    svg {\r\n      width: 12px;\r\n      height: 12px;\r\n      fill: #606060;\r\n    }\r\n  }\r\n  input {\r\n    justify-self: flex-start;\r\n    width: 100%;\r\n    text-align: center;\r\n    font-family: monospace;\r\n    font-size: 15px;\r\n    outline: 0;\r\n    border: 0;\r\n    padding: 4px 2px;\r\n    cursor: auto;\r\n    &::selection {\r\n      background: transparent;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const Colors = styled.div`\r\n  width: 100%;\r\n  height: ${colorsSize}px;\r\n  display: ${(p) => (p.show ? \"grid\" : \"none\")};\r\n  grid-template-columns: repeat(6, 1fr);\r\n  grid-template-rows: 1fr 1fr;\r\n  align-items: center;\r\n  justify-items: start;\r\n  padding-bottom: 5px;\r\n  padding-right: 10px;\r\n  padding-left: 10px;\r\n  button {\r\n    font-size: 11px;\r\n    width: 50px;\r\n    height: 28px;\r\n  }\r\n`;\r\n\r\nexport const Color = styled.div`\r\n  width: 30px;\r\n  height: 30px;\r\n  background: ${(p) => p.color || \"#fafafa\"};\r\n  border: 1px solid #ddd;\r\n`;\r\n\r\nexport const ColorAction = styled.div.attrs((p) => ({\r\n  style: {\r\n    gridColumn: p.col,\r\n    gridRow: p.row,\r\n  },\r\n}))`\r\n  width: 25px;\r\n  height: 25px;\r\n  display: grid;\r\n  align-items: center;\r\n  justify-items: center;\r\n  font-size: 14px;\r\n  svg {\r\n    width: 12px;\r\n    height: 12px;\r\n    fill: #606060;\r\n  }\r\n`;\r\n\r\nfunction computeHueX(h) {\r\n  return Math.round((squareSize / 360) * h - barSize / 2);\r\n}\r\n\r\nfunction computeSquareXY(s, l) {\r\n  const t = (s * (l < 50 ? l : 100 - l)) / 100;\r\n  const s1 = Math.round((200 * t) / (l + t)) | 0;\r\n  const b1 = Math.round(t + l);\r\n  const x = (squareSize / 100) * s1 - crossSize / 2;\r\n  const y = squareSize - (squareSize / 100) * b1 - crossSize / 2;\r\n  return [x, y];\r\n}\r\n\r\nfunction computeAlphaX(a) {\r\n  return Math.round((squareSize / 100) * a - barSize / 2);\r\n}\r\n\r\nconst Picker = forwardRef(({ swatchStyle, setPickerColor, type }, ref) => {\r\n  const [show, setShow] = useState(false);\r\n  const [position, setPosition] = useState([0, 0]);\r\n  const [hue, setHue] = useState(180);\r\n  const [hueX, setHueX] = useState(() => squareSize / 2 - barSize / 2);\r\n  const [square, setSquare] = useState([0, type === \"Stroke\" ? 0 : 100]);\r\n  const [squareXY, setSquareXY] = useState(() => [\r\n    squareSize - crossSize / 2,\r\n    crossSize / -2,\r\n  ]);\r\n  const [alpha, setAlpha] = useState(100);\r\n  const [alphaX, setAlphaX] = useState(squareSize - barSize / 2);\r\n  const [offsetTop, setOffsetTop] = useState(0);\r\n  const [offsetLeft, setOffsetLeft] = useState(0);\r\n  const [color, setColor] = useState(\r\n    type === \"Stroke\" ? `hsla(180, 0%, 0%, 1)` : `hsla(180, 0%, 100%, 1)`\r\n  );\r\n  const [outputFormat, setOutputFormat] = useState(\"hsla\");\r\n  const [copied, setCopied] = useState(false);\r\n  const [animate, setAnimate] = useState(false);\r\n  const [showColors, setShowColors] = useState(false);\r\n  const [colors, setColors] = useState(defaultColors);\r\n  const [showMenu, setShowMenu] = useState(false);\r\n  const [positionMenu, setPositionMenu] = useState([0, 0]);\r\n  const [swatchBG, setSwatchBG] = useState(\"\");\r\n  const modalPicker = useRef(null);\r\n  const modalMenu = useRef(null);\r\n  const modalSwatch = useRef(null);\r\n  const setActiveStrokeColor = (strokeColor) => {\r\n    //console.log(\"calling child fn... params are: \", strokeColor);\r\n    if (strokeColor !== \"nill\") {\r\n      let c = RGBAToHSLA(strokeColor);\r\n      setColor(c);\r\n    } else {\r\n      setColor(\"nill\");\r\n    }\r\n  };\r\n\r\n  ref.current = setActiveStrokeColor;\r\n  useEffect(() => {\r\n    let initalColors =\r\n      JSON.parse(window.localStorage.getItem(\"colors\")) || defaultColors;\r\n    setColors(initalColors);\r\n    //activeObjectStrokeRef.current = changeColor;\r\n  }, []);\r\n\r\n  // function changeColor() {\r\n  //   console.log(\"I was called\");\r\n  //   console.log(strokeColor);\r\n  //   RGBAToHSLA(strokeColor);\r\n  //   setColor(strokeColor);\r\n  // }\r\n  useEffect(() => {\r\n    window.localStorage.setItem(\"colors\", JSON.stringify(colors));\r\n  }, [colors]);\r\n\r\n  useEffect(() => {\r\n    function onResize() {\r\n      const { innerWidth, innerHeight } = window;\r\n      const x = innerWidth / 2 - (squareSize + 20) / 2;\r\n      const y =\r\n        innerHeight / 2 -\r\n        (squareSize +\r\n          20 +\r\n          barSize +\r\n          barSize +\r\n          5 +\r\n          inputSize +\r\n          outputSize +\r\n          colorsSize) /\r\n          2;\r\n      let px = modalSwatch.current.offsetLeft;\r\n      let py = modalSwatch.current.offsetTop + 25;\r\n      setPosition([px, py]);\r\n      setOffsetTop(modalPicker.current.offsetTop);\r\n      setOffsetLeft(modalPicker.current.offsetLeft);\r\n    }\r\n    if (modalPicker.current) {\r\n      onResize();\r\n      window.addEventListener(\"resize\", onResize);\r\n    } else {\r\n      window.removeEventListener(\"resize\", onResize);\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener(\"resize\", onResize);\r\n    };\r\n  }, [show]);\r\n\r\n  useEffect(() => {\r\n    let id;\r\n    if (copied) {\r\n      id = setTimeout(() => setCopied(false), 4000);\r\n    }\r\n    return () => {\r\n      clearTimeout(id);\r\n    };\r\n  }, [copied]);\r\n\r\n  useEffect(() => {\r\n    setColor(`hsla(${hue}, ${square[0]}%, ${square[1]}%, ${alpha / 100})`);\r\n    let c = `hsla(${hue}, ${square[0]}%, ${square[1]}%, ${alpha / 100})`;\r\n    setPickerColor(convertHSLToRGB(parseHSL(c)).rgba);\r\n    //let { red, green, blue, a } = convertHSLToRGB(parseHSL(c));\r\n    //console.log(red, green, blue, a);\r\n  }, [hue, square, alpha, setPickerColor]);\r\n\r\n  function onHueChange(n) {\r\n    setAnimate(true);\r\n    setHue(n);\r\n    setHueX(computeHueX(n));\r\n    let c = `hsla(${n}, ${square[0]}%, ${square[1]}%, ${alpha / 100})`;\r\n    setPickerColor(convertHSLToRGB(parseHSL(c)).rgba);\r\n  }\r\n\r\n  function onSaturationChange(n) {\r\n    setAnimate(true);\r\n    setSquare([n, square[1]]);\r\n    setSquareXY(computeSquareXY(n, square[1]));\r\n    let c = `hsla(${hue}, ${n}%, ${square[1]}%, ${alpha / 100})`;\r\n    setPickerColor(convertHSLToRGB(parseHSL(c)).rgba);\r\n  }\r\n\r\n  function onLightnessChange(n) {\r\n    setAnimate(true);\r\n    setSquare([square[0], n]);\r\n    setSquareXY(computeSquareXY(square[0], n));\r\n    let c = `hsla(${hue}, ${square[0]}%, ${n}%, ${alpha / 100})`;\r\n    setPickerColor(convertHSLToRGB(parseHSL(c)).rgba);\r\n  }\r\n\r\n  function onAlphaChange(n) {\r\n    setAnimate(true);\r\n    setAlpha(n);\r\n    setAlphaX(computeAlphaX(n));\r\n    let c = `hsla(${hue}, ${square[0]}%, ${square[1]}%, ${n})`;\r\n    setPickerColor(convertHSLToRGB(parseHSL(c)).rgba);\r\n  }\r\n\r\n  function addColor() {\r\n    let index = colors.findIndex((c) => !c);\r\n    if (index !== -1) {\r\n      let newColors = colors.slice();\r\n      newColors[index] = color;\r\n      setColors(newColors);\r\n    }\r\n  }\r\n\r\n  function removeColor(e, i) {\r\n    e.preventDefault();\r\n    let shouldRemove = window.confirm(\"Delete color?\");\r\n    if (shouldRemove) {\r\n      let newColors = colors.slice();\r\n      newColors.splice(i, 1, \"\");\r\n      setColors(newColors);\r\n    }\r\n  }\r\n\r\n  function resetColors() {\r\n    let shouldReset = window.confirm(\"Delete all colors?\");\r\n    if (shouldReset) {\r\n      setColors(defaultColors);\r\n      setShowMenu(false);\r\n    }\r\n  }\r\n\r\n  function onColorClick(c) {\r\n    if (c) {\r\n      setPickerColor(convertHSLToRGB(parseHSL(c)).rgba);\r\n      let [h, s, l, a] = parseHSL(c);\r\n      onHueChange(h);\r\n      setSquare([s, l]);\r\n      setSquareXY(computeSquareXY(s, l));\r\n      onAlphaChange(a * 100);\r\n      copyToClipboard(formatOutput(c));\r\n      setCopied(true);\r\n    }\r\n  }\r\n\r\n  function formatOutput(c) {\r\n    if (outputFormat === \"hsla\") return c;\r\n    else if (outputFormat === \"rgba\") return convertHSLToRGB(parseHSL(c)).rgba;\r\n    else if (outputFormat === \"hexa\") return convertHSLToRGB(parseHSL(c)).hexa;\r\n  }\r\n\r\n  function cycleFormat() {\r\n    setOutputFormat((curr) =>\r\n      curr === \"hsla\" ? \"rgba\" : curr === \"rgba\" ? \"hexa\" : \"hsla\"\r\n    );\r\n  }\r\n\r\n  function openMenu(e) {\r\n    const { clientX, clientY } = e;\r\n    setPositionMenu([clientX + 20, clientY - 100]);\r\n    setShowMenu(true);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <PickerWrapper color={color}>\r\n        <SwatchWrapper\r\n          styles={swatchStyle}\r\n          ref={modalSwatch}\r\n          color={color}\r\n          bg={swatchBG}\r\n          onClick={() => setShow(true)}\r\n        />\r\n        <Modal\r\n          modal={modalPicker}\r\n          show={show}\r\n          position={position}\r\n          zIndex={2}\r\n          backdrop={true}\r\n          animate={true}\r\n          onClose={() => setShow(false)}\r\n        >\r\n          <PickerOuter>\r\n            <PickerInner showColors={showColors}>\r\n              <Square\r\n                hue={hue}\r\n                squareXY={squareXY}\r\n                offsetTop={offsetTop}\r\n                offsetLeft={offsetLeft}\r\n                animate={animate}\r\n                setSquare={setSquare}\r\n                setSquareXY={setSquareXY}\r\n                setAnimate={setAnimate}\r\n              />\r\n              <Hue\r\n                hueX={hueX}\r\n                offsetLeft={offsetLeft}\r\n                animate={animate}\r\n                setHueX={setHueX}\r\n                setHue={setHue}\r\n                setAnimate={setAnimate}\r\n              />\r\n              <Alpha\r\n                hue={hue}\r\n                alphaX={alphaX}\r\n                offsetLeft={offsetLeft}\r\n                animate={animate}\r\n                setAlpha={setAlpha}\r\n                setAlphaX={setAlphaX}\r\n                setAnimate={setAnimate}\r\n              />\r\n              <Inputs>\r\n                <Input\r\n                  label=\"H\"\r\n                  value={hue}\r\n                  min={0}\r\n                  max={360}\r\n                  defaultValue={180}\r\n                  setValue={onHueChange}\r\n                />\r\n                <Input\r\n                  label=\"S\"\r\n                  value={square[0]}\r\n                  min={0}\r\n                  max={100}\r\n                  defaultValue={100}\r\n                  setValue={onSaturationChange}\r\n                />\r\n                <Input\r\n                  label=\"L\"\r\n                  value={square[1]}\r\n                  min={0}\r\n                  max={100}\r\n                  defaultValue={100}\r\n                  setValue={onLightnessChange}\r\n                />\r\n                <Input\r\n                  label=\"A\"\r\n                  value={alpha}\r\n                  min={0}\r\n                  max={100}\r\n                  defaultValue={100}\r\n                  setValue={onAlphaChange}\r\n                />\r\n              </Inputs>\r\n              <Outputs>\r\n                <OutputText>\r\n                  <div className=\"cycle\" onClick={cycleFormat}>\r\n                    <Svg name=\"refresh\" />\r\n                  </div>\r\n                  <input\r\n                    value={copied ? \"Copied...\" : formatOutput(color)}\r\n                    readOnly={true}\r\n                    onClick={() => onColorClick(color)}\r\n                  />\r\n                </OutputText>\r\n                {/* <div\r\n                    className=\"noColor\"\r\n                    // onClick={() => setShowColors(!showColors)}\r\n                  >\r\n                    <Svg name=\"noColor\" />\r\n                  </div> */}\r\n              </Outputs>\r\n              <Colors show={true}>\r\n                {colors.map((c, i) => (\r\n                  <Color\r\n                    key={i}\r\n                    color={c}\r\n                    onClick={() => onColorClick(c)}\r\n                    onContextMenu={(e) => removeColor(e, i)}\r\n                  />\r\n                ))}\r\n                <ColorAction col={6} row={1} onClick={addColor}>\r\n                  <Svg name=\"add\" />\r\n                </ColorAction>\r\n                <ColorAction col={6} row={2}>\r\n                  <button\r\n                    style={\r\n                      {\r\n                        // backgroundImage: `url(${imgNone})`,\r\n                        // backgroundRepeat: \"no-repeat\",\r\n                        // backgroundSize: \"cover\",\r\n                        // color: \"white\",\r\n                      }\r\n                    }\r\n                    onClick={() => {\r\n                      setSwatchBG(imgNone);\r\n                      setColor(\"nill\");\r\n                      setPickerColor(\"nill\");\r\n                      //console.log(\"clicked\");\r\n                    }}\r\n                  >\r\n                    No {type}\r\n                  </button>\r\n                </ColorAction>\r\n                {/* <ColorAction col={6} row={2} onClick={openMenu}>\r\n                  <Svg name=\"menu\" />\r\n                </ColorAction> */}\r\n              </Colors>\r\n            </PickerInner>\r\n          </PickerOuter>\r\n        </Modal>\r\n        <Modal\r\n          modal={modalMenu}\r\n          show={showMenu}\r\n          position={positionMenu}\r\n          zIndex={4}\r\n          backdrop={false}\r\n          animate={false}\r\n          onClose={() => setShowMenu(false)}\r\n        >\r\n          <Menu resetColors={resetColors} />\r\n        </Modal>\r\n      </PickerWrapper>\r\n    </>\r\n  );\r\n});\r\n\r\nexport default Picker;\r\n"]},"metadata":{},"sourceType":"module"}