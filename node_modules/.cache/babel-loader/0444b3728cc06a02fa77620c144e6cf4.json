{"ast":null,"code":"var _jsxFileName = \"C:\\\\Tutorials\\\\elp-app\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState } from \"react\";\nimport { fabric } from \"fabric\";\nimport { SketchPicker } from \"react-color\";\nimport Picker from \"../src/components/Picker/Picker\";\nimport MediaQuery from \"react-responsive\";\nimport { useMediaQuery } from \"react-responsive\";\nimport reactCSS from \"reactcss\";\nimport imgUndo from \"./images/undo2.png\";\nimport imgRedo from \"./images/redo2.png\";\nimport imgDelete from \"./images/delete2.png\";\nimport imglineWidth from \"./images/lineWidth2.png\";\nimport imgStroke1 from \"./images/stroke1.png\";\nimport imgStroke2 from \"./images/stroke2.png\";\nimport imgStroke4 from \"./images/stroke4.png\";\nimport imgStroke5 from \"./images/stroke5.png\";\nimport imgStroke10 from \"./images/stroke10.png\";\nimport imgStroke12 from \"./images/stroke12.png\";\nimport imgStroke15 from \"./images/stroke15.png\";\nimport imgStroke20 from \"./images/stroke20.png\";\nimport imgStroke25 from \"./images/stroke25.png\";\nimport imgLineStyle from \"./images/LineStyle2.png\";\nimport imgLineStyle1 from \"./images/lineStyle1.png\";\nimport imgLineStyle2 from \"./images/lineStyle2png.png\";\nimport imgLineStyle3 from \"./images/lineStyle3.png\";\nimport imgLineStyle4 from \"./images/lineStyle4.png\";\nimport imgLineStyle5 from \"./images/lineStyle5.png\";\nimport imgLineStyle6 from \"./images/lineStyle6.png\";\nimport imgLineStyle7 from \"./images/lineStyle7.png\";\nimport imgText from \"./images/TextBox2.png\";\nimport imgFreeHand from \"./images/PenTool2.png\";\nimport imgSelection from \"./images/Select2.png\";\nimport imgCloud from \"./images/Cloud2.png\";\nimport imgCallout from \"./images/CallOut2.png\";\nimport imgImageEdit from \"./images/Image2.png\";\nimport imgLine from \"./images/Line2.png\";\nimport imgPolyline from \"./images/Polyline2.png\";\nimport imgArrow from \"./images/Arrow2.png\";\nimport imgArc from \"./images/Arc2.png\";\nimport imgRect from \"./images/Rectangle2.png\";\nimport imgPolygon from \"./images/Polygon2.png\";\nimport imgRPolygon from \"./images/RPolygon2.png\";\nimport imgCircle from \"./images/Circle2.png\";\nimport imgEllipse from \"./images/Ellipse2.png\";\nimport imgDimension from \"./images/Dimension2.png\";\nimport imgArea from \"./images/Area2.png\";\nimport imgLength from \"./images/Length2.png\";\nimport imgPerimeter from \"./images/Perimeter2.png\";\nimport imgDropper from \"./images/dropper2.png\";\nimport imgNoStroke from \"./images/noStroke2.png\";\nimport imgNoFill from \"./images/noFill2.png\";\nimport imgFileAccess from \"./images/FileAccess2.png\";\nimport imgNewFile from \"./images/NewFile2.png\";\nimport imgOpenFile from \"./images/OpenFile2.png\";\nimport imgRecentFile from \"./images/recentFile2.png\";\nimport imgCanvasSettings from \"./images/Canvas2.png\";\nimport imgCanvasSize from \"./images/CanvasSize2.png\";\nimport imgCanvasColor from \"./images/CanvasColor2.png\";\nimport imgCanvasImage from \"./images/CanvasImage2.png\";\nimport imgLayers from \"./images/Layers2.png\";\nimport imgLayerBefore from \"./images/InsertBefore2.png\";\nimport imgLayerAfter from \"./images/InsertAfter2.png\";\nimport imgLayerUp from \"./images/Up2.png\";\nimport imgLayerDown from \"./images/Down2.png\";\nimport imgLayerHide from \"./images/Hide2.png\";\nimport imgLayerLock from \"./images/Lock2.png\";\nimport imgLayerSort from \"./images/SortAlpha2.png\";\nimport imgWarehouse from \"./images/Warehouse2.png\";\nimport imgCrane from \"./images/Crane2.png\";\nimport imgElevator from \"./images/Elevator2.png\";\nimport imgLabels from \"./images/labels2.png\";\nimport imgCloud2 from \"./images/CloudTool2.png\";\nimport imgWedge from \"./images/wedge2.png\";\nimport imgRing from \"./images/Ring2.png\";\nimport imgFilledArc from \"./images/FilledArc2.png\";\nimport imgPhase from \"./images/Phases2.png\";\nimport imgNewPhase from \"./images/NewPhase2.png\";\nimport imgPhaseStart from \"./images/StartDate2.png\";\nimport imgPhaseEnd from \"./images/EndDate2.png\";\nimport imgPhaseDelete from \"./images/DeletePhase2.png\";\nimport imgMeasurement from \"./images/Measure2.png\";\nimport imgPageScale from \"./images/PageScale2.png\";\nimport imgSetUnits from \"./images/setunit2.png\";\nimport imgAnimation from \"./images/Animation2.png\";\nimport imgPlay from \"./images/Play2.png\";\nimport \"./styles.css\";\nimport styles from \"./rightMenu.module.css\";\nimport tbStyles from \"./toolbar.module.css\";\nimport styled from \"styled-components\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Backdrop = styled.div.attrs(p => ({\n  style: {\n    zIndex: p.zIndex,\n    display: p.show ? \"block\" : \"none\",\n    background: p.backdrop ? \"rgba(0, 0, 0, 0.1)\" : \"transparent\"\n  }\n}))`\n  position: fixed;\n  z-index: 1;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\nconst initialState = {\n  version: \"3.6.3\",\n  objects: [{\n    type: \"rect\",\n    version: \"3.6.3\",\n    originX: \"left\",\n    originY: \"top\",\n    left: 0,\n    top: 0,\n    width: 1,\n    height: 1,\n    fill: \"black\",\n    stroke: null,\n    strokeWidth: 1,\n    strokeDashArray: null,\n    strokeLineCap: \"butt\",\n    strokeDashOffset: 0,\n    strokeLineJoin: \"miter\",\n    strokeMiterLimit: 4,\n    scaleX: 1,\n    scaleY: 1,\n    angle: 0,\n    flipX: false,\n    flipY: false,\n    opacity: 1,\n    shadow: null,\n    visible: false,\n    clipTo: null,\n    backgroundColor: \"\",\n    fillRule: \"nonzero\",\n    paintFirst: \"fill\",\n    globalCompositeOperation: \"source-over\",\n    transformMatrix: null,\n    skewX: 0,\n    skewY: 0,\n    rx: 0,\n    ry: 0,\n    name: \"shape-rect-n\"\n  }]\n};\nconst fontCheck = new Set([// Windows 10\n\"Arial\", \"Arial Black\", \"Bahnschrift\", \"Calibri\", \"Cambria\", \"Cambria Math\", \"Candara\", \"Comic Sans MS\", \"Consolas\", \"Constantia\", \"Corbel\", \"Courier New\", \"Ebrima\", \"Franklin Gothic Medium\", \"Gabriola\", \"Gadugi\", \"Georgia\", \"HoloLens MDL2 Assets\", \"Impact\", \"Ink Free\", \"Javanese Text\", \"Leelawadee UI\", \"Lucida Console\", \"Lucida Sans Unicode\", \"Malgun Gothic\", \"Marlett\", \"Microsoft Himalaya\", \"Microsoft JhengHei\", \"Microsoft New Tai Lue\", \"Microsoft PhagsPa\", \"Microsoft Sans Serif\", \"Microsoft Tai Le\", \"Microsoft YaHei\", \"Microsoft Yi Baiti\", \"MingLiU-ExtB\", \"Mongolian Baiti\", \"MS Gothic\", \"MV Boli\", \"Myanmar Text\", \"Nirmala UI\", \"Palatino Linotype\", \"Segoe MDL2 Assets\", \"Segoe Print\", \"Segoe Script\", \"Segoe UI\", \"Segoe UI Historic\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"SimSun\", \"Sitka\", \"Sylfaen\", \"Symbol\", \"Tahoma\", \"Times New Roman\", \"Trebuchet MS\", \"Verdana\", \"Webdings\", \"Wingdings\", \"Yu Gothic\", // macOS\n\"American Typewriter\", \"Andale Mono\", \"Arial\", \"Arial Black\", \"Arial Narrow\", \"Arial Rounded MT Bold\", \"Arial Unicode MS\", \"Avenir\", \"Avenir Next\", \"Avenir Next Condensed\", \"Baskerville\", \"Big Caslon\", \"Bodoni 72\", \"Bodoni 72 Oldstyle\", \"Bodoni 72 Smallcaps\", \"Bradley Hand\", \"Brush Script MT\", \"Chalkboard\", \"Chalkboard SE\", \"Chalkduster\", \"Charter\", \"Cochin\", \"Comic Sans MS\", \"Copperplate\", \"Courier\", \"Courier New\", \"Didot\", \"DIN Alternate\", \"DIN Condensed\", \"Futura\", \"Geneva\", \"Georgia\", \"Gill Sans\", \"Helvetica\", \"Helvetica Neue\", \"Herculanum\", \"Hoefler Text\", \"Impact\", \"Lucida Grande\", \"Luminari\", \"Marker Felt\", \"Menlo\", \"Microsoft Sans Serif\", \"Monaco\", \"Noteworthy\", \"Optima\", \"Palatino\", \"Papyrus\", \"Phosphate\", \"Rockwell\", \"Savoye LET\", \"SignPainter\", \"Skia\", \"Snell Roundhand\", \"Tahoma\", \"Times\", \"Times New Roman\", \"Trattatello\", \"Trebuchet MS\", \"Verdana\", \"Zapfino\"].sort()); //const useForceUpdate = () => useState()[1];\n// Or you can use:\n// const fabric = require(\"fabric\").fabric;\n//const canvas = new fabric.Canvas(\"my-fabric-canvas\");\n\nfunction getWindowDimensions() {\n  const {\n    innerWidth: width,\n    innerHeight: height\n  } = window;\n  return {\n    width,\n    height\n  };\n}\n\nfunction determineAdjustedCoords(fromX, fromY, toX, toY) {\n  // this function uses the last point plotted, the length of the lines to the new x and y coords (using toX and toY) to determine an adjusted rubber band end-point\n  // find the angle subtended by the current rubber band line i.e. unadjusted (as dictated by the actual mouse coords) and the x axis\n  // var xLen = Math.abs(toX - fromX);\n  // var yLen = Math.abs(toY - fromY);\n  var xLen = toX - fromX;\n  var yLen = toY - fromY; // if x or y difference is zero then no action needed so return\n\n  if (xLen === 0 && yLen === 0) return;\n  var theta = Math.atan(yLen / xLen) * (180 / Math.PI); // find the hypontenuse of the triangle bounded by the x axis and the actual rubber band line - this will also be the hypontenuse of the adjusted rubber band line\n\n  var hyp; // verify if any of the components are zero\n\n  if (Math.sin(theta * (Math.PI / 180)) === 0) hyp = xLen;else {\n    if (yLen === 0) hyp = xLen;else hyp = yLen / Math.sin(theta * (Math.PI / 180));\n  } // find which sector the angle lies in and round it to the nearest sector\n\n  var sector = Math.round(theta / 15); // find the angle subtended by the adjusted rubber band line (as dictated by the coords we are trying to determine)\n\n  var thetaNew = sector * 15; // find new x and y coords of the adjusted rubber band line end points\n\n  var xNew = Math.cos(thetaNew * (Math.PI / 180)) * hyp;\n  var yNew = Math.sin(thetaNew * (Math.PI / 180)) * hyp; // required coords equal the new coords added to the last point plotted (fromX,fromY)\n\n  var px = fromX + Math.round(xNew);\n  var py = fromY + Math.round(yNew);\n  return {\n    tx: px,\n    ty: py\n  };\n}\n\nconst App = () => {\n  _s();\n\n  const isDesktopOrLaptop = useMediaQuery({\n    query: \"(min-width: 1224px)\"\n  });\n  const isBigScreen = useMediaQuery({\n    query: \"(min-width: 1824px)\"\n  });\n  const isTabletOrMobile = useMediaQuery({\n    query: \"(max-width: 1224px)\"\n  });\n  const isPortrait = useMediaQuery({\n    query: \"(orientation: portrait)\"\n  });\n  const isRetina = useMediaQuery({\n    query: \"(min-resolution: 2dppx)\"\n  }); //const mforceUpdate = useForceUpdate();\n  // for undo/redoing\n\n  const [past, setPast] = useState([initialState]);\n  const [future, setFuture] = useState([initialState]);\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions()); //const [newAction, setNewAction] = useState(0);\n\n  const [pageLoad, setPageLoad] = useState(null); // const canvasRender = useRef(0);\n\n  const mouseMoving = useRef(false);\n  const canvasRef = useRef();\n  const containerRef = useRef();\n  const mainDiv = useRef(null);\n  const rightBar = useRef();\n  const shapeCount = useRef(0);\n  const isDrawing = useRef(false);\n  const currentStroke = useRef(\"\");\n  const editPoly = useRef(true);\n  const openPoly = useRef(null);\n  const polyType = useRef(\"\");\n  const someValue = useRef(0.0);\n  const activeObjectStrokeRef = useRef(null);\n  const activeObjectFillRef = useRef(null);\n  const imgFileRef = useRef(null);\n  const imageData = useRef(null); //const [reRender, forceUpdate] = useReducer((x) => x + 1, 0);\n  //const forceUpdate = React.useReducer(() => ({}))[1];\n  //const [, updateComponent] = React.useState();\n  //const forceUpdateComponent = React.useCallback(() => updateComponent({}), []);\n  //anchors\n\n  const [canvas, setCanvas] = useState();\n  const [pickerStroke, setPickerColorStroke] = useState(`rgba(0, 0, 0, 1)`);\n  const [pickerFill, setPickerColorFill] = useState(`rgba(0, 0, 0, 1)`); //const [canvasHistory, setCanvasHistory] = useState([initialState]);\n  //const [canvasHistory, setCanvasHistory] = useState([]);\n  // const [canvasState, setCanvasState] = useState(initialState);\n  //const [canvasState, setCanvasState] = useState();\n\n  const [canvasTool, setCanvasTool] = useState(\"select\");\n  const [strokeWidth, setStrokeWidth] = useState(1); // const [stroke, setStrokeColor] = useState(\"black\");\n\n  const [stroke, setStrokeColor] = useState({\n    r: \"0\",\n    g: \"0\",\n    b: \"0\",\n    a: \"1\"\n  });\n  const [fill, setFillColor] = useState({\n    r: \"0\",\n    g: \"0\",\n    b: \"0\",\n    a: \"0\"\n  });\n  const [textHighlight, setHighlight] = useState({\n    r: \"255\",\n    g: \"255\",\n    b: \"0\",\n    a: \"1\"\n  }); // const [fill, setFillColor] = useState(\"black\");\n\n  const [dashSize, setDashSize] = useState(0);\n  const [gapSize, setGapSize] = useState(0);\n  const [opacity, setOpacity] = useState(100); // const [snap, setSnap] = useState(false);\n\n  const [font, setFont] = useState(\"\");\n  const [fontSize, setFontSize] = useState(30);\n  const [fontWeight, setFontWeight] = useState(\"normal\");\n  const [fontStyle, setFontStyle] = useState(\"regular\"); //const [textHighlight, setHighlight] = useState(\"yellow\");\n\n  const [showStrokePicker, setShowStrokePicker] = useState(false);\n  const [showFillPicker, setShowFillPicker] = useState(false);\n  const [showHighlightPicker, setShowHighlightPicker] = useState(false); //const [shapeCount, setShapeCount] = useState(0);\n  //const opacity = useRef(100);\n\n  const snap = useRef(false);\n  const newShape = useRef(true);\n  const anchors = useRef([]);\n  const pointer = useRef();\n  const line = useRef(null);\n  const origX = useRef();\n  const origY = useRef();\n  const angle = useRef();\n  const arrow = useRef(null);\n  const selectedShape = useRef(null);\n  const polyPoints = useRef([]);\n  const rpolygon = useRef(null);\n  const Rectangle = useRef(null);\n  const circle = useRef(null);\n  const ellipse = useRef(null);\n  const polyLine = useRef(null);\n  const polyLines = useRef([]);\n  const currentToolId = useRef(null);\n  var currentOpenPanel = \"none\";\n  var drawingObject = {};\n  drawingObject.type = \"\";\n  drawingObject.background = \"\";\n  drawingObject.border = \"\";\n\n  const StrokeSwatchClick = () => {\n    setShowStrokePicker(showStrokePicker => !showStrokePicker);\n\n    if (!showStrokePicker) {\n      //Todo\n      var activeShape = canvas.getActiveObject();\n\n      if (activeShape) {\n        if (activeShape.stroke === \"rgba(255,255,255,0)\") {\n          setStrokeColor({\n            r: 255,\n            g: 255,\n            b: 255,\n            a: 1\n          });\n          setShapeAttributes({\n            stroke: \"rgba(255,255,255,1)\"\n          });\n        }\n      }\n    }\n  };\n\n  const FillSwatchClick = () => {\n    setShowFillPicker(showFillPicker => !showFillPicker);\n\n    if (!showFillPicker) {\n      //Todo\n      var activeShape = canvas.getActiveObject();\n\n      if (activeShape) {\n        if (activeShape.fill === \"rgba(255,255,255,0)\") {\n          setFillColor({\n            r: 255,\n            g: 255,\n            b: 255,\n            a: 1\n          });\n          setShapeAttributes({\n            fill: \"rgba(255,255,255,1)\"\n          });\n        }\n      }\n    }\n  };\n\n  const HighlightSwatchClick = () => {\n    setShowHighlightPicker(showHighlightPicker => !showHighlightPicker);\n  };\n\n  const StrokeSwatchClose = () => {\n    setShowStrokePicker(false);\n  };\n\n  const FillSwatchClose = () => {\n    setShowFillPicker(false);\n  };\n\n  const HighlightSwatchClose = () => {\n    setShowHighlightPicker(false);\n  };\n\n  const StrokeSwatchChange = color => {\n    //console.log(stroke);\n    setStrokeColor(color.rgb); // setShapeAttributes({\n    //   stroke:\n    //     \"rgba(\" +\n    //     color.rgb.r +\n    //     \", \" +\n    //     color.rgb.g +\n    //     \", \" +\n    //     color.rgb.b +\n    //     \", \" +\n    //     color.rgb.a +\n    //     \")\",\n    // });\n\n    setShapeAttributes({\n      stroke: pickerStroke\n    });\n  };\n\n  const FillSwatchChange = color => {\n    //console.log(stroke);\n    setFillColor(color.rgb);\n    setShapeAttributes({\n      fill: \"rgba(\" + color.rgb.r + \", \" + color.rgb.g + \", \" + color.rgb.b + \", \" + color.rgb.a + \")\"\n    }); //console.log(swatchStyles.fill);\n  };\n\n  const HighlightSwatchChange = color => {\n    //console.log(stroke);\n    setHighlight(color.rgb);\n    setShapeAttributes({\n      textBackgroundColor: \"rgba(\" + color.rgb.r + \", \" + color.rgb.g + \", \" + color.rgb.b + \", \" + color.rgb.a + \")\"\n    });\n  };\n\n  var calcPolygonPoints = (sideCount, radius) => {\n    var sweep = Math.PI * 2 / sideCount;\n    var cx = radius;\n    var cy = radius;\n    var points = [];\n\n    for (var i = 0; i < sideCount; i++) {\n      var x = cx + radius * Math.cos(i * sweep);\n      var y = cy + radius * Math.sin(i * sweep);\n      points.push({\n        x: x,\n        y: y\n      });\n    }\n\n    return points;\n  };\n  /*\n  function click(id) {\n    var ev = new MouseEvent(\"click\", {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    });\n     var el = document.getElementById(id);\n    el.dispatchEvent(ev);\n  }\n  */\n\n\n  const saveCanvasState = newCanvasState => {\n    past.push(newCanvasState);\n    setPast(past);\n    setFuture([]);\n    sessionStorage.clear();\n    sessionStorage.myFabricJSCanvas = JSON.stringify(newCanvasState); // sessionStorage.setItem(\"history\", JSON.stringify(past));\n  };\n  /*\n  const onObjectModified = useCallback(\n    (e) => {\n      const newCanvasState = e.target.canvas.toJSON([\"name\"]);\n      //const newCanvasState = canvas.toJSON([\"name\"]);\n      setCanvasState(newCanvasState);\n      // Limit history depth\n      setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\n      //setPast([...past, newCanvasState]);\n      //setFuture([]);\n      console.log(newCanvasState);\n    },\n    [setCanvasState, setCanvasHistory]\n  );\n  */\n\n\n  React.useEffect(() => {\n    // window.localStorage.setItem(\"colors\", JSON.stringify(colors));\n    // setShapeAttributes({\n    //   stroke: pickerStroke,\n    // });\n    if (canvas === undefined) return;\n    var activeShape = canvas.getActiveObject();\n\n    if (activeShape) {\n      // if (activeShape.stroke === \"rgba(255,255,255,0)\") {\n      // setStrokeColor({ r: 255, g: 255, b: 255, a: 1 });\n      setShapeAttributes({\n        stroke: pickerStroke\n      }); // }\n    } // console.log(pickerStroke);\n\n  }, [pickerStroke, setPickerColorStroke, canvas]);\n  React.useEffect(() => {\n    // window.localStorage.setItem(\"colors\", JSON.stringify(colors));\n    // setShapeAttributes({\n    //   stroke: pickerStroke,\n    // });\n    if (canvas === undefined) return;\n    var activeShape = canvas.getActiveObject();\n\n    if (activeShape) {\n      // if (activeShape.stroke === \"rgba(255,255,255,0)\") {\n      // setStrokeColor({ r: 255, g: 255, b: 255, a: 1 });\n      setShapeAttributes({\n        fill: pickerFill\n      }); // }\n    } // console.log(pickerStroke);\n\n  }, [pickerFill, setPickerColorFill, canvas]);\n  React.useEffect(() => {\n    /*\n    ---disabled for memory issues--\n    var history = JSON.parse(sessionStorage.getItem(\"history\")); //get them back    \n    if (history !== null) setPast(history);\n    */\n    const fontAvailable = new Set();\n\n    for (const font of fontCheck.values()) {\n      if (document.fonts.check(`12px \"${font}\"`)) {\n        fontAvailable.add(font);\n        var x = document.getElementById(\"fonts\");\n        var option = document.createElement(\"option\");\n        option.text = font;\n        x.add(option);\n      }\n    }\n  }, []); // React.useEffect(() => {}, [canvasState]);\n\n  React.useEffect(() => {\n    //console.log(\"shift pressed\");\n    const canvas = new fabric.Canvas(canvasRef.current);\n    canvas.set({\n      fireRightClick: true,\n      fireMiddleClick: true,\n      // <-- enable firing of middle click events\n      stopContextMenu: true,\n      controlsAboveOverlay: false,\n      targetFindTolerance: 15,\n      preserveObjectStacking: true,\n      perPixelTargetFind: true\n    });\n\n    if (pageLoad === null && sessionStorage.myFabricJSCanvas !== undefined) {\n      setPageLoad(1); //console.log(sessionStorage.myFabricJSCanvas);\n\n      const data = JSON.parse(sessionStorage.myFabricJSCanvas);\n      console.log(data);\n      canvas.loadFromJSON(data);\n      canvas.forEachObject(function (o) {\n        if (o.name.includes(\"anchor\")) {\n          canvas.remove(o);\n        }\n      });\n      anchors.current = [];\n      var json = canvas.toJSON([\"name\"]);\n      past.push(json);\n      setPast(past);\n      /*\n      //disabled for memory issues. as a result, undoing after refresh is not possible\n      var history = JSON.parse(sessionStorage.getItem(\"history\")); //get them back      \n      if (history !== null) setPast(history);\n      */\n\n      setFuture([]);\n    } else {\n      canvas.loadFromJSON(past[past.length - 1]);\n    }\n\n    canvas.renderAll();\n\n    function handleResize() {\n      const ratio = canvas.getWidth() / canvas.getHeight();\n      const containerWidth = containerRef.current.clientWidth > 1191 ? 1191 : containerRef.current.clientWidth - 100;\n      const containerHeight = containerRef.current.clientHeight - 100;\n      const scale = containerWidth / canvas.getWidth();\n      const zoom = canvas.getZoom() * scale;\n      canvas.setDimensions({\n        width: containerWidth,\n        height: containerWidth / ratio\n      });\n      canvas.setViewportTransform([zoom, 0, 0, zoom, 0, 0]);\n    }\n\n    window.addEventListener(\"resize\", handleResize);\n\n    function handleImageFileLoad(e) {\n      var file = e.target.files[0];\n      var reader = new FileReader();\n\n      reader.onload = function (f) {\n        imageData.current = f.target.result;\n\n        if (imageData.current !== null) {\n          new fabric.Image.fromURL(imageData.current, img => {\n            var oImg = img.set({\n              left: pointer.current.x,\n              top: pointer.current.y,\n              angle: 0,\n              name: \"shape-image-\" + shapeCount.current // width: canvas.getWidth(),\n              // height: canvas.getHeight(),\n\n            });\n            shapeCount.current = shapeCount.current + 1;\n            canvas.add(oImg);\n            canvas.renderAll();\n            newShape.current = true;\n            const newCanvasState = canvas.toJSON([\"name\"]);\n            saveCanvasState(newCanvasState); //setImgURL(\"\");\n          });\n          imageData.current = null;\n        }\n      };\n\n      if (file) reader.readAsDataURL(file);\n    }\n\n    imgFileRef.current.addEventListener(\"change\", handleImageFileLoad);\n    editPoly.current = true;\n\n    if (canvasTool === \"pen\") {\n      canvas.isDrawingMode = 1;\n      canvas.freeDrawingBrush.color = \"rgba(\" + stroke.r + \", \" + stroke.g + \", \" + stroke.b + \", \" + stroke.a + \")\";\n      canvas.freeDrawingBrush.width = strokeWidth;\n    }\n\n    if (canvasTool !== \"select\") {\n      canvas.selection = false;\n      canvas.defaultCursor = \"crosshair\";\n      canvas.forEachObject(function (o) {\n        o.selectable = false;\n        o.hoverCursor = \"move\";\n      });\n\n      if (openPoly.current !== null) {\n        openPoly.current = null;\n        canvas.forEachObject(function (o) {\n          if (o.name.includes(\"anchor\")) {\n            canvas.remove(o);\n          }\n        });\n        anchors.current = [];\n        canvas.renderAll();\n        const newCanvasState = canvas.toJSON([\"name\"]);\n        saveCanvasState(newCanvasState);\n        sessionStorage.myFabricJSCanvas = JSON.stringify(newCanvasState);\n      }\n    } else {\n      canvas.selection = true;\n      canvas.forEachObject(function (o) {\n        o.selectable = true;\n      });\n      var allObjects = canvas.getObjects();\n      var lastObjectCreated = allObjects[allObjects.length - 1];\n      canvas.setActiveObject(lastObjectCreated); //console.log(lastObjectCreated);\n\n      canvas.renderAll();\n    }\n\n    canvas.on(\"object:rotating\", function (options) {\n      if (!snap.current) return;\n      var angle = options.target.angle;\n      var locked = Math.ceil(options.target.angle / 5) * 5;\n\n      if (Math.abs(angle - locked) < 10 || Math.abs(locked - angle) < 10) {\n        angle = locked;\n      }\n\n      options.target.set({\n        angle: angle\n      });\n    });\n    canvas.on(\"before:render\", function () {\n      var ctx = canvas.getSelectionContext();\n      if (ctx) canvas.clearContext(ctx);\n    }); //canvas.on(\"object:added\", onObjectModified);\n    // canvas.on(\"object:modified\", onObjectModified);\n\n    canvas.on(\"object:modified\", function (e) {\n      const newCanvasState = e.target.canvas.toJSON([\"name\"]);\n      past.push(newCanvasState);\n      setPast(past); //console.log(past);\n\n      setFuture([]);\n      sessionStorage.clear();\n      sessionStorage.myFabricJSCanvas = JSON.stringify(newCanvasState); // sessionStorage.setItem(\"history\", JSON.stringify(past));\n    });\n    canvas.on(\"object:removed\", function (e) {\n      const newCanvasState = e.target.canvas.toJSON([\"name\"]);\n      past.push(newCanvasState);\n      setPast(past); //console.log(past);\n\n      setFuture([]);\n      sessionStorage.clear();\n      sessionStorage.myFabricJSCanvas = JSON.stringify(newCanvasState); // sessionStorage.setItem(\"history\", JSON.stringify(past));\n    });\n    canvas.on(\"mouse:dblclick\", function (e) {\n      if (canvasTool === \"polygon\") {\n        canvas.remove(line.current);\n\n        for (var i = 0; i < polyLines.current.length; i++) {\n          canvas.remove(polyLines.current[i]);\n        }\n\n        newShape.current = true;\n        isDrawing.current = false;\n        var polyGon = null;\n        polyGon = new fabric.Polygon(polyPoints.current, {\n          stroke: \"rgba(\" + stroke.r + \", \" + stroke.g + \", \" + stroke.b + \", \" + stroke.a + \")\",\n          fill: \"rgba(\" + fill.r + \", \" + fill.g + \", \" + fill.b + \", \" + fill.a + \")\",\n          strokeWidth: strokeWidth,\n          selectable: false,\n          hoverCursor: \"default\",\n          name: \"shape-polygon-\" + shapeCount.current\n        });\n        canvas.add(polyGon);\n        editPoly.current = true;\n        canvas.setActiveObject(polyGon); // document.getElementById(\"select\").click();\n\n        canvas.renderAll();\n        shapeCount.current++;\n        const newCanvasState = canvas.toJSON([\"name\"]);\n        saveCanvasState(newCanvasState);\n      }\n\n      if (canvasTool === \"polyline\") {\n        canvas.remove(line.current);\n\n        for (i = 0; i < polyLines.current.length; i++) {\n          canvas.remove(polyLines.current[i]);\n        }\n\n        newShape.current = true;\n        isDrawing.current = false;\n        var polyLine = new fabric.Polyline(polyPoints.current, {\n          stroke: \"rgba(\" + stroke.r + \", \" + stroke.g + \", \" + stroke.b + \", \" + stroke.a + \")\",\n          fill: \"\",\n          strokeWidth: strokeWidth,\n          selectable: false,\n          hoverCursor: \"default\",\n          name: \"shape-polyline-\" + shapeCount.current\n        });\n        canvas.add(polyLine);\n        canvas.setActiveObject(polyLine); // document.getElementById(\"select\").click();\n\n        editPoly.current = true;\n        canvas.renderAll();\n        shapeCount.current++;\n        const newCanvasState = canvas.toJSON([\"name\"]);\n        saveCanvasState(newCanvasState);\n      }\n\n      if (canvasTool === \"select\") {\n        console.log(e.target);\n        if (e.target === null) return;\n\n        if (e.target.type === \"polyline\" && editPoly.current) {\n          canvas.set({\n            perPixelTargetFind: false\n          });\n          canvas.forEachObject(function (o) {\n            if (o.name.includes(\"anchor\")) {\n              canvas.remove(o);\n            }\n          });\n          anchors.current = [];\n          polyType.current = \"polyline\"; // polyPoints = [];\n\n          var editable = e.target;\n          openPoly.current = editable; //for future hiding the anchor points.\n\n          editable.set({\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\"\n          });\n          editPoly.current = false; // console.log(editable.get(\"points\"));\n\n          var str = editable.get(\"name\");\n          var id = str.split(\"-\");\n          var matrix = editable.calcTransformMatrix();\n          var transformedPoints = editable.get(\"points\").map(function (p) {\n            return new fabric.Point(p.x - editable.pathOffset.x, p.y - editable.pathOffset.y);\n          }).map(function (p) {\n            return fabric.util.transformPoint(p, matrix);\n          });\n          var pFill = editable.get(\"fill\");\n          var pStroke = editable.get(\"stroke\");\n          var pName = editable.get(\"name\");\n          canvas.remove(editable);\n          var updatedPoly = new fabric.Polyline(transformedPoints, {\n            fill: pFill,\n            stroke: pStroke,\n            name: pName,\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\"\n          });\n          canvas.add(updatedPoly);\n          canvas.sendToBack(updatedPoly);\n          openPoly.current = updatedPoly;\n          anchors.current = [];\n          transformedPoints.forEach(function (p, index) {\n            var anchor = new fabric.Circle({\n              left: p.x,\n              top: p.y,\n              radius: 15,\n              fill: \"green\",\n              originX: \"center\",\n              originY: \"center\",\n              hasControls: false,\n              hasBorders: false,\n              name: \"anchor-\" + id[2] + \"-\" + index\n            });\n            canvas.add(anchor);\n            anchors.current.push(anchor);\n          });\n          canvas.renderAll();\n          return;\n        } //if (e.target === null && !editPoly.current) {\n\n\n        if (e.target.type === \"polyline\" && !editPoly.current) {\n          canvas.set({\n            perPixelTargetFind: true\n          });\n          polyType.current = \"\";\n          editable = e.target;\n          editable.set({\n            hasControls: true,\n            hasBorders: true,\n            selectable: true,\n            hoverCursor: \"move\"\n          });\n          editPoly.current = true;\n          anchors.current.forEach(function (anchor) {\n            canvas.remove(anchor);\n          });\n          anchors.current = [];\n          openPoly.current = null;\n          canvas.renderAll();\n          return;\n        }\n\n        if (e.target.type === \"polygon\" && editPoly.current) {\n          if (e.target === null) return;\n          if (e.target.name.includes(\"rpolygon\")) return;\n          canvas.set({\n            perPixelTargetFind: false\n          });\n          canvas.forEachObject(function (o) {\n            if (o.name.includes(\"anchor\")) {\n              canvas.remove(o);\n            }\n          });\n          anchors.current = [];\n          polyType.current = \"polygon\"; // polyPoints = [];\n\n          editable = e.target;\n          openPoly.current = editable; //for future hiding the anchor points.\n\n          editable.set({\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\"\n          });\n          editPoly.current = false; // console.log(editable.get(\"points\"));\n\n          str = editable.get(\"name\");\n          id = str.split(\"-\");\n          matrix = editable.calcTransformMatrix();\n          transformedPoints = editable.get(\"points\").map(function (p) {\n            return new fabric.Point(p.x - editable.pathOffset.x, p.y - editable.pathOffset.y);\n          }).map(function (p) {\n            return fabric.util.transformPoint(p, matrix);\n          });\n          pFill = editable.get(\"fill\");\n          pStroke = editable.get(\"stroke\");\n          pName = editable.get(\"name\");\n          canvas.remove(editable);\n          updatedPoly = new fabric.Polygon(transformedPoints, {\n            fill: pFill,\n            stroke: pStroke,\n            name: pName,\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\"\n          });\n          canvas.add(updatedPoly);\n          canvas.sendToBack(updatedPoly);\n          anchors.current = [];\n          transformedPoints.forEach(function (p, index) {\n            var anchor = new fabric.Circle({\n              left: p.x,\n              top: p.y,\n              radius: 15,\n              fill: \"green\",\n              originX: \"center\",\n              originY: \"center\",\n              hasControls: false,\n              hasBorders: false,\n              name: \"anchor-\" + id[2] + \"-\" + index\n            });\n            canvas.add(anchor);\n            anchors.current.push(anchor);\n          });\n          canvas.renderAll();\n          return;\n        }\n\n        if (e.target.type === \"polygon\" && !editPoly.current) {\n          if (e.target.name.includes(\"rpolygon\")) return;\n          canvas.set({\n            perPixelTargetFind: true\n          });\n          polyType.current = \"\";\n          editable = e.target;\n          editable.set({\n            hasControls: true,\n            hasBorders: true,\n            selectable: true,\n            hoverCursor: \"move\"\n          });\n          editPoly.current = true;\n          anchors.current.forEach(function (anchor) {\n            canvas.remove(anchor);\n          });\n          anchors.current = [];\n          canvas.renderAll();\n          return;\n        }\n      }\n    }); // canvas.on(\"dragenter\", function (options) {\n    //   alert(\"draggin\");\n    // });\n\n    canvas.on(\"object:moving\", function (options) {\n      // if (options.e.altKey) alert(\"moving\");\n      if (options.target.type !== \"circle\") {\n        if (openPoly.current !== null) {\n          openPoly.current = null;\n          editPoly.current = true;\n          anchors.current.forEach(function (anchor) {\n            canvas.remove(anchor);\n          });\n          anchors.current = [];\n          canvas.renderAll();\n          return;\n        }\n      }\n\n      if (options.target.type === \"circle\") {\n        var p = options.target; //console.log(p.get(\"name\"));\n\n        if (p.name.includes(\"circle\")) return;\n        if (p.name.includes(\"arc\")) return;\n        var str = p.name.split(\"-\");\n\n        if (polyType.current === \"polyline\") {\n          var pname = \"shape-polyline-\" + str[1];\n        }\n\n        if (polyType.current === \"polygon\") {\n          pname = \"shape-polygon-\" + str[1];\n        } //console.log(pname);\n\n\n        var object = null;\n        var objects = canvas.getObjects();\n\n        for (var i = 0; i < objects.length; i++) {\n          if (objects[i].name && objects[i].name === pname) {\n            object = objects[i];\n            break;\n          }\n        } // console.log(object);\n\n\n        object.points[str[2]] = {\n          x: p.getCenterPoint().x,\n          y: p.getCenterPoint().y\n        }; //console.log(p.getCenterPoint());\n\n        var pFill = object.get(\"fill\");\n        var pStroke = object.get(\"stroke\");\n        var pName = object.get(\"name\");\n        var pPoints = object.get(\"points\"); //UNCOMMENT LINES 39 - 42 TO HAVE A WORKAROUND\n\n        canvas.remove(object);\n\n        if (polyType.current === \"polyline\") {\n          var updatedPoly = new fabric.Polyline(pPoints, {\n            fill: pFill,\n            stroke: pStroke,\n            name: pName,\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\"\n          });\n        }\n\n        if (polyType.current === \"polygon\") {\n          updatedPoly = new fabric.Polygon(pPoints, {\n            fill: pFill,\n            stroke: pStroke,\n            name: pName,\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\"\n          });\n        }\n\n        canvas.add(updatedPoly);\n        canvas.sendToBack(updatedPoly);\n        canvas.renderAll();\n      }\n    });\n    canvas.on(\"mouse:up\", function (e) {\n      this.setViewportTransform(this.viewportTransform);\n      this.isDragging = false;\n      mouseMoving.current = false;\n      if (e.button === 2) return; // if (e.button === 3) {\n      //   setActiveTool(e, \"select\");\n      //   setCanvas(\"select\");\n      //   return;\n      // }\n      // this.selection = true;\n\n      if (canvas.isDrawingMode) {\n        var allObjects = canvas.getObjects();\n        var path = allObjects[allObjects.length - 1];\n        path.set({\n          name: \"shape-path-\" + shapeCount.current\n        }); //console.log(path);\n\n        shapeCount.current = shapeCount.current + 1;\n        canvas.selection = true; // document.getElementById(\"select\").click();\n\n        canvas.setActiveObject(allObjects[allObjects.length - 1]);\n        canvas.renderAll();\n        const newCanvasState = canvas.toJSON([\"name\"]);\n        saveCanvasState(newCanvasState); // }\n      }\n\n      if (canvasTool === \"text\") {\n        //console.log(canvas.getObjects());\n        pointer.current = canvas.getPointer(e);\n        var text = new fabric.IText(\"Esc to edit\", {\n          left: pointer.current.x,\n          top: pointer.current.y,\n          fontFamily: \"Arial\",\n          fontSize: \"30\",\n          // fontWeight: \"regular\",\n          //stroke: stroke,\n          // strokeWidth: strokeWidth,\n          // selectable: false,\n          hoverCursor: \"default\",\n          name: \"shape-text-\" + shapeCount.current\n        }); //console.log(text);\n\n        canvas.add(text); // document.getElementById(\"select\").click();\n\n        canvas.setActiveObject(text);\n        canvas.renderAll();\n        shapeCount.current = shapeCount.current + 1; // Save the canvas to State variable\n\n        const newCanvasState = canvas.toJSON([\"name\"]);\n        saveCanvasState(newCanvasState);\n      }\n\n      if (canvasTool === \"image\") {\n        pointer.current = canvas.getPointer(e);\n        newShape.current = true; //var fileupload = document.getElementById(\"FileUpload1\");\n\n        imgFileRef.current.click();\n      }\n\n      if (canvasTool === \"line\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          var points = [pointer.current.x, pointer.current.y, pointer.current.x, pointer.current.y];\n          line.current = new fabric.Line(points, {\n            strokeWidth: strokeWidth,\n            stroke: pickerStroke,\n            originX: \"center\",\n            originY: \"center\",\n            padding: 15,\n            //selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-line-\" + shapeCount.current\n          });\n          canvas.add(line.current);\n          shapeCount.current = shapeCount.current + 1;\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n\n          if (e.e.shiftKey) {\n            var {\n              tx,\n              ty\n            } = determineAdjustedCoords(line.current.x1, line.current.y1, pointer.current.x, pointer.current.y);\n            line.current.set({\n              x2: tx,\n              y2: ty\n            }); // var deltaX = Math.abs(pointer.current.x - line.current.x1);\n            // var deltaY = Math.abs(pointer.current.y - line.current.y1);\n            // if (deltaX > deltaY)\n            //   line.current.set({ x2: pointer.current.x, y2: line.current.y1 });\n            // if (deltaY > deltaX)\n            //   line.current.set({ x2: line.current.x1, y2: pointer.current.y });\n          } else line.current.set({\n            x2: pointer.current.x,\n            y2: pointer.current.y\n          }); // line.current.set({ x2: pointer.current.x, y2: pointer.current.y });\n          // document.getElementById(\"select\").click();\n\n\n          canvas.setActiveObject(line.current);\n          canvas.renderAll();\n          newShape.current = true; // Save the canvas to State variable\n\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n\n      if (canvasTool === \"arrow\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          let arrowLinePoints = [pointer.current.x, pointer.current.y, pointer.current.x, pointer.current.y];\n          line.current = new fabric.Line(arrowLinePoints, {\n            stroke: pickerStroke,\n            strokeWidth: strokeWidth,\n            originX: \"center\",\n            originY: \"center\",\n            padding: 15\n          }); // reference points for arrowhead\n\n          origX.current = line.current.x2;\n          origY.current = line.current.y2;\n          let dx = line.current.x2 - line.current.x1,\n              dy = line.current.y2 - line.current.y1;\n          /* calculate angle.current of arrow.current */\n\n          angle.current = Math.atan2(dy, dx);\n          angle.current *= 180 / Math.PI;\n          angle.current += 90;\n          arrow.current = new fabric.Triangle({\n            angle: angle.current,\n            fill: pickerFill,\n            top: line.current.y2,\n            left: line.current.x2,\n            width: 15,\n            height: 15,\n            originX: \"center\",\n            originY: \"center\",\n            stroke: pickerStroke,\n            strokeWidth: strokeWidth\n          });\n          canvas.add(line.current);\n          canvas.add(arrow.current);\n          canvas.renderAll();\n          newShape.current = false;\n        } else {\n          canvas.remove(line.current);\n          canvas.remove(arrow.current);\n          selectedShape.current = new fabric.Group([line.current, arrow.current], {\n            hasBorders: true,\n            hasControls: true,\n            selectable: false,\n            hoverCursor: \"default\",\n            originX: \"center\",\n            originY: \"center\"\n          });\n          shapeCount.current = shapeCount.current + 1;\n          selectedShape.current.set(\"name\", \"shape-arrow-\" + shapeCount.current + 1);\n          canvas.add(selectedShape.current);\n          canvas.setActiveObject(selectedShape.current); // document.getElementById(\"select\").click();\n\n          newShape.current = true; // Save the canvas to State variable\n\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n\n      if (canvasTool === \"polyline\") {\n        if (newShape.current) {\n          polyPoints.current = [];\n          isDrawing.current = true;\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          polyPoints.current.push(pointer.current);\n          line.current = new fabric.Line([pointer.current.x, pointer.current.y, pointer.current.x, pointer.current.y], {\n            stroke: pickerStroke,\n            strokeWidth: strokeWidth,\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            lockMovementX: true,\n            lockMovementY: true,\n            hoverCursor: \"default\",\n            originX: \"center\",\n            originY: \"center\",\n            padding: 15\n          });\n          canvas.add(line.current); //polyLines.current.push(polyline);\n\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          line.current.set({\n            x1: pointer.current.x,\n            y1: pointer.current.y\n          });\n          polyPoints.current.push(pointer.current);\n\n          if (polyPoints.current.length > 1) {\n            var startPoint = polyPoints.current[polyPoints.current.length - 2];\n            var endPoint = polyPoints.current[polyPoints.current.length - 1];\n            var evt = e.e;\n\n            if (evt.shiftKey === true) {\n              if (Math.abs(pointer.current.x - startPoint.x) > Math.abs(pointer.current.y - startPoint.y)) {\n                console.log(\"line should be horizontally strait\");\n                endPoint.y = startPoint.y;\n                line.current.set({\n                  x1: pointer.current.x,\n                  y1: endPoint.y\n                });\n              } else {\n                console.log(\"line should be vertically strait\");\n                endPoint.x = startPoint.x;\n                line.current.set({\n                  x1: startPoint.x,\n                  y1: pointer.current.y\n                });\n              }\n\n              polyPoints.current.pop();\n              polyPoints.current.push(endPoint);\n            }\n\n            var newPolyLine = new fabric.Line([startPoint.x, startPoint.y, endPoint.x, endPoint.y], {\n              stroke: pickerStroke,\n              strokeWidth: strokeWidth,\n              hasControls: false,\n              hasBorders: false,\n              selectable: false,\n              lockMovementX: true,\n              lockMovementY: true,\n              hoverCursor: \"default\",\n              originX: \"center\",\n              originY: \"center\",\n              padding: 15\n            });\n            var distance = Math.sqrt(Math.pow(origX.current - pointer.current.x, 2) + Math.pow(origY.current - pointer.current.y, 2));\n            console.log(distance);\n\n            if (distance < 20) {\n              if (window.confirm(\"Close the shape? Press OK to close it. Cancel to keep the shape open.\")) {\n                newPolyLine.set({\n                  x2: origX.current,\n                  y2: origY.current\n                });\n                canvas.add(newPolyLine);\n                canvas.renderAll();\n                polyLines.current.push(newPolyLine);\n                canvas.remove(line.current);\n\n                for (var i = 0; i < polyLines.current.length; i++) {\n                  canvas.remove(polyLines.current[i]);\n                }\n\n                newShape.current = true;\n                isDrawing.current = false;\n                polyLine.current = null;\n                polyPoints.current.pop();\n                polyPoints.current.push(polyPoints.current[0]);\n                console.log(polyPoints.current);\n                polyLine.current = new fabric.Polygon(polyPoints.current, {\n                  stroke: pickerStroke,\n                  fill: pickerFill,\n                  strokeWidth: strokeWidth,\n                  padding: 15,\n                  selectable: false,\n                  hoverCursor: \"default\",\n                  name: \"shape-polygon-\" + shapeCount.current\n                }); // console.log(fill);\n\n                canvas.add(polyLine.current);\n                canvas.setActiveObject(polyLine.current); // document.getElementById(\"select\").click();\n\n                editPoly.current = true;\n                canvas.renderAll();\n                shapeCount.current++;\n                const newCanvasState = canvas.toJSON([\"name\"]);\n                saveCanvasState(newCanvasState);\n                return;\n              } else {\n                // Do nothing!\n                console.log(\"Shape still open double click to finish\");\n              }\n            }\n\n            canvas.add(newPolyLine);\n            polyLines.current.push(newPolyLine);\n            canvas.renderAll();\n          }\n        }\n      }\n\n      if (canvasTool === \"polygon\") {\n        if (newShape.current) {\n          polyPoints.current = [];\n          isDrawing.current = true;\n          pointer.current = canvas.getPointer(e);\n          polyPoints.current.push(pointer.current);\n          line.current = new fabric.Line([pointer.current.x, pointer.current.y, pointer.current.x, pointer.current.y], {\n            stroke: pickerStroke,\n            strokeWidth: strokeWidth,\n            padding: 15,\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            lockMovementX: true,\n            lockMovementY: true,\n            hoverCursor: \"default\",\n            originX: \"center\",\n            originY: \"center\"\n          });\n          canvas.add(line.current);\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          line.current.set({\n            x1: pointer.current.x,\n            y1: pointer.current.y\n          });\n          polyPoints.current.push(pointer.current);\n\n          if (polyPoints.current.length > 1) {\n            startPoint = polyPoints.current[polyPoints.current.length - 2];\n            endPoint = polyPoints.current[polyPoints.current.length - 1];\n            newPolyLine = new fabric.Line([startPoint.x, startPoint.y, endPoint.x, endPoint.y], {\n              stroke: pickerStroke,\n              strokeWidth: strokeWidth,\n              padding: 15,\n              hasControls: false,\n              hasBorders: false,\n              selectable: false,\n              lockMovementX: true,\n              lockMovementY: true,\n              hoverCursor: \"default\",\n              originX: \"center\",\n              originY: \"center\"\n            });\n            canvas.add(newPolyLine);\n            polyLines.current.push(newPolyLine);\n            canvas.renderAll();\n          }\n        }\n      }\n\n      if (canvasTool === \"rpolygon\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          rpolygon.current = new fabric.Polygon(calcPolygonPoints(8, Math.abs(origX.current - pointer.current.x) / 2), {\n            objectCaching: false,\n            left: origX.current,\n            top: origY.current,\n            originX: \"center\",\n            originY: \"center\",\n            fill: pickerFill,\n            perPixelTargetFind: false,\n            strokeWidth: strokeWidth,\n            stroke: pickerStroke,\n            hasControls: false,\n            hasBorders: false,\n            padding: 15,\n            name: \"shape-rpolygon-\" + shapeCount.current\n          });\n          canvas.add(rpolygon.current);\n          newShape.current = false;\n          shapeCount.current++;\n        } else {\n          newShape.current = true;\n          var matrix = rpolygon.current.calcTransformMatrix();\n          var transformedPoints = rpolygon.current.get(\"points\").map(function (p) {\n            return new fabric.Point(p.x - rpolygon.current.pathOffset.x, p.y - rpolygon.current.pathOffset.y);\n          }).map(function (p) {\n            return fabric.util.transformPoint(p, matrix);\n          });\n          canvas.remove(rpolygon.current);\n          var updatedPoly = new fabric.Polygon(transformedPoints, {\n            fill: pickerFill,\n            stroke: pickerStroke,\n            padding: 15,\n            name: \"shape-rpolygon-\" + shapeCount.current,\n            // hasControls: false,\n            // hasBorders: false,\n            //selectable: false,\n            hoverCursor: \"default\"\n          });\n          updatedPoly.set({\n            originX: \"center\",\n            originY: \"center\",\n            left: origX.current + updatedPoly.width / 2,\n            top: origY.current + updatedPoly.height / 2\n          });\n          canvas.add(updatedPoly);\n          canvas.setActiveObject(updatedPoly); //  document.getElementById(\"select\").click();\n\n          canvas.renderAll(); // Save the canvas to State variable\n\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n\n      if (canvasTool === \"rect\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          Rectangle.current = new fabric.Rect({\n            left: origX.current,\n            top: origY.current,\n            fill: pickerFill,\n            stroke: pickerStroke,\n            strokeWidth: strokeWidth,\n            padding: 15,\n            strokeDashArray: [dashSize, gapSize],\n            centeredScaling: true,\n            opacity: opacity,\n            selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-rect-\" + shapeCount.current\n          });\n          shapeCount.current++;\n          canvas.add(Rectangle.current);\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n\n          if (origX.current > pointer.current.x) {\n            Rectangle.current.set({\n              left: Math.abs(pointer.current.x)\n            });\n          }\n\n          if (origY.current > pointer.current.y) {\n            Rectangle.current.set({\n              top: Math.abs(pointer.current.y)\n            });\n          }\n\n          Rectangle.current.set({\n            width: Math.abs(origX.current - pointer.current.x)\n          });\n          Rectangle.current.set({\n            height: Math.abs(origY.current - pointer.current.y)\n          });\n          Rectangle.current.set({\n            originX: \"center\",\n            originY: \"center\",\n            left: origX.current + Rectangle.current.width / 2,\n            top: origY.current + Rectangle.current.height / 2\n          });\n          newShape.current = true;\n          canvas.setActiveObject(Rectangle.current); //  document.getElementById(\"select\").click();\n\n          canvas.renderAll(); // Save the canvas to State variable\n\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n\n      if (canvasTool === \"arc\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          circle.current = new fabric.Circle({\n            left: origX.current,\n            top: origY.current,\n            originX: \"left\",\n            originY: \"top\",\n            radius: pointer.current.x - origX.current,\n            angle: 45,\n            startAngle: 0,\n            endAngle: Math.PI,\n            fill: pickerFill,\n            stroke: pickerStroke,\n            strokeWidth: strokeWidth,\n            padding: 15,\n            selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-arc-\" + shapeCount.current\n          });\n          canvas.add(circle.current);\n          newShape.current = false;\n          shapeCount.current++;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          var radius = Math.max(Math.abs(origY.current - pointer.current.y), Math.abs(origX.current - pointer.current.x)) / 2;\n\n          if (radius > circle.current.strokeWidth) {\n            radius -= circle.current.strokeWidth / 2;\n          }\n\n          circle.current.set({\n            radius: radius\n          });\n\n          if (origX.current > pointer.current.x) {\n            circle.current.set({\n              originX: \"right\"\n            });\n          } else {\n            circle.current.set({\n              originX: \"left\"\n            });\n          }\n\n          if (origY.current > pointer.current.y) {\n            circle.current.set({\n              originY: \"bottom\"\n            });\n          } else {\n            circle.current.set({\n              originY: \"top\"\n            });\n          }\n\n          newShape.current = true;\n          canvas.setActiveObject(circle.current); // document.getElementById(\"select\").click();\n\n          canvas.renderAll(); // Save the canvas to State variable\n\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n\n      if (canvasTool === \"circle\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          circle.current = new fabric.Circle({\n            left: origX.current,\n            top: origY.current,\n            originX: \"left\",\n            originY: \"top\",\n            radius: pointer.current.x - origX.current,\n            angle: 0,\n            fill: pickerFill,\n            stroke: pickerStroke,\n            strokeWidth: strokeWidth,\n            padding: 15,\n            selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-circle-\" + shapeCount.current\n          });\n          canvas.add(circle.current);\n          newShape.current = false;\n          shapeCount.current++;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          radius = Math.max(Math.abs(origY.current - pointer.current.y), Math.abs(origX.current - pointer.current.x)) / 2;\n\n          if (radius > circle.current.strokeWidth) {\n            radius -= circle.current.strokeWidth / 2;\n          }\n\n          radius += someValue.current;\n          circle.current.set({\n            radius: radius\n          });\n\n          if (origX.current > pointer.current.x) {\n            circle.current.set({\n              originX: \"right\"\n            });\n          } else {\n            circle.current.set({\n              originX: \"left\"\n            });\n          }\n\n          if (origY.current > pointer.current.y) {\n            circle.current.set({\n              originY: \"bottom\"\n            });\n          } else {\n            circle.current.set({\n              originY: \"top\"\n            });\n          }\n\n          circle.current.set({\n            originX: \"center\",\n            originY: \"center\",\n            left: origX.current + circle.current.radius,\n            top: origY.current + circle.current.radius\n          });\n          newShape.current = true;\n          canvas.setActiveObject(circle.current); //  document.getElementById(\"select\").click();\n\n          canvas.renderAll(); // Save the canvas to State variable\n\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n\n      if (canvasTool === \"ellipse\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          ellipse.current = new fabric.Ellipse({\n            left: origX.current,\n            top: origY.current,\n            originX: \"left\",\n            originY: \"top\",\n            rx: pointer.current.x - origX.current,\n            ry: pointer.current.y - origY.current,\n            angle: 0,\n            fill: pickerFill,\n            stroke: pickerStroke,\n            strokeWidth: strokeWidth,\n            padding: 15,\n            type: \"ellipse\",\n            selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-ellipse-\" + shapeCount.current\n          });\n          canvas.add(ellipse.current);\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          var rx = Math.abs(origX.current - pointer.current.x) / 2;\n          var ry = Math.abs(origY.current - pointer.current.y) / 2;\n          rx += someValue.current;\n          ry += someValue.current;\n\n          if (rx > ellipse.current.strokeWidth) {\n            rx -= ellipse.current.strokeWidth / 2;\n          }\n\n          if (ry > ellipse.current.strokeWidth) {\n            ry -= ellipse.current.strokeWidth / 2;\n          }\n\n          ellipse.current.set({\n            rx: rx,\n            ry: ry\n          });\n\n          if (origX.current > pointer.current.x) {\n            ellipse.current.set({\n              originX: \"right\"\n            });\n          } else {\n            ellipse.current.set({\n              originX: \"left\"\n            });\n          }\n\n          if (origY.current > pointer.current.y) {\n            ellipse.current.set({\n              originY: \"bottom\"\n            });\n          } else {\n            ellipse.current.set({\n              originY: \"top\"\n            });\n          }\n\n          ellipse.current.set({\n            originX: \"center\",\n            originY: \"center\",\n            left: origX.current + ellipse.current.rx,\n            top: origY.current + ellipse.current.ry\n          });\n          newShape.current = true;\n          canvas.setActiveObject(ellipse.current); // document.getElementById(\"select\").click();\n\n          canvas.renderAll(); // Save the canvas to State variable\n\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      } //check if user clicked an object\n\n\n      if (e.target) {\n        evt = e.e;\n\n        if (evt.altKey === true) {\n          if (e.target.name.includes(\"anchor\")) {\n            console.log(e.target);\n            var editable = openPoly.current;\n            var newPoints = editable.get(\"points\");\n            console.log(newPoints.length);\n            if (newPoints.length <= 3) return;\n            canvas.remove(e.target);\n            var pFill = editable.get(\"fill\");\n            var pStroke = editable.get(\"stroke\");\n            var pName = editable.get(\"name\");\n            var id = e.target.name.split(\"-\");\n            var pointIndex = parseInt(id[2]);\n            var cloneArray = newPoints.slice();\n            cloneArray.splice(pointIndex, 1);\n            console.log(newPoints);\n            console.log(cloneArray); //canvas.remove(openPoly.current);\n\n            editable.set({\n              points: cloneArray\n            });\n            console.log(editable);\n            /*\n            var updatedPoly = new fabric.Polyline(cloneArray, {\n              fill: pFill,\n              stroke: pStroke,\n              name: pName,\n              hasControls: false,\n              hasBorders: false,\n              selectable: false,\n              hoverCursor: \"default\",\n            });\n            canvas.add(updatedPoly);\n            canvas.sendToBack(updatedPoly);\n            */\n\n            canvas.renderAll(); //anchors.current = [];\n          }\n        }\n\n        if (!editPoly.current) return;\n        var activeShape = canvas.getActiveObject(); //if (activeShape.length > 1) return;\n        //        console.log(activeShape.type);\n\n        if (activeShape) {\n          console.log(activeShape); // if (activeShape.stroke && activeShape.type !== \"i-text\") {\n          //   if (currentStroke.current !== null) {\n          //     var rgba = currentStroke.current\n          //       .substr(5)\n          //       .split(\")\")[0]\n          //       .split(\",\");\n          //     setStrokeColor({\n          //       r: rgba[0],\n          //       g: rgba[1],\n          //       b: rgba[2],\n          //       a: rgba[3],\n          //     });\n          //     //if()\n          //     console.log(activeShape.stroke);\n          //     setPickerColor(activeShape.stroke);\n          //     currentStroke.current = activeShape.stroke;\n          //     // activeObjectStrokeRef.current();\n          //     if (activeObjectStrokeRef?.current) {\n          //       activeObjectStrokeRef.current(activeShape.stroke);\n          //     }\n          //   }\n          //   setStrokeWidth(activeShape.strokeWidth);\n          // } else {\n          //   if (activeObjectStrokeRef?.current) {\n          //     activeObjectStrokeRef.current(\"nill\");\n          //   }\n          // }\n\n          if (activeShape.stroke !== null && activeShape.type !== \"i-text\") {\n            // setPickerColorStroke(activeShape.stroke);\n            if (activeObjectStrokeRef === null || activeObjectStrokeRef === void 0 ? void 0 : activeObjectStrokeRef.current) {\n              activeObjectStrokeRef.current(activeShape.stroke);\n            }\n          } else {\n            if (activeObjectStrokeRef === null || activeObjectStrokeRef === void 0 ? void 0 : activeObjectStrokeRef.current) {\n              activeObjectStrokeRef.current(\"nill\");\n            }\n          }\n\n          if (activeShape.fill) {\n            // setPickerColorFill(activeShape.fill);\n            if (activeObjectFillRef === null || activeObjectFillRef === void 0 ? void 0 : activeObjectFillRef.current) {\n              activeObjectFillRef.current(activeShape.fill);\n            }\n          } else {\n            if (activeObjectFillRef === null || activeObjectFillRef === void 0 ? void 0 : activeObjectFillRef.current) {\n              activeObjectFillRef.current(\"nill\");\n            } // console.log(activeShape.fill);\n            // rgba = activeShape.fill.substr(5).split(\")\")[0].split(\",\");\n            // setFillColor({ r: rgba[0], g: rgba[1], b: rgba[2], a: rgba[3] });\n\n          } //console.log(activeShape.opacity);\n\n\n          if (Number.isNaN(activeShape.opacity)) setOpacity(100);else setOpacity(activeShape.opacity * 100); //setOpacity(activeShape.opacity * 100);\n          //setFont(activeShape.fontFamily);\n          ///setFontSize(activeShape.fontSize);\n          //setFontWeight(activeShape.fontWeight);\n          //setFontStyle(activeShape.fontStyle);\n        }\n      }\n    });\n    canvas.on(\"mouse:wheel\", function (opt) {\n      var delta = opt.e.deltaY;\n      var zoom = canvas.getZoom();\n      zoom *= 0.999 ** delta;\n      if (zoom > 20) zoom = 20;\n      if (zoom < 0.01) zoom = 0.01;\n      canvas.zoomToPoint({\n        x: opt.e.offsetX,\n        y: opt.e.offsetY\n      }, zoom);\n      opt.e.preventDefault();\n      opt.e.stopPropagation();\n      var vpt = this.viewportTransform;\n\n      if (zoom < 400 / 1000) {\n        vpt[4] = 200 - 1000 * zoom / 2;\n        vpt[5] = 200 - 1000 * zoom / 2;\n      } else {\n        if (vpt[4] >= 0) {\n          vpt[4] = 0;\n        } else if (vpt[4] < canvas.getWidth() - 1000 * zoom) {\n          vpt[4] = canvas.getWidth() - 1000 * zoom;\n        }\n\n        if (vpt[5] >= 0) {\n          vpt[5] = 0;\n        } else if (vpt[5] < canvas.getHeight() - 1000 * zoom) {\n          vpt[5] = canvas.getHeight() - 1000 * zoom;\n        }\n      }\n    }); //object.on\n\n    canvas.on(\"mouse:down\", function (opt) {\n      if (canvasTool !== \"select\") {\n        this.selection = false;\n      }\n\n      var evt = opt.e;\n\n      if (opt.button === 2) {\n        this.isDragging = true;\n        this.selection = false;\n        this.lastPosX = evt.clientX;\n        this.lastPosY = evt.clientY;\n      } // if (opt.button === 3) {\n      //   setCanvasTool(\"select\");\n      //   setActiveTool(evt, \"select\");\n      //   //document.getElementById(\"select\").click();\n      //   // canvas.renderAll();\n      //   //this.selection = true;\n      //   canvasRef.current.click();\n      //   //return;\n      // }\n\n\n      if (opt.e.altKey) {\n        if (evt.target) {\n          var temp, oObjectType;\n          var oObject = canvas.getActiveObject();\n\n          if (oObject) {\n            oObjectType = oObject.get(\"type\");\n            oObject.clone(function (cloned) {\n              temp = cloned;\n            });\n            shapeCount.current = shapeCount.current + 1;\n            temp.set({\n              hasControls: false,\n              hasBorders: false,\n              name: oObjectType + shapeCount.current\n            });\n            canvas.add(temp);\n            canvas.renderAll(); // Save the canvas to State variable\n\n            const newCanvasState = canvas.toJSON([\"name\"]);\n            saveCanvasState(newCanvasState);\n          }\n        }\n      }\n    });\n    canvas.on(\"mouse:move\", function (opt) {\n      if (this.isDragging) {\n        var e = opt.e;\n        var vpt = this.viewportTransform;\n        vpt[4] += e.clientX - this.lastPosX;\n        vpt[5] += e.clientY - this.lastPosY;\n        this.requestRenderAll();\n        this.lastPosX = e.clientX;\n        this.lastPosY = e.clientY;\n      }\n\n      if (newShape.current === true && canvasTool !== \"pen\") {\n        return;\n      }\n\n      if (canvasTool === \"rect\") {\n        mouseMoving.current = true;\n        pointer.current = canvas.getPointer(opt);\n\n        if (origX.current > pointer.current.x) {\n          Rectangle.current.set({\n            left: Math.abs(pointer.current.x)\n          });\n        }\n\n        if (origY.current > pointer.current.y) {\n          Rectangle.current.set({\n            top: Math.abs(pointer.current.y)\n          });\n        }\n\n        Rectangle.current.set({\n          width: Math.abs(origX.current - pointer.current.x)\n        });\n        Rectangle.current.set({\n          height: Math.abs(origY.current - pointer.current.y)\n        });\n        canvas.requestRenderAll();\n      }\n\n      if (canvasTool === \"line\") {\n        mouseMoving.current = true;\n        pointer.current = canvas.getPointer(opt);\n\n        if (opt.e.shiftKey) {\n          var {\n            tx,\n            ty\n          } = determineAdjustedCoords(line.current.x1, line.current.y1, pointer.current.x, pointer.current.y);\n          line.current.set({\n            x2: tx,\n            y2: ty\n          }); // var deltaX = Math.abs(pointer.current.x - line.current.x1);\n          // var deltaY = Math.abs(pointer.current.y - line.current.y1);\n          // if (deltaX > deltaY)\n          //   line.current.set({ x2: pointer.current.x, y2: line.current.y1 });\n          // if (deltaY > deltaX)\n          //   line.current.set({ x2: line.current.x1, y2: pointer.current.y });\n        } else line.current.set({\n          x2: pointer.current.x,\n          y2: pointer.current.y\n        });\n\n        canvas.renderAll();\n      }\n\n      if (canvasTool === \"arrow\") {\n        mouseMoving.current = true;\n        pointer.current = canvas.getPointer(opt);\n\n        if (opt.e.shiftKey) {\n          var {\n            tx,\n            ty\n          } = determineAdjustedCoords(line.current.x1, line.current.y1, pointer.current.x, pointer.current.y);\n          line.current.set({\n            x2: tx,\n            y2: ty\n          }); // var deltaX = Math.abs(pointer.current.x - line.current.x1);\n          // var deltaY = Math.abs(pointer.current.y - line.current.y1);\n          // if (deltaX > deltaY)\n          //   line.current.set({ x2: pointer.current.x, y2: line.current.y1 });\n          // if (deltaY > deltaX)\n          //   line.current.set({ x2: line.current.x1, y2: pointer.current.y });\n        } else line.current.set({\n          x2: pointer.current.x,\n          y2: pointer.current.y\n        });\n\n        let dx = line.current.x2 - line.current.x1,\n            dy = line.current.y2 - line.current.y1;\n        angle.current = Math.atan2(dy, dx);\n        angle.current *= 180 / Math.PI;\n        angle.current += 90;\n        arrow.current.set({\n          top: line.current.y2,\n          left: line.current.x2,\n          angle: angle.current,\n          width: 15,\n          height: 15\n        });\n        canvas.renderAll();\n      }\n\n      if (canvasTool === \"polyline\") {\n        if (isDrawing.current) {\n          mouseMoving.current = true;\n          var endPoint = canvas.getPointer(opt);\n          var evt = opt.e;\n\n          if (evt.shiftKey === true) {\n            if (Math.abs(endPoint.x - line.current.x1) > Math.abs(endPoint.y - line.current.y1)) {\n              console.log(\"line should be horizontally strait\");\n              line.current.set({\n                x2: endPoint.x,\n                y2: line.current.y1\n              });\n              canvas.renderAll();\n              return;\n            } else {\n              console.log(\"line should be vertically strait\");\n              line.current.set({\n                x2: line.current.x1,\n                y2: endPoint.y\n              });\n              canvas.renderAll();\n              return;\n            }\n          }\n\n          line.current.set({\n            x2: endPoint.x,\n            y2: endPoint.y\n          });\n          canvas.renderAll();\n        }\n      }\n\n      if (canvasTool === \"polygon\") {\n        if (isDrawing.current) {\n          mouseMoving.current = true;\n          endPoint = canvas.getPointer(opt);\n          line.current.set({\n            x2: endPoint.x,\n            y2: endPoint.y\n          });\n          canvas.renderAll();\n        }\n      }\n\n      if (canvasTool === \"rpolygon\") {\n        mouseMoving.current = true;\n        pointer.current = canvas.getPointer(opt);\n        rpolygon.current.set({\n          points: calcPolygonPoints(8, Math.abs(origX.current - pointer.current.x) / 2),\n          left: origX.current,\n          top: origY.current\n        });\n        canvas.renderAll();\n      }\n\n      if (canvasTool === \"arc\") {\n        mouseMoving.current = true;\n        pointer.current = canvas.getPointer(opt);\n        var radius = Math.max(Math.abs(origY.current - pointer.current.y), Math.abs(origX.current - pointer.current.x)) / 2;\n\n        if (radius > circle.current.strokeWidth) {\n          radius -= circle.current.strokeWidth / 2;\n        }\n\n        circle.current.set({\n          radius: radius\n        });\n\n        if (origX.current > pointer.current.x) {\n          circle.current.set({\n            originX: \"right\"\n          });\n          circle.current.set({\n            angle: -135\n          });\n        } else {\n          circle.current.set({\n            originX: \"left\"\n          });\n          circle.current.set({\n            angle: 135\n          });\n        }\n\n        if (origY.current > pointer.current.y) {\n          circle.current.set({\n            originY: \"bottom\"\n          });\n        } else {\n          circle.current.set({\n            originY: \"top\"\n          });\n        }\n\n        canvas.renderAll();\n      }\n\n      if (canvasTool === \"circle\") {\n        mouseMoving.current = true;\n        pointer.current = canvas.getPointer(opt);\n        someValue.current = Math.max(Math.abs(origX.current - pointer.current.x), Math.abs(origY.current - pointer.current.y)) / 20;\n        radius = Math.max(Math.abs(origX.current - pointer.current.x), Math.abs(origY.current - pointer.current.y)) / 2; // radius = Math.abs(origX.current - pointer.current.x) / 2;\n\n        radius += someValue.current;\n\n        if (radius > circle.current.strokeWidth) {\n          radius -= circle.current.strokeWidth / 2;\n        }\n\n        circle.current.set({\n          radius: radius\n        });\n\n        if (origX.current > pointer.current.x) {\n          circle.current.set({\n            originX: \"right\"\n          });\n        } else {\n          circle.current.set({\n            originX: \"left\"\n          });\n        }\n\n        if (origY.current > pointer.current.y) {\n          circle.current.set({\n            originY: \"bottom\"\n          });\n        } else {\n          circle.current.set({\n            originY: \"top\"\n          });\n        }\n\n        canvas.renderAll();\n      }\n\n      if (canvasTool === \"ellipse\") {\n        mouseMoving.current = true;\n        pointer.current = canvas.getPointer(opt);\n        var rx = Math.abs(origX.current - pointer.current.x) / 2;\n        var ry = Math.abs(origY.current - pointer.current.y) / 2;\n        someValue.current = Math.max(Math.abs(origX.current - pointer.current.x), Math.abs(origY.current - pointer.current.y)) / 20;\n        rx += someValue.current;\n        ry += someValue.current;\n\n        if (rx > ellipse.current.strokeWidth) {\n          rx -= ellipse.current.strokeWidth / 2;\n        }\n\n        if (ry > ellipse.current.strokeWidth) {\n          ry -= ellipse.current.strokeWidth / 2;\n        }\n\n        ellipse.current.set({\n          rx: rx,\n          ry: ry\n        });\n\n        if (origX.current > pointer.current.x) {\n          ellipse.current.set({\n            originX: \"right\"\n          });\n        } else {\n          ellipse.current.set({\n            originX: \"left\"\n          });\n        }\n\n        if (origY.current > pointer.current.y) {\n          ellipse.current.set({\n            originY: \"bottom\"\n          });\n        } else {\n          ellipse.current.set({\n            originY: \"top\"\n          });\n        }\n\n        canvas.renderAll();\n      }\n    });\n    canvas.on(\"mouse:over\", function (e) {\n      /*\n      if (e.target) {\n        //console.log(currentStroke.current);\n        currentStroke.current = e.target.get(\"stroke\");\n        //console.log(currentStroke.current);\n        e.target.set(\"stroke\", \"rgba(255,0,0,1)\");\n        canvas.renderAll();\n      }\n      */\n    });\n    canvas.on(\"mouse:out\", function (e) {\n      /*\n      if (e.target) {\n        e.target.set(\"stroke\", currentStroke.current);\n        canvas.renderAll();\n      }\n      */\n    });\n    setCanvas(canvas);\n    return () => {\n      canvas.dispose();\n      imgFileRef.current.removeEventListener(\"change\", handleImageFileLoad);\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, [canvasRef, canvasTool, setCanvas]); //const onUndo = useCallback(() => moveHistory(-1), [moveHistory]);\n\n  const onUndo = () => {\n    const present = past.pop();\n    const newFuture = [present, ...future];\n    setFuture(newFuture);\n    const previous = past[past.length - 1];\n    canvas.loadFromJSON(previous);\n    setPast(past);\n    console.log(past);\n  }; // const onRedo = useCallback(() => moveHistory(1), [moveHistory]);\n\n\n  const onRedo = () => {\n    const next = future[0];\n    canvas.loadFromJSON(next);\n    const newFuture = future.slice(1);\n    past.push(next);\n    setPast(past);\n    setFuture(newFuture);\n    console.log(future);\n  };\n\n  const setShapeAttributes = attributes => {\n    if (canvas === undefined) return;\n    var activeShape = canvas.getActiveObject();\n\n    if (activeShape) {\n      var Attributes = attributes || {};\n\n      if (activeShape.type === \"group\") {\n        activeShape.item(0).set({\n          stroke: Attributes.stroke || activeShape.item(1).stroke,\n          strokeWidth: Attributes.strokeWidth || activeShape.item(1).strokeWidth\n        });\n        activeShape.item(1).set({\n          stroke: Attributes.stroke || activeShape.item(1).stroke,\n          strokeWidth: Attributes.strokeWidth || activeShape.item(1).strokeWidth,\n          fill: Attributes.fill || activeShape.item(1).fill\n        });\n      }\n\n      activeShape.set({\n        strokeWidth: Attributes.strokeWidth || activeShape.strokeWidth,\n        stroke: Attributes.stroke === \"nill\" ? null : Attributes.stroke || activeShape.stroke,\n        fill: Attributes.fill === \"nill\" ? null : Attributes.fill || activeShape.fill,\n        opacity: Attributes.opacity / 100 || activeShape.opacity,\n        strokeDashArray: Attributes.strokeDashArray || activeShape.strokeDashArray,\n        fontFamily: Attributes.fontFamily || activeShape.fontFamily,\n        fontSize: Attributes.fontSize || activeShape.fontSize,\n        fontWeight: Attributes.fontWeight || activeShape.fontWeight,\n        fontStyle: Attributes.fontStyle || activeShape.fontStyle,\n        textBackgroundColor: Attributes.textBackgroundColor || activeShape.textBackgroundColor\n      });\n      canvas.renderAll();\n      canvas.setActiveObject(activeShape);\n      const newCanvasState = canvas.toJSON([\"name\"]);\n      saveCanvasState(newCanvasState);\n    }\n  };\n\n  function deleteObjects() {\n    if (canvas.getActiveObjects().length === 0) {\n      // window.location.reload();\n      return;\n    }\n\n    canvas.getActiveObjects().forEach(obj => {\n      canvas.remove(obj);\n    });\n  }\n  /*\n  var simulateMouseEvent = function (element, eventName, coordX, coordY) {\n    element.dispatchEvent(\n      new MouseEvent(eventName, {\n        view: window,\n        bubbles: true,\n        cancelable: true,\n        clientX: coordX,\n        clientY: coordY,\n        button: 0,\n      })\n    );\n  };\n   \n  function hexToRGB(hex, alpha) {\n    var r = parseInt(hex.slice(1, 3), 16),\n      g = parseInt(hex.slice(3, 5), 16),\n      b = parseInt(hex.slice(5, 7), 16);\n    if (alpha) {\n      return \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + alpha + \")\";\n    } else {\n      return \"rgb(\" + r + \", \" + g + \", \" + b + \")\";\n    }\n  }\n  */\n\n\n  function w3_openPanel(evt, panelId) {\n    if (currentOpenPanel !== panelId) {\n      document.getElementById(\"Library\").style.height = \"400px\";\n      document.getElementById(panelId).style.display = \"block\";\n      if (currentOpenPanel !== \"none\") document.getElementById(currentOpenPanel).style.display = \"none\";\n      currentOpenPanel = panelId;\n      return;\n    }\n\n    if (currentOpenPanel === panelId) {\n      if (panelId === \"none\") return;\n      document.getElementById(panelId).style.display = \"none\";\n      currentOpenPanel = \"none\";\n      document.getElementById(\"Library\").style.height = \"0px\";\n    }\n    /*\n    else {\n      if (currentOpenPanel !== \"None\") {\n        document.getElementById(currentOpenPanel).style.display = \"none\";\n      }\n      document.getElementById(\"Library\").style.height = \"400px\";\n      document.getElementById(panelId).style.display = \"block\";\n      currentOpenPanel = panelId;\n    }\n    */\n\n  }\n\n  const setActiveTool = (e, id) => {\n    if (currentToolId.current !== null) {\n      //console.log(currentToolId);\n      document.getElementById(currentToolId.current).style.backgroundColor = \"#003059\";\n      document.getElementById(id).style.backgroundColor = \"grey\";\n      currentToolId.current = id;\n      return;\n    } else {\n      //console.log(id);\n      document.getElementById(id).style.backgroundColor = \"grey\";\n      currentToolId.current = id;\n    }\n  };\n\n  function handleKeyDown(event) {\n    if (mouseMoving.current === false) {\n      if (event.key === \"Escape\") {\n        setCanvasTool(\"select\");\n        setActiveTool(event, \"select\");\n        return;\n      }\n\n      if (event.key === \"s\") {\n        setCanvasTool(\"select\");\n        setActiveTool(event, \"select\");\n        return;\n      }\n\n      if (event.key === \"r\") {\n        setCanvasTool(\"rect\");\n        setActiveTool(event, \"rect\");\n        return;\n      }\n\n      if (event.key === \"l\") {\n        setCanvasTool(\"line\");\n        setActiveTool(event, \"line\");\n        return;\n      }\n\n      if (event.key === \"a\") {\n        setCanvasTool(\"arrow\");\n        setActiveTool(event, \"arrow\");\n        return;\n      }\n\n      if (event.key === \"c\") {\n        setCanvasTool(\"circle\");\n        setActiveTool(event, \"circle\");\n        return;\n      }\n\n      if (event.key === \"e\") {\n        setCanvasTool(\"ellipse\");\n        setActiveTool(event, \"ellipse\");\n        return;\n      }\n\n      if (event.key === \"t\") {\n        setCanvasTool(\"text\");\n        setActiveTool(event, \"text\");\n        return;\n      }\n\n      if (event.key === \"p\") {\n        setCanvasTool(\"pen\");\n        setActiveTool(event, \"pen\");\n        return;\n      }\n\n      if (event.key === \"Delete\") {\n        deleteObjects();\n        return;\n      }\n\n      if (event.ctrlKey && event.key === \"z\") {\n        if (past.length === 1) return;\n        onUndo();\n        return;\n      }\n\n      if (event.ctrlKey && event.key === \"y\") {\n        if (future.length === 0) return;\n        onRedo();\n        return;\n      }\n    }\n\n    if (mouseMoving.current === true) {\n      mouseMoving.current = false;\n\n      if (event.key === \"Escape\") {\n        if (canvasTool === \"rect\") {\n          canvas.remove(Rectangle.current);\n          newShape.current = true;\n          shapeCount.current--;\n          return;\n        }\n\n        if (canvasTool === \"line\") {\n          canvas.remove(line.current);\n          newShape.current = true;\n          shapeCount.current--;\n          return;\n        }\n\n        if (canvasTool === \"arrow\") {\n          canvas.remove(line.current);\n          canvas.remove(arrow.current);\n          newShape.current = true;\n          return;\n        }\n\n        if (canvasTool === \"polyline\") {\n          canvas.remove(line.current); //canvas.remove(polyLine.current);\n\n          newShape.current = true;\n          return;\n        }\n\n        if (canvasTool === \"polygon\") {\n          canvas.remove(line.current);\n          newShape.current = true;\n          return;\n        }\n\n        if (canvasTool === \"rpolygon\") {\n          canvas.remove(rpolygon.current);\n          newShape.current = true;\n          shapeCount.current--;\n          return;\n        }\n\n        if (canvasTool === \"arc\") {\n          canvas.remove(circle.current);\n          newShape.current = true;\n          shapeCount.current--;\n          return;\n        }\n\n        if (canvasTool === \"circle\") {\n          canvas.remove(circle.current);\n          newShape.current = true;\n          shapeCount.current--;\n          return;\n        }\n\n        if (canvasTool === \"ellipse\") {\n          canvas.remove(ellipse.current);\n          newShape.current = true;\n          shapeCount.current--;\n          return;\n        }\n      } //setActiveTool(event, \"select\");\n\n    }\n  }\n\n  let url = \"#\";\n  const swatchStyles = reactCSS({\n    default: {\n      stroke: {\n        width: \"36px\",\n        height: \"14px\",\n        borderRadius: \"2px\",\n        background: `rgba(${stroke.r}, ${stroke.g}, ${stroke.b}, ${stroke.a})`\n      },\n      blank: {\n        width: \"36px\",\n        height: \"14px\",\n        borderRadius: \"2px\"\n      },\n      fill: {\n        width: \"36px\",\n        height: \"14px\",\n        borderRadius: \"2px\",\n        background: `rgba(${fill.r}, ${fill.g}, ${fill.b}, ${fill.a})`\n      },\n      highlight: {\n        width: \"36px\",\n        height: \"14px\",\n        borderRadius: \"2px\",\n        background: `rgba(${textHighlight.r}, ${textHighlight.g}, ${textHighlight.b}, ${textHighlight.a})`\n      },\n      swatch: {\n        padding: \"0px\",\n        background: \"#fff\",\n        borderRadius: \"1px\",\n        boxShadow: \"0 0 0 1px rgba(0,0,0,.1)\",\n        display: \"inline-block\",\n        cursor: \"pointer\",\n        backgroundImage: \"url(images/no.png)\"\n      },\n      pickerContainer: {\n        display: \"inline-block\"\n      },\n      popover: {\n        position: \"absolute\",\n        zIndex: \"2\"\n      },\n      cover: {\n        position: \"fixed\",\n        top: \"50px\",\n        right: \"0px\",\n        bottom: \"0px\",\n        left: \"100px\"\n      }\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(MediaQuery, {\n    minDeviceWidth: 1224,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mainDiv,\n      className: \"App\",\n      id: \"mainDiv\",\n      onKeyDown: e => {\n        handleKeyDown(e);\n        document.getElementById(\"my-fabric-canvas\").focus();\n      },\n      tabIndex: -1 // tabIndex=\"0\"\n      ,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: tbStyles.propBar,\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: url,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: tbStyles.buttontoolbar,\n            onClick: onUndo,\n            id: \"undo\" //disabled={canvasHistory[0] === canvasState}\n            ,\n            disabled: past.length === 1,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: tbStyles.tooltipDown,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgUndo,\n                alt: \"Undo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2626,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: tbStyles.tooltiptextDown,\n                children: \"Undo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2627,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2625,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2618,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: tbStyles.buttontoolbar,\n            onClick: onRedo,\n            id: \"redo\" //disabled={canvasHistory[canvasHistory.length - 1] === canvasState}\n            ,\n            disabled: future.length === 0,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: tbStyles.tooltipDown,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgRedo,\n                alt: \"Redo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2638,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: tbStyles.tooltiptextDown,\n                children: \"Redo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2639,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2637,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2630,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: tbStyles.buttontoolbar,\n            onClick: deleteObjects,\n            id: \"del\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: tbStyles.tooltipDown,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgDelete,\n                alt: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2648,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: tbStyles.tooltiptextDown,\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2649,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2647,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2642,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2617,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: tbStyles.dropdown,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: tbStyles.buttontoolbar,\n            id: \"wList\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: imglineWidth,\n              alt: \"Line Width\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2655,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"wlDropDown\",\n              className: tbStyles.dropdowncontent,\n              children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                href: url,\n                onClick: e => {\n                  setStrokeWidth(1);\n                  setShapeAttributes({\n                    strokeWidth: 1\n                  });\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgStroke1,\n                  alt: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2666,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2657,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: url,\n                onClick: e => {\n                  setStrokeWidth(2);\n                  setShapeAttributes({\n                    strokeWidth: 2\n                  });\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgStroke2,\n                  alt: \"2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2677,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2668,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: url,\n                onClick: e => {\n                  setStrokeWidth(4);\n                  setShapeAttributes({\n                    strokeWidth: 4\n                  });\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgStroke4,\n                  alt: \"4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2688,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2679,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: url,\n                onClick: e => {\n                  setStrokeWidth(5);\n                  setShapeAttributes({\n                    strokeWidth: 5\n                  });\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgStroke5,\n                  alt: \"5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2699,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2690,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: url,\n                onClick: e => {\n                  setStrokeWidth(10);\n                  setShapeAttributes({\n                    strokeWidth: 10\n                  });\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgStroke10,\n                  alt: \"10\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2710,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2701,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: url,\n                onClick: e => {\n                  setStrokeWidth(12);\n                  setShapeAttributes({\n                    strokeWidth: 12\n                  });\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgStroke12,\n                  alt: \"12\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2721,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2712,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: url,\n                onClick: e => {\n                  setStrokeWidth(15);\n                  setShapeAttributes({\n                    strokeWidth: 15\n                  });\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgStroke15,\n                  alt: \"15\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2732,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2723,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: url,\n                onClick: e => {\n                  setStrokeWidth(20);\n                  setShapeAttributes({\n                    strokeWidth: 20\n                  });\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgStroke20,\n                  alt: \"20\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2743,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2734,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: url,\n                onClick: e => {\n                  setStrokeWidth(25);\n                  setShapeAttributes({\n                    strokeWidth: 25\n                  });\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgStroke25,\n                  alt: \"25\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2754,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2745,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2656,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2654,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2653,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: tbStyles.dropdown,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: tbStyles.buttontoolbar,\n            id: \"sList\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: imgLineStyle,\n              alt: \"Line Style\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2761,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"lsDropDown\",\n              className: tbStyles.dropdowncontent,\n              children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                href: url,\n                onClick: e => {\n                  setDashSize(0);\n                  setGapSize(0);\n                  setShapeAttributes({\n                    strokeDashArray: [0, 0]\n                  });\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgLineStyle1,\n                  alt: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2773,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2763,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: url,\n                onClick: e => {\n                  setDashSize(10);\n                  setGapSize(5);\n                  setShapeAttributes({\n                    strokeDashArray: [10, 5]\n                  });\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgLineStyle2,\n                  alt: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2785,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2775,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: url,\n                onClick: e => {\n                  setDashSize(10);\n                  setGapSize(5);\n                  setShapeAttributes({\n                    strokeDashArray: [10, 5]\n                  });\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgLineStyle3,\n                  alt: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2797,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2787,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: url,\n                onClick: e => {\n                  setDashSize(20);\n                  setGapSize(5);\n                  setShapeAttributes({\n                    strokeDashArray: [20, 5]\n                  });\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgLineStyle4,\n                  alt: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2809,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2799,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: url,\n                onClick: e => {\n                  setDashSize(20);\n                  setGapSize(10);\n                  setShapeAttributes({\n                    strokeDashArray: [20, 10]\n                  });\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgLineStyle5,\n                  alt: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2821,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2811,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: url,\n                onClick: e => {\n                  setDashSize(5);\n                  setGapSize(5);\n                  setShapeAttributes({\n                    strokeDashArray: [5, 5]\n                  });\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgLineStyle6,\n                  alt: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2833,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2823,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: url,\n                onClick: e => {\n                  setDashSize(2);\n                  setGapSize(2);\n                  setShapeAttributes({\n                    strokeDashArray: [2, 2]\n                  });\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgLineStyle7,\n                  alt: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2845,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2835,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2762,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2760,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2759,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: tbStyles.buttontoolbar,\n          id: \"dropper\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: tbStyles.tooltipDown,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: imgDropper,\n              alt: \"Pick a color\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2852,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: tbStyles.tooltiptextDown,\n              children: \"Pick a color\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2853,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2851,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2850,\n          columnNumber: 11\n        }, this), \"\\xA0Stroke\\xA0\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"strokePoint\",\n          value: strokeWidth,\n          min: \"0\",\n          max: \"50\",\n          onChange: e => {\n            setStrokeWidth(+e.target.value);\n            setShapeAttributes({\n              strokeWidth: +e.target.value\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2857,\n          columnNumber: 11\n        }, this), \"\\xA0Dash\\xA0\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          min: \"0\",\n          max: \"20\",\n          id: \"dashSize\",\n          value: dashSize,\n          onChange: e => {\n            setDashSize(+e.target.value);\n            setShapeAttributes({\n              strokeDashArray: [+e.target.value, +e.target.value]\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2871,\n          columnNumber: 11\n        }, this), \"\\xA0Stroke Color\\xA0\", /*#__PURE__*/_jsxDEV(\"div\", {\n          style: swatchStyles.pickerContainer,\n          children: /*#__PURE__*/_jsxDEV(Picker, {\n            setPickerColor: setPickerColorStroke,\n            type: \"Stroke\",\n            ref: activeObjectStrokeRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2886,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2885,\n          columnNumber: 11\n        }, this), \"\\xA0Fill Color\\xA0\", /*#__PURE__*/_jsxDEV(\"div\", {\n          style: swatchStyles.pickerContainer,\n          children: /*#__PURE__*/_jsxDEV(Picker, {\n            setPickerColor: setPickerColorFill,\n            type: \"Fill\",\n            ref: activeObjectFillRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2894,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2893,\n          columnNumber: 11\n        }, this), \"\\xA0Opacity\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"range\",\n          id: \"opacityRange\",\n          value: opacity,\n          onChange: e => {\n            //opacity.current = e.target.value;\n            setOpacity(e.target.value);\n            setShapeAttributes({\n              opacity: e.target.value\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2972,\n          columnNumber: 11\n        }, this), \"\\xA0 Angle snap:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          id: \"chkSnap\",\n          onChange: e => {\n            //console.log(e.target.checked);\n            snap.current = e.target.checked;\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2985,\n          columnNumber: 11\n        }, this), \"\\xA0Font\", /*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"fonts\",\n          id: \"fonts\",\n          onChange: e => {\n            setFont(e.target.value);\n            setShapeAttributes({\n              fontFamily: e.target.value\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2994,\n          columnNumber: 11\n        }, this), \"\\xA0Size\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          id: \"fontSize\",\n          value: fontSize,\n          min: \"0\",\n          max: \"100\",\n          onChange: e => {\n            setFontSize(+e.target.value);\n            setShapeAttributes({\n              fontSize: +e.target.value\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3003,\n          columnNumber: 11\n        }, this), \"\\xA0\", /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"FontWeight:\", /*#__PURE__*/_jsxDEV(\"select\", {\n            value: fontWeight,\n            onChange: e => {\n              setFontWeight(e.target.value);\n              setShapeAttributes({\n                fontWeight: e.target.value\n              });\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"normal\",\n              children: \"Normal\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3028,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"bold\",\n              children: \"Bold\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3029,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3019,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3017,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"FontSyle:\", /*#__PURE__*/_jsxDEV(\"select\", {\n            value: fontStyle,\n            onChange: e => {\n              setFontStyle(e.target.value);\n              setShapeAttributes({\n                fontStyle: e.target.value\n              });\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"regular\",\n              children: \"Regular\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3043,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"italic\",\n              children: \"Italic\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3044,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3034,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3032,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ref: imgFileRef,\n          type: \"file\",\n          id: \"FileUpload1\",\n          style: {\n            display: \"none\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3047,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2616,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"lMenu\",\n        className: styles.menu,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.tableft,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onMouseEnter: e => {\n              w3_openPanel(e, \"File\");\n            },\n            onClick: e => {\n              w3_openPanel(e, currentOpenPanel);\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgFileAccess,\n                alt: \"FileAccess\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3065,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextleft,\n                children: \"File Access\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3066,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3064,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3056,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              w3_openPanel(e, currentOpenPanel);\n            },\n            onMouseEnter: e => {\n              w3_openPanel(e, \"CanvasSet\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgCanvasSettings,\n                alt: \"Canvas Settings\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3078,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextleft,\n                children: \"Canvas Settings\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3079,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3077,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3069,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              w3_openPanel(e, currentOpenPanel);\n            },\n            onMouseEnter: e => {\n              w3_openPanel(e, \"LayerSet\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgLayers,\n                alt: \"Layers\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3091,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextleft,\n                children: \"Layers\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3092,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3090,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3082,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              w3_openPanel(e, currentOpenPanel);\n            },\n            onMouseEnter: e => {\n              w3_openPanel(e, \"Warehouse\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgWarehouse,\n                alt: \"Warehouse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3104,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextleft,\n                children: \"Warehouse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3105,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3103,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3095,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              w3_openPanel(e, currentOpenPanel);\n            },\n            onMouseEnter: e => {\n              w3_openPanel(e, \"Phases\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgPhase,\n                alt: \"Phases\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3117,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextleft,\n                children: \"Phases\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3118,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3116,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3108,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              w3_openPanel(e, currentOpenPanel);\n            },\n            onMouseEnter: e => {\n              w3_openPanel(e, \"Measures\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgMeasurement,\n                alt: \"Measurements\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3130,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextleft,\n                children: \"Measures\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3131,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3129,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3121,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              w3_openPanel(e, currentOpenPanel);\n            },\n            onMouseEnter: e => {\n              w3_openPanel(e, \"Animation\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgAnimation,\n                alt: \"Animation\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3143,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextleft,\n                children: \"Phase Player\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3144,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3142,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3134,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tabbar\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3147,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3055,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3054,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"Library\",\n        className: styles.library,\n        onClick: e => {\n          //document.getElementById(\"File\").style.display = \"none\";\n          w3_openPanel(e, currentOpenPanel);\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"File\",\n          className: styles.File,\n          style: {\n            display: \"none\"\n          },\n          children: [\"File Access\", /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: e => {\n              //document.getElementById(\"File\").style.display = \"none\";\n              w3_openPanel(e, currentOpenPanel);\n            },\n            className: tbStyles.close,\n            title: \"Close Modal\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3160,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.btngroup,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgNewFile,\n                  alt: \"NewFile\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3173,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3172,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"New File\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3175,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3171,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgOpenFile,\n                  alt: \"OpenFile\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3179,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3178,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Open File\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3181,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3177,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgRecentFile,\n                  alt: \"RecentFile\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3185,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3184,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Recent File\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3187,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3183,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3170,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3158,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"CanvasSet\",\n          className: styles.CanvasSet,\n          style: {\n            display: \"none\"\n          },\n          children: [\"Canvas Settings\", /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: e => {\n              //document.getElementById(\"File\").style.display = \"none\";\n              w3_openPanel(e, currentOpenPanel);\n            },\n            className: tbStyles.close,\n            title: \"Close Modal\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3197,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.btngroup,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgCanvasSize,\n                  alt: \"CanvasSize\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3210,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3209,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Canvas Size\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3212,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3208,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgCanvasColor,\n                  alt: \"CanvasColor\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3216,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3215,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Canvas Color\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3218,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3214,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgCanvasImage,\n                  alt: \"CanvasImage\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3222,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3221,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Canvas Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3224,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3220,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3207,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3191,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"LayerSet\",\n          className: styles.LayerSet,\n          style: {\n            display: \"none\"\n          },\n          children: [\"Layers\", /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: e => {\n              //document.getElementById(\"File\").style.display = \"none\";\n              w3_openPanel(e, currentOpenPanel);\n            },\n            className: tbStyles.close,\n            title: \"Close Modal\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3234,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.sbtngroup,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgLayerBefore,\n                  alt: \"AddLayerBefore\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3247,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3246,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Add Layer Before\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3249,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3245,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgLayerAfter,\n                  alt: \"AddLayerAfter\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3253,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3252,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Add Layer After\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3255,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3251,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgLayerUp,\n                  alt: \"LayerUp\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3259,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3258,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Layer Up\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3261,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3257,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgLayerDown,\n                  alt: \"LayerDown\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3265,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3264,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Layer Down\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3267,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3263,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgLayerHide,\n                  alt: \"HideLayer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3271,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3270,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Hide Layer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3273,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3269,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgLayerLock,\n                  alt: \"LockLayer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3277,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3276,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Lock Layer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3279,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3275,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgLayerSort,\n                  alt: \"SortLayer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3283,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3282,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Sort layer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3285,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3281,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3244,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: styles.a,\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Shapes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3289,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Circle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3291,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: \"Rectangle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3292,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3290,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Texts\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3294,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"Lines\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3295,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3288,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3228,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"Warehouse\",\n          className: styles.Warehouse,\n          style: {\n            display: \"none\"\n          },\n          children: [\"Warehouse\", /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: e => {\n              //document.getElementById(\"File\").style.display = \"none\";\n              w3_openPanel(e, currentOpenPanel);\n            },\n            className: tbStyles.close,\n            title: \"Close Modal\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3304,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.btngroup,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgCrane,\n                  alt: \"Crane\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3317,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3316,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Crane\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3319,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3315,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgElevator,\n                  alt: \"Elevator\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3323,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3322,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Elevator\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3325,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3321,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgLabels,\n                  alt: \"Labels\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3329,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3328,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Labels\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3331,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3327,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgCloud2,\n                  alt: \"Cloud\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3335,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3334,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Cloud\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3337,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3333,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgCallout,\n                  alt: \"Callout\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3341,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3340,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Callout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3343,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3339,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgWedge,\n                  alt: \"Wedge\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3347,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3346,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Wedge\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3349,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3345,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgRing,\n                  alt: \"Ring\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3353,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3352,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Ring\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3355,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3351,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgFilledArc,\n                  alt: \"FilledArc\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3359,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3358,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Filled Arc\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3361,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3357,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3314,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3298,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"Phases\",\n          className: styles.Phases,\n          style: {\n            display: \"none\"\n          },\n          children: [\"Phases\", /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: e => {\n              //document.getElementById(\"File\").style.display = \"none\";\n              w3_openPanel(e, currentOpenPanel);\n            },\n            className: tbStyles.close,\n            title: \"Close Modal\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3371,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.btngroup,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgNewPhase,\n                  alt: \"NewPhase\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3384,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3383,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"NewPhase\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3386,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3382,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgPhaseStart,\n                  alt: \"StartDate\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3390,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3389,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Start Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3392,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3388,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgPhaseEnd,\n                  alt: \"EndDate\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3396,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3395,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"End Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3398,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3394,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgPhaseDelete,\n                  alt: \"DeletePhase\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3402,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3401,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Delete Phase \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3404,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3400,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3381,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3365,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"Measures\",\n          className: styles.Measures,\n          style: {\n            display: \"none\"\n          },\n          children: [\"Measurement\", /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: e => {\n              //document.getElementById(\"File\").style.display = \"none\";\n              w3_openPanel(e, currentOpenPanel);\n            },\n            className: tbStyles.close,\n            title: \"Close Modal\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3414,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.btngroup,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgPageScale,\n                  alt: \"PageScale\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3427,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3426,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Page Scale\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3429,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3425,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgSetUnits,\n                  alt: \"SetUnits\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3433,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3432,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Set Units\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3435,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3431,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgLength,\n                  alt: \"Length\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3439,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3438,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Length\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3441,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3437,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgPerimeter,\n                  alt: \"Perimeter\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3445,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3444,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Perimeter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3447,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3443,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgArea,\n                  alt: \"Area\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3451,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3450,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Area\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3453,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3449,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3424,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3408,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"Animation\",\n          className: styles.Animation,\n          style: {\n            display: \"none\"\n          },\n          children: [\"Phase Player\", /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: e => {\n              //document.getElementById(\"File\").style.display = \"none\";\n              w3_openPanel(e, currentOpenPanel);\n            },\n            className: tbStyles.close,\n            title: \"Close Modal\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3463,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.sbtngroup,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: \"Phase1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3475,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Play\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3476,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3474,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: \"Phase2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3479,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Play\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3480,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3478,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: \"Phase3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3483,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Play\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3484,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3482,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3473,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.sbtngroup,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: imgPlay,\n                  alt: \"Play\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3490,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3489,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"Play/Stop\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3492,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3488,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"range\",\n              min: \"1\",\n              max: \"100\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3494,\n              columnNumber: 15\n            }, this), \"Play Speed\", /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: \"1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3497,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"1 Day/Second\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3498,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3496,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: \"2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3501,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"2 Day/Second\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3502,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3500,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: \"5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3505,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"5 Day/Second\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3506,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3504,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: \"10\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3509,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"10 Day/Second\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3510,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3508,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                children: \"30\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3513,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptextB,\n                children: \"30 Day/Second\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3514,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3512,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3487,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3457,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.right,\n        ref: rightBar,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.tab,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"select\",\n            onClick: e => {\n              canvas.isDrawingMode = false;\n              canvas.selection = true;\n              setCanvasTool(\"select\");\n              setActiveTool(e, \"select\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgSelection,\n                alt: \"Select\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3531,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptext,\n                children: \"Selection [S]\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3532,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3530,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3521,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"text\",\n            onClick: e => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"text\");\n              setActiveTool(e, \"text\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgText,\n                alt: \"TextBox\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3545,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptext,\n                children: \"Text [T]\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3546,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3544,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3535,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"pen\",\n            onClick: e => {\n              setCanvasTool(\"pen\");\n              canvas.isDrawingMode = 1;\n              if (stroke.a === 0) setStrokeColor({\n                r: 0,\n                g: 0,\n                b: 0,\n                a: 1\n              });\n              canvas.freeDrawingBrush.color = stroke;\n              canvas.freeDrawingBrush.width = strokeWidth;\n              setActiveTool(e, \"pen\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgFreeHand,\n                alt: \"Pen\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3561,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptext,\n                children: \"Free-hand [H]\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3562,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3560,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3549,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"cloud\",\n            onClick: e => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"cloud\");\n              setActiveTool(e, \"cloud\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgCloud,\n                alt: \"Cloud\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3575,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptext,\n                children: \"Cloud\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3576,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3574,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3565,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"callout\",\n            onClick: e => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"callout\");\n              setActiveTool(e, \"callout\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgCallout,\n                alt: \"Callout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3589,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptext,\n                children: \"Callout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3590,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3588,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3579,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"image\",\n            onClick: e => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"image\");\n              setActiveTool(e, \"image\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgImageEdit,\n                alt: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3603,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptext,\n                children: \"Image Edit [I]\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3604,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3602,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3593,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tabspace\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3607,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"line\",\n            onClick: e => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              editPoly.current = true;\n              setCanvasTool(\"line\");\n              setActiveTool(e, \"line\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgLine,\n                alt: \"Line\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3619,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptext,\n                children: \"Line [L]\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3620,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3618,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3608,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"polyline\",\n            onClick: e => {\n              canvas.isDrawingMode = false;\n              setCanvasTool(\"polyline\");\n              setActiveTool(e, \"polyline\");\n              canvas.selection = false;\n              var objects = canvas.getObjects();\n\n              for (var i = 0; i < objects.length; i++) {\n                objects[i].set({\n                  selectable: false,\n                  evented: false\n                });\n              }\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgPolyline,\n                alt: \"Polyline\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3637,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptext,\n                children: \"Polyline [P]\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3638,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3636,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3623,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"arrow\",\n            onClick: e => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"arrow\");\n              setActiveTool(e, \"arrow\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgArrow,\n                alt: \"Arrow\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3651,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptext,\n                children: \"Arrow [A]\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3652,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3650,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3641,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"arc\",\n            onClick: e => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"arc\");\n              setActiveTool(e, \"arc\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgArc,\n                alt: \"Arc\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3665,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptext,\n                children: \"Arc [Q]\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3666,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3664,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3655,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"rect\",\n            onClick: e => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              canvas.selection = false;\n              canvas.forEachObject(function (o) {\n                o.selectable = false;\n              });\n              canvas.renderAll();\n              setCanvasTool(\"rect\");\n              setActiveTool(e, \"rect\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgRect,\n                alt: \"Rectangle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3684,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptext,\n                children: \"Rectangle [R]\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3685,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3683,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3669,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"polygon\",\n            onClick: e => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"polygon\");\n              setActiveTool(e, \"polygon\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgPolygon,\n                alt: \"Polygon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3698,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptext,\n                children: \"Polygon [G]\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3699,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3697,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3688,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"rpolygon\",\n            onClick: e => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"rpolygon\");\n              setActiveTool(e, \"rpolygon\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgRPolygon,\n                alt: \"Regular Polygon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3712,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptext,\n                children: \"Regular Polygon [U]\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3713,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3711,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3702,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"circle\",\n            onClick: e => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"circle\");\n              setActiveTool(e, \"circle\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgCircle,\n                alt: \"Circle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3726,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptext,\n                children: \"Circle [C]\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3727,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3725,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3716,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"ellipse\",\n            onClick: e => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"ellipse\");\n              setActiveTool(e, \"ellipse\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgEllipse,\n                alt: \"Ellipse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3740,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptext,\n                children: [\"Ellipse \", \"  \", \" [E]\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3741,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3739,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3730,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tabspace\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3744,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"dimension\",\n            onClick: e => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"dimension\");\n              setActiveTool(e, \"dimension\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgDimension,\n                alt: \"Dimension\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3755,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptext,\n                children: \"Dimension [D]\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3756,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3754,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3745,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"area\",\n            onClick: e => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"area\");\n              setActiveTool(e, \"area\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgArea,\n                alt: \"Area\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3770,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptext,\n                children: \"Area\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3771,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3769,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3760,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"length\",\n            onClick: e => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"length\");\n              setActiveTool(e, \"length\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgLength,\n                alt: \"Length\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3784,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptext,\n                children: \"Length\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3785,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3783,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3774,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"perimeter\",\n            onClick: e => {\n              canvas.isDrawingMode = false;\n              canvas.selection = false;\n              setCanvasTool(\"perimeter\");\n              setActiveTool(e, \"perimeter\");\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.tooltip,\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: imgPerimeter,\n                alt: \"Perimeter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3798,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.tooltiptext,\n                children: \"Perimeter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3799,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3797,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3788,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3520,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3519,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: containerRef,\n        children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          id: \"my-fabric-canvas\",\n          width: isBigScreen ? 1191 : isDesktopOrLaptop ? 1086 : isTabletOrMobile ? 960 : 640,\n          height: isBigScreen ? 842 : isDesktopOrLaptop ? 768 : isTabletOrMobile ? 540 : 320\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3805,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3804,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2605,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 2598,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"jzIFkR20nXZfDrb/N1IluRhBQvQ=\", false, function () {\n  return [useMediaQuery, useMediaQuery, useMediaQuery, useMediaQuery, useMediaQuery];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Tutorials/elp-app/src/App.js"],"names":["React","useRef","useState","fabric","SketchPicker","Picker","MediaQuery","useMediaQuery","reactCSS","imgUndo","imgRedo","imgDelete","imglineWidth","imgStroke1","imgStroke2","imgStroke4","imgStroke5","imgStroke10","imgStroke12","imgStroke15","imgStroke20","imgStroke25","imgLineStyle","imgLineStyle1","imgLineStyle2","imgLineStyle3","imgLineStyle4","imgLineStyle5","imgLineStyle6","imgLineStyle7","imgText","imgFreeHand","imgSelection","imgCloud","imgCallout","imgImageEdit","imgLine","imgPolyline","imgArrow","imgArc","imgRect","imgPolygon","imgRPolygon","imgCircle","imgEllipse","imgDimension","imgArea","imgLength","imgPerimeter","imgDropper","imgNoStroke","imgNoFill","imgFileAccess","imgNewFile","imgOpenFile","imgRecentFile","imgCanvasSettings","imgCanvasSize","imgCanvasColor","imgCanvasImage","imgLayers","imgLayerBefore","imgLayerAfter","imgLayerUp","imgLayerDown","imgLayerHide","imgLayerLock","imgLayerSort","imgWarehouse","imgCrane","imgElevator","imgLabels","imgCloud2","imgWedge","imgRing","imgFilledArc","imgPhase","imgNewPhase","imgPhaseStart","imgPhaseEnd","imgPhaseDelete","imgMeasurement","imgPageScale","imgSetUnits","imgAnimation","imgPlay","styles","tbStyles","styled","Backdrop","div","attrs","p","style","zIndex","display","show","background","backdrop","initialState","version","objects","type","originX","originY","left","top","width","height","fill","stroke","strokeWidth","strokeDashArray","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","scaleX","scaleY","angle","flipX","flipY","opacity","shadow","visible","clipTo","backgroundColor","fillRule","paintFirst","globalCompositeOperation","transformMatrix","skewX","skewY","rx","ry","name","fontCheck","Set","sort","getWindowDimensions","innerWidth","innerHeight","window","determineAdjustedCoords","fromX","fromY","toX","toY","xLen","yLen","theta","Math","atan","PI","hyp","sin","sector","round","thetaNew","xNew","cos","yNew","px","py","tx","ty","App","isDesktopOrLaptop","query","isBigScreen","isTabletOrMobile","isPortrait","isRetina","past","setPast","future","setFuture","windowDimensions","setWindowDimensions","pageLoad","setPageLoad","mouseMoving","canvasRef","containerRef","mainDiv","rightBar","shapeCount","isDrawing","currentStroke","editPoly","openPoly","polyType","someValue","activeObjectStrokeRef","activeObjectFillRef","imgFileRef","imageData","canvas","setCanvas","pickerStroke","setPickerColorStroke","pickerFill","setPickerColorFill","canvasTool","setCanvasTool","setStrokeWidth","setStrokeColor","r","g","b","a","setFillColor","textHighlight","setHighlight","dashSize","setDashSize","gapSize","setGapSize","setOpacity","font","setFont","fontSize","setFontSize","fontWeight","setFontWeight","fontStyle","setFontStyle","showStrokePicker","setShowStrokePicker","showFillPicker","setShowFillPicker","showHighlightPicker","setShowHighlightPicker","snap","newShape","anchors","pointer","line","origX","origY","arrow","selectedShape","polyPoints","rpolygon","Rectangle","circle","ellipse","polyLine","polyLines","currentToolId","currentOpenPanel","drawingObject","border","StrokeSwatchClick","activeShape","getActiveObject","setShapeAttributes","FillSwatchClick","HighlightSwatchClick","StrokeSwatchClose","FillSwatchClose","HighlightSwatchClose","StrokeSwatchChange","color","rgb","FillSwatchChange","HighlightSwatchChange","textBackgroundColor","calcPolygonPoints","sideCount","radius","sweep","cx","cy","points","i","x","y","push","saveCanvasState","newCanvasState","sessionStorage","clear","myFabricJSCanvas","JSON","stringify","useEffect","undefined","fontAvailable","values","document","fonts","check","add","getElementById","option","createElement","text","Canvas","current","set","fireRightClick","fireMiddleClick","stopContextMenu","controlsAboveOverlay","targetFindTolerance","preserveObjectStacking","perPixelTargetFind","data","parse","console","log","loadFromJSON","forEachObject","o","includes","remove","json","toJSON","length","renderAll","handleResize","ratio","getWidth","getHeight","containerWidth","clientWidth","containerHeight","clientHeight","scale","zoom","getZoom","setDimensions","setViewportTransform","addEventListener","handleImageFileLoad","e","file","target","files","reader","FileReader","onload","f","result","Image","fromURL","img","oImg","readAsDataURL","isDrawingMode","freeDrawingBrush","selection","defaultCursor","selectable","hoverCursor","allObjects","getObjects","lastObjectCreated","setActiveObject","on","options","locked","ceil","abs","ctx","getSelectionContext","clearContext","polyGon","Polygon","Polyline","editable","hasControls","hasBorders","str","get","id","split","matrix","calcTransformMatrix","transformedPoints","map","Point","pathOffset","util","transformPoint","pFill","pStroke","pName","updatedPoly","sendToBack","forEach","index","anchor","Circle","pname","object","getCenterPoint","pPoints","viewportTransform","isDragging","button","path","getPointer","IText","fontFamily","click","Line","padding","shiftKey","x1","y1","x2","y2","arrowLinePoints","dx","dy","atan2","Triangle","Group","lockMovementX","lockMovementY","startPoint","endPoint","evt","pop","newPolyLine","distance","sqrt","pow","confirm","objectCaching","Rect","centeredScaling","startAngle","endAngle","max","Ellipse","altKey","newPoints","pointIndex","parseInt","cloneArray","slice","splice","Number","isNaN","opt","delta","deltaY","zoomToPoint","offsetX","offsetY","preventDefault","stopPropagation","vpt","lastPosX","clientX","lastPosY","clientY","temp","oObjectType","oObject","clone","cloned","requestRenderAll","dispose","removeEventListener","onUndo","present","newFuture","previous","onRedo","next","attributes","Attributes","item","deleteObjects","getActiveObjects","obj","w3_openPanel","panelId","setActiveTool","handleKeyDown","event","key","ctrlKey","url","swatchStyles","default","borderRadius","blank","highlight","swatch","boxShadow","cursor","backgroundImage","pickerContainer","popover","position","cover","right","bottom","focus","propBar","buttontoolbar","tooltipDown","tooltiptextDown","dropdown","dropdowncontent","value","checked","menu","tableft","tooltip","tooltiptextleft","tabbar","library","File","close","btngroup","tooltiptextB","CanvasSet","LayerSet","sbtngroup","Warehouse","Phases","Measures","Animation","tab","tooltiptext","tabspace","evented"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from \"react\";\nimport { fabric } from \"fabric\";\nimport { SketchPicker } from \"react-color\";\nimport Picker from \"../src/components/Picker/Picker\";\nimport MediaQuery from \"react-responsive\";\nimport { useMediaQuery } from \"react-responsive\";\nimport reactCSS from \"reactcss\";\n\nimport imgUndo from \"./images/undo2.png\";\nimport imgRedo from \"./images/redo2.png\";\nimport imgDelete from \"./images/delete2.png\";\nimport imglineWidth from \"./images/lineWidth2.png\";\nimport imgStroke1 from \"./images/stroke1.png\";\nimport imgStroke2 from \"./images/stroke2.png\";\nimport imgStroke4 from \"./images/stroke4.png\";\nimport imgStroke5 from \"./images/stroke5.png\";\nimport imgStroke10 from \"./images/stroke10.png\";\nimport imgStroke12 from \"./images/stroke12.png\";\nimport imgStroke15 from \"./images/stroke15.png\";\nimport imgStroke20 from \"./images/stroke20.png\";\nimport imgStroke25 from \"./images/stroke25.png\";\nimport imgLineStyle from \"./images/LineStyle2.png\";\nimport imgLineStyle1 from \"./images/lineStyle1.png\";\nimport imgLineStyle2 from \"./images/lineStyle2png.png\";\nimport imgLineStyle3 from \"./images/lineStyle3.png\";\nimport imgLineStyle4 from \"./images/lineStyle4.png\";\nimport imgLineStyle5 from \"./images/lineStyle5.png\";\nimport imgLineStyle6 from \"./images/lineStyle6.png\";\nimport imgLineStyle7 from \"./images/lineStyle7.png\";\nimport imgText from \"./images/TextBox2.png\";\nimport imgFreeHand from \"./images/PenTool2.png\";\nimport imgSelection from \"./images/Select2.png\";\nimport imgCloud from \"./images/Cloud2.png\";\nimport imgCallout from \"./images/CallOut2.png\";\nimport imgImageEdit from \"./images/Image2.png\";\nimport imgLine from \"./images/Line2.png\";\nimport imgPolyline from \"./images/Polyline2.png\";\nimport imgArrow from \"./images/Arrow2.png\";\nimport imgArc from \"./images/Arc2.png\";\nimport imgRect from \"./images/Rectangle2.png\";\nimport imgPolygon from \"./images/Polygon2.png\";\nimport imgRPolygon from \"./images/RPolygon2.png\";\nimport imgCircle from \"./images/Circle2.png\";\nimport imgEllipse from \"./images/Ellipse2.png\";\nimport imgDimension from \"./images/Dimension2.png\";\nimport imgArea from \"./images/Area2.png\";\nimport imgLength from \"./images/Length2.png\";\nimport imgPerimeter from \"./images/Perimeter2.png\";\nimport imgDropper from \"./images/dropper2.png\";\nimport imgNoStroke from \"./images/noStroke2.png\";\nimport imgNoFill from \"./images/noFill2.png\";\nimport imgFileAccess from \"./images/FileAccess2.png\";\nimport imgNewFile from \"./images/NewFile2.png\";\nimport imgOpenFile from \"./images/OpenFile2.png\";\nimport imgRecentFile from \"./images/recentFile2.png\";\nimport imgCanvasSettings from \"./images/Canvas2.png\";\nimport imgCanvasSize from \"./images/CanvasSize2.png\";\nimport imgCanvasColor from \"./images/CanvasColor2.png\";\nimport imgCanvasImage from \"./images/CanvasImage2.png\";\nimport imgLayers from \"./images/Layers2.png\";\nimport imgLayerBefore from \"./images/InsertBefore2.png\";\nimport imgLayerAfter from \"./images/InsertAfter2.png\";\nimport imgLayerUp from \"./images/Up2.png\";\nimport imgLayerDown from \"./images/Down2.png\";\nimport imgLayerHide from \"./images/Hide2.png\";\nimport imgLayerLock from \"./images/Lock2.png\";\nimport imgLayerSort from \"./images/SortAlpha2.png\";\nimport imgWarehouse from \"./images/Warehouse2.png\";\nimport imgCrane from \"./images/Crane2.png\";\nimport imgElevator from \"./images/Elevator2.png\";\nimport imgLabels from \"./images/labels2.png\";\nimport imgCloud2 from \"./images/CloudTool2.png\";\nimport imgWedge from \"./images/wedge2.png\";\nimport imgRing from \"./images/Ring2.png\";\nimport imgFilledArc from \"./images/FilledArc2.png\";\nimport imgPhase from \"./images/Phases2.png\";\nimport imgNewPhase from \"./images/NewPhase2.png\";\nimport imgPhaseStart from \"./images/StartDate2.png\";\nimport imgPhaseEnd from \"./images/EndDate2.png\";\nimport imgPhaseDelete from \"./images/DeletePhase2.png\";\nimport imgMeasurement from \"./images/Measure2.png\";\nimport imgPageScale from \"./images/PageScale2.png\";\nimport imgSetUnits from \"./images/setunit2.png\";\nimport imgAnimation from \"./images/Animation2.png\";\nimport imgPlay from \"./images/Play2.png\";\n\nimport \"./styles.css\";\nimport styles from \"./rightMenu.module.css\";\nimport tbStyles from \"./toolbar.module.css\";\nimport styled from \"styled-components\";\n\nexport const Backdrop = styled.div.attrs((p) => ({\n  style: {\n    zIndex: p.zIndex,\n    display: p.show ? \"block\" : \"none\",\n    background: p.backdrop ? \"rgba(0, 0, 0, 0.1)\" : \"transparent\",\n  },\n}))`\n  position: fixed;\n  z-index: 1;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n`;\n\nconst initialState = {\n  version: \"3.6.3\",\n  objects: [\n    {\n      type: \"rect\",\n      version: \"3.6.3\",\n      originX: \"left\",\n      originY: \"top\",\n      left: 0,\n      top: 0,\n      width: 1,\n      height: 1,\n      fill: \"black\",\n      stroke: null,\n      strokeWidth: 1,\n      strokeDashArray: null,\n      strokeLineCap: \"butt\",\n      strokeDashOffset: 0,\n      strokeLineJoin: \"miter\",\n      strokeMiterLimit: 4,\n      scaleX: 1,\n      scaleY: 1,\n      angle: 0,\n      flipX: false,\n      flipY: false,\n      opacity: 1,\n      shadow: null,\n      visible: false,\n      clipTo: null,\n      backgroundColor: \"\",\n      fillRule: \"nonzero\",\n      paintFirst: \"fill\",\n      globalCompositeOperation: \"source-over\",\n      transformMatrix: null,\n      skewX: 0,\n      skewY: 0,\n      rx: 0,\n      ry: 0,\n      name: \"shape-rect-n\",\n    },\n  ],\n};\n\nconst fontCheck = new Set(\n  [\n    // Windows 10\n    \"Arial\",\n    \"Arial Black\",\n    \"Bahnschrift\",\n    \"Calibri\",\n    \"Cambria\",\n    \"Cambria Math\",\n    \"Candara\",\n    \"Comic Sans MS\",\n    \"Consolas\",\n    \"Constantia\",\n    \"Corbel\",\n    \"Courier New\",\n    \"Ebrima\",\n    \"Franklin Gothic Medium\",\n    \"Gabriola\",\n    \"Gadugi\",\n    \"Georgia\",\n    \"HoloLens MDL2 Assets\",\n    \"Impact\",\n    \"Ink Free\",\n    \"Javanese Text\",\n    \"Leelawadee UI\",\n    \"Lucida Console\",\n    \"Lucida Sans Unicode\",\n    \"Malgun Gothic\",\n    \"Marlett\",\n    \"Microsoft Himalaya\",\n    \"Microsoft JhengHei\",\n    \"Microsoft New Tai Lue\",\n    \"Microsoft PhagsPa\",\n    \"Microsoft Sans Serif\",\n    \"Microsoft Tai Le\",\n    \"Microsoft YaHei\",\n    \"Microsoft Yi Baiti\",\n    \"MingLiU-ExtB\",\n    \"Mongolian Baiti\",\n    \"MS Gothic\",\n    \"MV Boli\",\n    \"Myanmar Text\",\n    \"Nirmala UI\",\n    \"Palatino Linotype\",\n    \"Segoe MDL2 Assets\",\n    \"Segoe Print\",\n    \"Segoe Script\",\n    \"Segoe UI\",\n    \"Segoe UI Historic\",\n    \"Segoe UI Emoji\",\n    \"Segoe UI Symbol\",\n    \"SimSun\",\n    \"Sitka\",\n    \"Sylfaen\",\n    \"Symbol\",\n    \"Tahoma\",\n    \"Times New Roman\",\n    \"Trebuchet MS\",\n    \"Verdana\",\n    \"Webdings\",\n    \"Wingdings\",\n    \"Yu Gothic\",\n    // macOS\n    \"American Typewriter\",\n    \"Andale Mono\",\n    \"Arial\",\n    \"Arial Black\",\n    \"Arial Narrow\",\n    \"Arial Rounded MT Bold\",\n    \"Arial Unicode MS\",\n    \"Avenir\",\n    \"Avenir Next\",\n    \"Avenir Next Condensed\",\n    \"Baskerville\",\n    \"Big Caslon\",\n    \"Bodoni 72\",\n    \"Bodoni 72 Oldstyle\",\n    \"Bodoni 72 Smallcaps\",\n    \"Bradley Hand\",\n    \"Brush Script MT\",\n    \"Chalkboard\",\n    \"Chalkboard SE\",\n    \"Chalkduster\",\n    \"Charter\",\n    \"Cochin\",\n    \"Comic Sans MS\",\n    \"Copperplate\",\n    \"Courier\",\n    \"Courier New\",\n    \"Didot\",\n    \"DIN Alternate\",\n    \"DIN Condensed\",\n    \"Futura\",\n    \"Geneva\",\n    \"Georgia\",\n    \"Gill Sans\",\n    \"Helvetica\",\n    \"Helvetica Neue\",\n    \"Herculanum\",\n    \"Hoefler Text\",\n    \"Impact\",\n    \"Lucida Grande\",\n    \"Luminari\",\n    \"Marker Felt\",\n    \"Menlo\",\n    \"Microsoft Sans Serif\",\n    \"Monaco\",\n    \"Noteworthy\",\n    \"Optima\",\n    \"Palatino\",\n    \"Papyrus\",\n    \"Phosphate\",\n    \"Rockwell\",\n    \"Savoye LET\",\n    \"SignPainter\",\n    \"Skia\",\n    \"Snell Roundhand\",\n    \"Tahoma\",\n    \"Times\",\n    \"Times New Roman\",\n    \"Trattatello\",\n    \"Trebuchet MS\",\n    \"Verdana\",\n    \"Zapfino\",\n  ].sort()\n);\n\n//const useForceUpdate = () => useState()[1];\n// Or you can use:\n// const fabric = require(\"fabric\").fabric;\n//const canvas = new fabric.Canvas(\"my-fabric-canvas\");\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height,\n  };\n}\nfunction determineAdjustedCoords(fromX, fromY, toX, toY) {\n  // this function uses the last point plotted, the length of the lines to the new x and y coords (using toX and toY) to determine an adjusted rubber band end-point\n\n  // find the angle subtended by the current rubber band line i.e. unadjusted (as dictated by the actual mouse coords) and the x axis\n  // var xLen = Math.abs(toX - fromX);\n  // var yLen = Math.abs(toY - fromY);\n  var xLen = toX - fromX;\n  var yLen = toY - fromY;\n  // if x or y difference is zero then no action needed so return\n  if (xLen === 0 && yLen === 0) return;\n  var theta = Math.atan(yLen / xLen) * (180 / Math.PI);\n  // find the hypontenuse of the triangle bounded by the x axis and the actual rubber band line - this will also be the hypontenuse of the adjusted rubber band line\n  var hyp;\n  // verify if any of the components are zero\n  if (Math.sin(theta * (Math.PI / 180)) === 0) hyp = xLen;\n  else {\n    if (yLen === 0) hyp = xLen;\n    else hyp = yLen / Math.sin(theta * (Math.PI / 180));\n  }\n  // find which sector the angle lies in and round it to the nearest sector\n  var sector = Math.round(theta / 15);\n  // find the angle subtended by the adjusted rubber band line (as dictated by the coords we are trying to determine)\n  var thetaNew = sector * 15;\n  // find new x and y coords of the adjusted rubber band line end points\n  var xNew = Math.cos(thetaNew * (Math.PI / 180)) * hyp;\n  var yNew = Math.sin(thetaNew * (Math.PI / 180)) * hyp;\n  // required coords equal the new coords added to the last point plotted (fromX,fromY)\n  var px = fromX + Math.round(xNew);\n  var py = fromY + Math.round(yNew);\n\n  return { tx: px, ty: py };\n}\nconst App = () => {\n  const isDesktopOrLaptop = useMediaQuery({\n    query: \"(min-width: 1224px)\",\n  });\n  const isBigScreen = useMediaQuery({ query: \"(min-width: 1824px)\" });\n  const isTabletOrMobile = useMediaQuery({ query: \"(max-width: 1224px)\" });\n  const isPortrait = useMediaQuery({ query: \"(orientation: portrait)\" });\n  const isRetina = useMediaQuery({ query: \"(min-resolution: 2dppx)\" });\n  //const mforceUpdate = useForceUpdate();\n  // for undo/redoing\n  const [past, setPast] = useState([initialState]);\n  const [future, setFuture] = useState([initialState]);\n  const [windowDimensions, setWindowDimensions] = useState(\n    getWindowDimensions()\n  );\n  //const [newAction, setNewAction] = useState(0);\n  const [pageLoad, setPageLoad] = useState(null);\n  // const canvasRender = useRef(0);\n  const mouseMoving = useRef(false);\n  const canvasRef = useRef();\n  const containerRef = useRef();\n  const mainDiv = useRef(null);\n  const rightBar = useRef();\n  const shapeCount = useRef(0);\n  const isDrawing = useRef(false);\n  const currentStroke = useRef(\"\");\n  const editPoly = useRef(true);\n  const openPoly = useRef(null);\n  const polyType = useRef(\"\");\n  const someValue = useRef(0.0);\n  const activeObjectStrokeRef = useRef(null);\n  const activeObjectFillRef = useRef(null);\n  const imgFileRef = useRef(null);\n  const imageData = useRef(null);\n  //const [reRender, forceUpdate] = useReducer((x) => x + 1, 0);\n  //const forceUpdate = React.useReducer(() => ({}))[1];\n  //const [, updateComponent] = React.useState();\n  //const forceUpdateComponent = React.useCallback(() => updateComponent({}), []);\n  //anchors\n  const [canvas, setCanvas] = useState();\n\n  const [pickerStroke, setPickerColorStroke] = useState(`rgba(0, 0, 0, 1)`);\n  const [pickerFill, setPickerColorFill] = useState(`rgba(0, 0, 0, 1)`);\n  //const [canvasHistory, setCanvasHistory] = useState([initialState]);\n  //const [canvasHistory, setCanvasHistory] = useState([]);\n  // const [canvasState, setCanvasState] = useState(initialState);\n  //const [canvasState, setCanvasState] = useState();\n  const [canvasTool, setCanvasTool] = useState(\"select\");\n  const [strokeWidth, setStrokeWidth] = useState(1);\n  // const [stroke, setStrokeColor] = useState(\"black\");\n  const [stroke, setStrokeColor] = useState({\n    r: \"0\",\n    g: \"0\",\n    b: \"0\",\n    a: \"1\",\n  });\n  const [fill, setFillColor] = useState({\n    r: \"0\",\n    g: \"0\",\n    b: \"0\",\n    a: \"0\",\n  });\n  const [textHighlight, setHighlight] = useState({\n    r: \"255\",\n    g: \"255\",\n    b: \"0\",\n    a: \"1\",\n  });\n  // const [fill, setFillColor] = useState(\"black\");\n  const [dashSize, setDashSize] = useState(0);\n  const [gapSize, setGapSize] = useState(0);\n  const [opacity, setOpacity] = useState(100);\n  // const [snap, setSnap] = useState(false);\n  const [font, setFont] = useState(\"\");\n  const [fontSize, setFontSize] = useState(30);\n  const [fontWeight, setFontWeight] = useState(\"normal\");\n  const [fontStyle, setFontStyle] = useState(\"regular\");\n  //const [textHighlight, setHighlight] = useState(\"yellow\");\n\n  const [showStrokePicker, setShowStrokePicker] = useState(false);\n  const [showFillPicker, setShowFillPicker] = useState(false);\n  const [showHighlightPicker, setShowHighlightPicker] = useState(false);\n  //const [shapeCount, setShapeCount] = useState(0);\n\n  //const opacity = useRef(100);\n  const snap = useRef(false);\n  const newShape = useRef(true);\n  const anchors = useRef([]);\n  const pointer = useRef();\n  const line = useRef(null);\n  const origX = useRef();\n  const origY = useRef();\n  const angle = useRef();\n  const arrow = useRef(null);\n  const selectedShape = useRef(null);\n  const polyPoints = useRef([]);\n  const rpolygon = useRef(null);\n  const Rectangle = useRef(null);\n  const circle = useRef(null);\n  const ellipse = useRef(null);\n  const polyLine = useRef(null);\n  const polyLines = useRef([]);\n  const currentToolId = useRef(null);\n\n  var currentOpenPanel = \"none\";\n  var drawingObject = {};\n  drawingObject.type = \"\";\n  drawingObject.background = \"\";\n  drawingObject.border = \"\";\n\n  const StrokeSwatchClick = () => {\n    setShowStrokePicker((showStrokePicker) => !showStrokePicker);\n    if (!showStrokePicker) {\n      //Todo\n      var activeShape = canvas.getActiveObject();\n      if (activeShape) {\n        if (activeShape.stroke === \"rgba(255,255,255,0)\") {\n          setStrokeColor({ r: 255, g: 255, b: 255, a: 1 });\n          setShapeAttributes({\n            stroke: \"rgba(255,255,255,1)\",\n          });\n        }\n      }\n    }\n  };\n  const FillSwatchClick = () => {\n    setShowFillPicker((showFillPicker) => !showFillPicker);\n    if (!showFillPicker) {\n      //Todo\n      var activeShape = canvas.getActiveObject();\n      if (activeShape) {\n        if (activeShape.fill === \"rgba(255,255,255,0)\") {\n          setFillColor({ r: 255, g: 255, b: 255, a: 1 });\n          setShapeAttributes({\n            fill: \"rgba(255,255,255,1)\",\n          });\n        }\n      }\n    }\n  };\n  const HighlightSwatchClick = () => {\n    setShowHighlightPicker((showHighlightPicker) => !showHighlightPicker);\n  };\n  const StrokeSwatchClose = () => {\n    setShowStrokePicker(false);\n  };\n  const FillSwatchClose = () => {\n    setShowFillPicker(false);\n  };\n  const HighlightSwatchClose = () => {\n    setShowHighlightPicker(false);\n  };\n  const StrokeSwatchChange = (color) => {\n    //console.log(stroke);\n    setStrokeColor(color.rgb);\n    // setShapeAttributes({\n    //   stroke:\n    //     \"rgba(\" +\n    //     color.rgb.r +\n    //     \", \" +\n    //     color.rgb.g +\n    //     \", \" +\n    //     color.rgb.b +\n    //     \", \" +\n    //     color.rgb.a +\n    //     \")\",\n    // });\n    setShapeAttributes({\n      stroke: pickerStroke,\n    });\n  };\n  const FillSwatchChange = (color) => {\n    //console.log(stroke);\n    setFillColor(color.rgb);\n    setShapeAttributes({\n      fill:\n        \"rgba(\" +\n        color.rgb.r +\n        \", \" +\n        color.rgb.g +\n        \", \" +\n        color.rgb.b +\n        \", \" +\n        color.rgb.a +\n        \")\",\n    });\n    //console.log(swatchStyles.fill);\n  };\n  const HighlightSwatchChange = (color) => {\n    //console.log(stroke);\n    setHighlight(color.rgb);\n    setShapeAttributes({\n      textBackgroundColor:\n        \"rgba(\" +\n        color.rgb.r +\n        \", \" +\n        color.rgb.g +\n        \", \" +\n        color.rgb.b +\n        \", \" +\n        color.rgb.a +\n        \")\",\n    });\n  };\n  var calcPolygonPoints = (sideCount, radius) => {\n    var sweep = (Math.PI * 2) / sideCount;\n    var cx = radius;\n    var cy = radius;\n    var points = [];\n\n    for (var i = 0; i < sideCount; i++) {\n      var x = cx + radius * Math.cos(i * sweep);\n      var y = cy + radius * Math.sin(i * sweep);\n      points.push({ x: x, y: y });\n    }\n    return points;\n  };\n  /*\n  function click(id) {\n    var ev = new MouseEvent(\"click\", {\n      view: window,\n      bubbles: true,\n      cancelable: true,\n    });\n\n    var el = document.getElementById(id);\n    el.dispatchEvent(ev);\n  }\n  */\n  const saveCanvasState = (newCanvasState) => {\n    past.push(newCanvasState);\n    setPast(past);\n    setFuture([]);\n    sessionStorage.clear();\n    sessionStorage.myFabricJSCanvas = JSON.stringify(newCanvasState);\n    // sessionStorage.setItem(\"history\", JSON.stringify(past));\n  };\n  /*\n  const onObjectModified = useCallback(\n    (e) => {\n      const newCanvasState = e.target.canvas.toJSON([\"name\"]);\n      //const newCanvasState = canvas.toJSON([\"name\"]);\n      setCanvasState(newCanvasState);\n      // Limit history depth\n      setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\n      //setPast([...past, newCanvasState]);\n      //setFuture([]);\n      console.log(newCanvasState);\n    },\n    [setCanvasState, setCanvasHistory]\n  );\n*/\n  React.useEffect(() => {\n    // window.localStorage.setItem(\"colors\", JSON.stringify(colors));\n    // setShapeAttributes({\n    //   stroke: pickerStroke,\n    // });\n    if (canvas === undefined) return;\n    var activeShape = canvas.getActiveObject();\n    if (activeShape) {\n      // if (activeShape.stroke === \"rgba(255,255,255,0)\") {\n      // setStrokeColor({ r: 255, g: 255, b: 255, a: 1 });\n      setShapeAttributes({\n        stroke: pickerStroke,\n      });\n      // }\n    }\n    // console.log(pickerStroke);\n  }, [pickerStroke, setPickerColorStroke, canvas]);\n  React.useEffect(() => {\n    // window.localStorage.setItem(\"colors\", JSON.stringify(colors));\n    // setShapeAttributes({\n    //   stroke: pickerStroke,\n    // });\n    if (canvas === undefined) return;\n    var activeShape = canvas.getActiveObject();\n    if (activeShape) {\n      // if (activeShape.stroke === \"rgba(255,255,255,0)\") {\n      // setStrokeColor({ r: 255, g: 255, b: 255, a: 1 });\n      setShapeAttributes({\n        fill: pickerFill,\n      });\n      // }\n    }\n    // console.log(pickerStroke);\n  }, [pickerFill, setPickerColorFill, canvas]);\n\n  React.useEffect(() => {\n    /*\n    ---disabled for memory issues--\n    var history = JSON.parse(sessionStorage.getItem(\"history\")); //get them back    \n    if (history !== null) setPast(history);\n    */\n    const fontAvailable = new Set();\n    for (const font of fontCheck.values()) {\n      if (document.fonts.check(`12px \"${font}\"`)) {\n        fontAvailable.add(font);\n        var x = document.getElementById(\"fonts\");\n        var option = document.createElement(\"option\");\n        option.text = font;\n        x.add(option);\n      }\n    }\n  }, []);\n  // React.useEffect(() => {}, [canvasState]);\n\n  React.useEffect(() => {\n    //console.log(\"shift pressed\");\n    const canvas = new fabric.Canvas(canvasRef.current);\n    canvas.set({\n      fireRightClick: true,\n      fireMiddleClick: true, // <-- enable firing of middle click events\n      stopContextMenu: true,\n      controlsAboveOverlay: false,\n      targetFindTolerance: 15,\n      preserveObjectStacking: true,\n      perPixelTargetFind: true,\n    });\n    if (pageLoad === null && sessionStorage.myFabricJSCanvas !== undefined) {\n      setPageLoad(1);\n      //console.log(sessionStorage.myFabricJSCanvas);\n      const data = JSON.parse(sessionStorage.myFabricJSCanvas);\n      console.log(data);\n      canvas.loadFromJSON(data);\n      canvas.forEachObject(function (o) {\n        if (o.name.includes(\"anchor\")) {\n          canvas.remove(o);\n        }\n      });\n      anchors.current = [];\n      var json = canvas.toJSON([\"name\"]);\n      past.push(json);\n      setPast(past);\n      /*\n      //disabled for memory issues. as a result, undoing after refresh is not possible\n      var history = JSON.parse(sessionStorage.getItem(\"history\")); //get them back      \n      if (history !== null) setPast(history);\n      */\n      setFuture([]);\n    } else {\n      canvas.loadFromJSON(past[past.length - 1]);\n    }\n    canvas.renderAll();\n\n    function handleResize() {\n      const ratio = canvas.getWidth() / canvas.getHeight();\n      const containerWidth =\n        containerRef.current.clientWidth > 1191\n          ? 1191\n          : containerRef.current.clientWidth - 100;\n      const containerHeight = containerRef.current.clientHeight - 100;\n      const scale = containerWidth / canvas.getWidth();\n      const zoom = canvas.getZoom() * scale;\n      canvas.setDimensions({\n        width: containerWidth,\n        height: containerWidth / ratio,\n      });\n      canvas.setViewportTransform([zoom, 0, 0, zoom, 0, 0]);\n    }\n\n    window.addEventListener(\"resize\", handleResize);\n\n    function handleImageFileLoad(e) {\n      var file = e.target.files[0];\n      var reader = new FileReader();\n      reader.onload = function (f) {\n        imageData.current = f.target.result;\n        if (imageData.current !== null) {\n          new fabric.Image.fromURL(imageData.current, (img) => {\n            var oImg = img.set({\n              left: pointer.current.x,\n              top: pointer.current.y,\n              angle: 0,\n              name: \"shape-image-\" + shapeCount.current,\n              // width: canvas.getWidth(),\n              // height: canvas.getHeight(),\n            });\n            shapeCount.current = shapeCount.current + 1;\n            canvas.add(oImg);\n            canvas.renderAll();\n            newShape.current = true;\n            const newCanvasState = canvas.toJSON([\"name\"]);\n            saveCanvasState(newCanvasState);\n            //setImgURL(\"\");\n          });\n          imageData.current = null;\n        }\n      };\n      if (file) reader.readAsDataURL(file);\n    }\n\n    imgFileRef.current.addEventListener(\"change\", handleImageFileLoad);\n\n    editPoly.current = true;\n    if (canvasTool === \"pen\") {\n      canvas.isDrawingMode = 1;\n      canvas.freeDrawingBrush.color =\n        \"rgba(\" +\n        stroke.r +\n        \", \" +\n        stroke.g +\n        \", \" +\n        stroke.b +\n        \", \" +\n        stroke.a +\n        \")\";\n      canvas.freeDrawingBrush.width = strokeWidth;\n    }\n    if (canvasTool !== \"select\") {\n      canvas.selection = false;\n      canvas.defaultCursor = \"crosshair\";\n      canvas.forEachObject(function (o) {\n        o.selectable = false;\n        o.hoverCursor = \"move\";\n      });\n      if (openPoly.current !== null) {\n        openPoly.current = null;\n        canvas.forEachObject(function (o) {\n          if (o.name.includes(\"anchor\")) {\n            canvas.remove(o);\n          }\n        });\n        anchors.current = [];\n        canvas.renderAll();\n        const newCanvasState = canvas.toJSON([\"name\"]);\n        saveCanvasState(newCanvasState);\n        sessionStorage.myFabricJSCanvas = JSON.stringify(newCanvasState);\n      }\n    } else {\n      canvas.selection = true;\n      canvas.forEachObject(function (o) {\n        o.selectable = true;\n      });\n      var allObjects = canvas.getObjects();\n      var lastObjectCreated = allObjects[allObjects.length - 1];\n      canvas.setActiveObject(lastObjectCreated);\n      //console.log(lastObjectCreated);\n      canvas.renderAll();\n    }\n\n    canvas.on(\"object:rotating\", function (options) {\n      if (!snap.current) return;\n      var angle = options.target.angle;\n      var locked = Math.ceil(options.target.angle / 5) * 5;\n      if (Math.abs(angle - locked) < 10 || Math.abs(locked - angle) < 10) {\n        angle = locked;\n      }\n\n      options.target.set({\n        angle: angle,\n      });\n    });\n    canvas.on(\"before:render\", function () {\n      var ctx = canvas.getSelectionContext();\n      if (ctx) canvas.clearContext(ctx);\n    });\n    //canvas.on(\"object:added\", onObjectModified);\n    // canvas.on(\"object:modified\", onObjectModified);\n    canvas.on(\"object:modified\", function (e) {\n      const newCanvasState = e.target.canvas.toJSON([\"name\"]);\n      past.push(newCanvasState);\n      setPast(past);\n      //console.log(past);\n      setFuture([]);\n      sessionStorage.clear();\n      sessionStorage.myFabricJSCanvas = JSON.stringify(newCanvasState);\n      // sessionStorage.setItem(\"history\", JSON.stringify(past));\n    });\n    canvas.on(\"object:removed\", function (e) {\n      const newCanvasState = e.target.canvas.toJSON([\"name\"]);\n      past.push(newCanvasState);\n      setPast(past);\n      //console.log(past);\n      setFuture([]);\n      sessionStorage.clear();\n      sessionStorage.myFabricJSCanvas = JSON.stringify(newCanvasState);\n      // sessionStorage.setItem(\"history\", JSON.stringify(past));\n    });\n\n    canvas.on(\"mouse:dblclick\", function (e) {\n      if (canvasTool === \"polygon\") {\n        canvas.remove(line.current);\n        for (var i = 0; i < polyLines.current.length; i++) {\n          canvas.remove(polyLines.current[i]);\n        }\n        newShape.current = true;\n        isDrawing.current = false;\n        var polyGon = null;\n        polyGon = new fabric.Polygon(polyPoints.current, {\n          stroke:\n            \"rgba(\" +\n            stroke.r +\n            \", \" +\n            stroke.g +\n            \", \" +\n            stroke.b +\n            \", \" +\n            stroke.a +\n            \")\",\n          fill:\n            \"rgba(\" +\n            fill.r +\n            \", \" +\n            fill.g +\n            \", \" +\n            fill.b +\n            \", \" +\n            fill.a +\n            \")\",\n          strokeWidth: strokeWidth,\n          selectable: false,\n          hoverCursor: \"default\",\n          name: \"shape-polygon-\" + shapeCount.current,\n        });\n        canvas.add(polyGon);\n        editPoly.current = true;\n        canvas.setActiveObject(polyGon);\n        // document.getElementById(\"select\").click();\n        canvas.renderAll();\n        shapeCount.current++;\n        const newCanvasState = canvas.toJSON([\"name\"]);\n        saveCanvasState(newCanvasState);\n      }\n\n      if (canvasTool === \"polyline\") {\n        canvas.remove(line.current);\n        for (i = 0; i < polyLines.current.length; i++) {\n          canvas.remove(polyLines.current[i]);\n        }\n        newShape.current = true;\n        isDrawing.current = false;\n        var polyLine = new fabric.Polyline(polyPoints.current, {\n          stroke:\n            \"rgba(\" +\n            stroke.r +\n            \", \" +\n            stroke.g +\n            \", \" +\n            stroke.b +\n            \", \" +\n            stroke.a +\n            \")\",\n          fill: \"\",\n          strokeWidth: strokeWidth,\n          selectable: false,\n          hoverCursor: \"default\",\n          name: \"shape-polyline-\" + shapeCount.current,\n        });\n        canvas.add(polyLine);\n        canvas.setActiveObject(polyLine);\n        // document.getElementById(\"select\").click();\n        editPoly.current = true;\n        canvas.renderAll();\n        shapeCount.current++;\n        const newCanvasState = canvas.toJSON([\"name\"]);\n        saveCanvasState(newCanvasState);\n      }\n      if (canvasTool === \"select\") {\n        console.log(e.target);\n        if (e.target === null) return;\n        if (e.target.type === \"polyline\" && editPoly.current) {\n          canvas.set({\n            perPixelTargetFind: false,\n          });\n          canvas.forEachObject(function (o) {\n            if (o.name.includes(\"anchor\")) {\n              canvas.remove(o);\n            }\n          });\n          anchors.current = [];\n          polyType.current = \"polyline\";\n\n          // polyPoints = [];\n          var editable = e.target;\n          openPoly.current = editable; //for future hiding the anchor points.\n          editable.set({\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\",\n          });\n          editPoly.current = false;\n          // console.log(editable.get(\"points\"));\n          var str = editable.get(\"name\");\n          var id = str.split(\"-\");\n          var matrix = editable.calcTransformMatrix();\n          var transformedPoints = editable\n            .get(\"points\")\n            .map(function (p) {\n              return new fabric.Point(\n                p.x - editable.pathOffset.x,\n                p.y - editable.pathOffset.y\n              );\n            })\n            .map(function (p) {\n              return fabric.util.transformPoint(p, matrix);\n            });\n          var pFill = editable.get(\"fill\");\n          var pStroke = editable.get(\"stroke\");\n          var pName = editable.get(\"name\");\n          canvas.remove(editable);\n          var updatedPoly = new fabric.Polyline(transformedPoints, {\n            fill: pFill,\n            stroke: pStroke,\n            name: pName,\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\",\n          });\n          canvas.add(updatedPoly);\n          canvas.sendToBack(updatedPoly);\n          openPoly.current = updatedPoly;\n          anchors.current = [];\n          transformedPoints.forEach(function (p, index) {\n            var anchor = new fabric.Circle({\n              left: p.x,\n              top: p.y,\n              radius: 15,\n              fill: \"green\",\n              originX: \"center\",\n              originY: \"center\",\n              hasControls: false,\n              hasBorders: false,\n              name: \"anchor-\" + id[2] + \"-\" + index,\n            });\n            canvas.add(anchor);\n            anchors.current.push(anchor);\n          });\n          canvas.renderAll();\n          return;\n        }\n        //if (e.target === null && !editPoly.current) {\n        if (e.target.type === \"polyline\" && !editPoly.current) {\n          canvas.set({\n            perPixelTargetFind: true,\n          });\n          polyType.current = \"\";\n          editable = e.target;\n          editable.set({\n            hasControls: true,\n            hasBorders: true,\n            selectable: true,\n            hoverCursor: \"move\",\n          });\n          editPoly.current = true;\n          anchors.current.forEach(function (anchor) {\n            canvas.remove(anchor);\n          });\n          anchors.current = [];\n          openPoly.current = null;\n          canvas.renderAll();\n          return;\n        }\n        if (e.target.type === \"polygon\" && editPoly.current) {\n          if (e.target === null) return;\n          if (e.target.name.includes(\"rpolygon\")) return;\n          canvas.set({\n            perPixelTargetFind: false,\n          });\n          canvas.forEachObject(function (o) {\n            if (o.name.includes(\"anchor\")) {\n              canvas.remove(o);\n            }\n          });\n          anchors.current = [];\n          polyType.current = \"polygon\";\n          // polyPoints = [];\n          editable = e.target;\n          openPoly.current = editable; //for future hiding the anchor points.\n          editable.set({\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\",\n          });\n          editPoly.current = false;\n          // console.log(editable.get(\"points\"));\n          str = editable.get(\"name\");\n          id = str.split(\"-\");\n          matrix = editable.calcTransformMatrix();\n          transformedPoints = editable\n            .get(\"points\")\n            .map(function (p) {\n              return new fabric.Point(\n                p.x - editable.pathOffset.x,\n                p.y - editable.pathOffset.y\n              );\n            })\n            .map(function (p) {\n              return fabric.util.transformPoint(p, matrix);\n            });\n          pFill = editable.get(\"fill\");\n          pStroke = editable.get(\"stroke\");\n          pName = editable.get(\"name\");\n          canvas.remove(editable);\n          updatedPoly = new fabric.Polygon(transformedPoints, {\n            fill: pFill,\n            stroke: pStroke,\n            name: pName,\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\",\n          });\n          canvas.add(updatedPoly);\n          canvas.sendToBack(updatedPoly);\n          anchors.current = [];\n          transformedPoints.forEach(function (p, index) {\n            var anchor = new fabric.Circle({\n              left: p.x,\n              top: p.y,\n              radius: 15,\n              fill: \"green\",\n              originX: \"center\",\n              originY: \"center\",\n              hasControls: false,\n              hasBorders: false,\n              name: \"anchor-\" + id[2] + \"-\" + index,\n            });\n            canvas.add(anchor);\n            anchors.current.push(anchor);\n          });\n          canvas.renderAll();\n          return;\n        }\n        if (e.target.type === \"polygon\" && !editPoly.current) {\n          if (e.target.name.includes(\"rpolygon\")) return;\n          canvas.set({\n            perPixelTargetFind: true,\n          });\n          polyType.current = \"\";\n          editable = e.target;\n          editable.set({\n            hasControls: true,\n            hasBorders: true,\n            selectable: true,\n            hoverCursor: \"move\",\n          });\n          editPoly.current = true;\n          anchors.current.forEach(function (anchor) {\n            canvas.remove(anchor);\n          });\n          anchors.current = [];\n          canvas.renderAll();\n          return;\n        }\n      }\n    });\n    // canvas.on(\"dragenter\", function (options) {\n    //   alert(\"draggin\");\n    // });\n    canvas.on(\"object:moving\", function (options) {\n      // if (options.e.altKey) alert(\"moving\");\n      if (options.target.type !== \"circle\") {\n        if (openPoly.current !== null) {\n          openPoly.current = null;\n          editPoly.current = true;\n          anchors.current.forEach(function (anchor) {\n            canvas.remove(anchor);\n          });\n          anchors.current = [];\n          canvas.renderAll();\n          return;\n        }\n      }\n      if (options.target.type === \"circle\") {\n        var p = options.target;\n        //console.log(p.get(\"name\"));\n        if (p.name.includes(\"circle\")) return;\n        if (p.name.includes(\"arc\")) return;\n        var str = p.name.split(\"-\");\n        if (polyType.current === \"polyline\") {\n          var pname = \"shape-polyline-\" + str[1];\n        }\n        if (polyType.current === \"polygon\") {\n          pname = \"shape-polygon-\" + str[1];\n        }\n\n        //console.log(pname);\n        var object = null;\n        var objects = canvas.getObjects();\n        for (var i = 0; i < objects.length; i++) {\n          if (objects[i].name && objects[i].name === pname) {\n            object = objects[i];\n            break;\n          }\n        }\n        // console.log(object);\n        object.points[str[2]] = {\n          x: p.getCenterPoint().x,\n          y: p.getCenterPoint().y,\n        };\n\n        //console.log(p.getCenterPoint());\n        var pFill = object.get(\"fill\");\n        var pStroke = object.get(\"stroke\");\n        var pName = object.get(\"name\");\n        var pPoints = object.get(\"points\");\n        //UNCOMMENT LINES 39 - 42 TO HAVE A WORKAROUND\n        canvas.remove(object);\n        if (polyType.current === \"polyline\") {\n          var updatedPoly = new fabric.Polyline(pPoints, {\n            fill: pFill,\n            stroke: pStroke,\n            name: pName,\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\",\n          });\n        }\n        if (polyType.current === \"polygon\") {\n          updatedPoly = new fabric.Polygon(pPoints, {\n            fill: pFill,\n            stroke: pStroke,\n            name: pName,\n            hasControls: false,\n            hasBorders: false,\n            selectable: false,\n            hoverCursor: \"default\",\n          });\n        }\n        canvas.add(updatedPoly);\n        canvas.sendToBack(updatedPoly);\n        canvas.renderAll();\n      }\n    });\n\n    canvas.on(\"mouse:up\", function (e) {\n      this.setViewportTransform(this.viewportTransform);\n      this.isDragging = false;\n      mouseMoving.current = false;\n      if (e.button === 2) return;\n      // if (e.button === 3) {\n      //   setActiveTool(e, \"select\");\n      //   setCanvas(\"select\");\n      //   return;\n      // }\n      // this.selection = true;\n      if (canvas.isDrawingMode) {\n        var allObjects = canvas.getObjects();\n        var path = allObjects[allObjects.length - 1];\n        path.set({ name: \"shape-path-\" + shapeCount.current });\n        //console.log(path);\n        shapeCount.current = shapeCount.current + 1;\n        canvas.selection = true;\n        // document.getElementById(\"select\").click();\n        canvas.setActiveObject(allObjects[allObjects.length - 1]);\n        canvas.renderAll();\n        const newCanvasState = canvas.toJSON([\"name\"]);\n        saveCanvasState(newCanvasState);\n        // }\n      }\n\n      if (canvasTool === \"text\") {\n        //console.log(canvas.getObjects());\n        pointer.current = canvas.getPointer(e);\n        var text = new fabric.IText(\"Esc to edit\", {\n          left: pointer.current.x,\n          top: pointer.current.y,\n          fontFamily: \"Arial\",\n          fontSize: \"30\",\n          // fontWeight: \"regular\",\n          //stroke: stroke,\n          // strokeWidth: strokeWidth,\n          // selectable: false,\n          hoverCursor: \"default\",\n          name: \"shape-text-\" + shapeCount.current,\n        });\n        //console.log(text);\n        canvas.add(text);\n        // document.getElementById(\"select\").click();\n        canvas.setActiveObject(text);\n        canvas.renderAll();\n\n        shapeCount.current = shapeCount.current + 1;\n        // Save the canvas to State variable\n        const newCanvasState = canvas.toJSON([\"name\"]);\n\n        saveCanvasState(newCanvasState);\n      }\n      if (canvasTool === \"image\") {\n        pointer.current = canvas.getPointer(e);\n        newShape.current = true;\n        //var fileupload = document.getElementById(\"FileUpload1\");\n        imgFileRef.current.click();\n      }\n      if (canvasTool === \"line\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          var points = [\n            pointer.current.x,\n            pointer.current.y,\n            pointer.current.x,\n            pointer.current.y,\n          ];\n          line.current = new fabric.Line(points, {\n            strokeWidth: strokeWidth,\n            stroke: pickerStroke,\n            originX: \"center\",\n            originY: \"center\",\n            padding: 15,\n            //selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-line-\" + shapeCount.current,\n          });\n          canvas.add(line.current);\n\n          shapeCount.current = shapeCount.current + 1;\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          if (e.e.shiftKey) {\n            var { tx, ty } = determineAdjustedCoords(\n              line.current.x1,\n              line.current.y1,\n              pointer.current.x,\n              pointer.current.y\n            );\n            line.current.set({ x2: tx, y2: ty });\n            // var deltaX = Math.abs(pointer.current.x - line.current.x1);\n            // var deltaY = Math.abs(pointer.current.y - line.current.y1);\n            // if (deltaX > deltaY)\n            //   line.current.set({ x2: pointer.current.x, y2: line.current.y1 });\n            // if (deltaY > deltaX)\n            //   line.current.set({ x2: line.current.x1, y2: pointer.current.y });\n          } else\n            line.current.set({ x2: pointer.current.x, y2: pointer.current.y });\n          // line.current.set({ x2: pointer.current.x, y2: pointer.current.y });\n          // document.getElementById(\"select\").click();\n          canvas.setActiveObject(line.current);\n          canvas.renderAll();\n          newShape.current = true;\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n      if (canvasTool === \"arrow\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          let arrowLinePoints = [\n            pointer.current.x,\n            pointer.current.y,\n            pointer.current.x,\n            pointer.current.y,\n          ];\n          line.current = new fabric.Line(arrowLinePoints, {\n            stroke: pickerStroke,\n            strokeWidth: strokeWidth,\n            originX: \"center\",\n            originY: \"center\",\n            padding: 15,\n          });\n          // reference points for arrowhead\n          origX.current = line.current.x2;\n          origY.current = line.current.y2;\n          let dx = line.current.x2 - line.current.x1,\n            dy = line.current.y2 - line.current.y1;\n          /* calculate angle.current of arrow.current */\n          angle.current = Math.atan2(dy, dx);\n          angle.current *= 180 / Math.PI;\n          angle.current += 90;\n\n          arrow.current = new fabric.Triangle({\n            angle: angle.current,\n            fill: pickerFill,\n            top: line.current.y2,\n            left: line.current.x2,\n            width: 15,\n            height: 15,\n            originX: \"center\",\n            originY: \"center\",\n            stroke: pickerStroke,\n            strokeWidth: strokeWidth,\n          });\n          canvas.add(line.current);\n          canvas.add(arrow.current);\n          canvas.renderAll();\n          newShape.current = false;\n        } else {\n          canvas.remove(line.current);\n          canvas.remove(arrow.current);\n          selectedShape.current = new fabric.Group(\n            [line.current, arrow.current],\n            {\n              hasBorders: true,\n              hasControls: true,\n              selectable: false,\n              hoverCursor: \"default\",\n              originX: \"center\",\n              originY: \"center\",\n            }\n          );\n          shapeCount.current = shapeCount.current + 1;\n          selectedShape.current.set(\n            \"name\",\n            \"shape-arrow-\" + shapeCount.current + 1\n          );\n          canvas.add(selectedShape.current);\n          canvas.setActiveObject(selectedShape.current);\n          // document.getElementById(\"select\").click();\n          newShape.current = true;\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n      if (canvasTool === \"polyline\") {\n        if (newShape.current) {\n          polyPoints.current = [];\n          isDrawing.current = true;\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          polyPoints.current.push(pointer.current);\n          line.current = new fabric.Line(\n            [\n              pointer.current.x,\n              pointer.current.y,\n              pointer.current.x,\n              pointer.current.y,\n            ],\n            {\n              stroke: pickerStroke,\n              strokeWidth: strokeWidth,\n              hasControls: false,\n              hasBorders: false,\n              selectable: false,\n              lockMovementX: true,\n              lockMovementY: true,\n              hoverCursor: \"default\",\n              originX: \"center\",\n              originY: \"center\",\n              padding: 15,\n            }\n          );\n          canvas.add(line.current);\n          //polyLines.current.push(polyline);\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          line.current.set({ x1: pointer.current.x, y1: pointer.current.y });\n          polyPoints.current.push(pointer.current);\n          if (polyPoints.current.length > 1) {\n            var startPoint = polyPoints.current[polyPoints.current.length - 2];\n            var endPoint = polyPoints.current[polyPoints.current.length - 1];\n            var evt = e.e;\n            if (evt.shiftKey === true) {\n              if (\n                Math.abs(pointer.current.x - startPoint.x) >\n                Math.abs(pointer.current.y - startPoint.y)\n              ) {\n                console.log(\"line should be horizontally strait\");\n                endPoint.y = startPoint.y;\n                line.current.set({ x1: pointer.current.x, y1: endPoint.y });\n              } else {\n                console.log(\"line should be vertically strait\");\n                endPoint.x = startPoint.x;\n                line.current.set({\n                  x1: startPoint.x,\n                  y1: pointer.current.y,\n                });\n              }\n              polyPoints.current.pop();\n              polyPoints.current.push(endPoint);\n            }\n            var newPolyLine = new fabric.Line(\n              [startPoint.x, startPoint.y, endPoint.x, endPoint.y],\n              {\n                stroke: pickerStroke,\n                strokeWidth: strokeWidth,\n                hasControls: false,\n                hasBorders: false,\n                selectable: false,\n                lockMovementX: true,\n                lockMovementY: true,\n                hoverCursor: \"default\",\n                originX: \"center\",\n                originY: \"center\",\n                padding: 15,\n              }\n            );\n            var distance = Math.sqrt(\n              Math.pow(origX.current - pointer.current.x, 2) +\n                Math.pow(origY.current - pointer.current.y, 2)\n            );\n            console.log(distance);\n            if (distance < 20) {\n              if (\n                window.confirm(\n                  \"Close the shape? Press OK to close it. Cancel to keep the shape open.\"\n                )\n              ) {\n                newPolyLine.set({\n                  x2: origX.current,\n                  y2: origY.current,\n                });\n                canvas.add(newPolyLine);\n                canvas.renderAll();\n                polyLines.current.push(newPolyLine);\n\n                canvas.remove(line.current);\n                for (var i = 0; i < polyLines.current.length; i++) {\n                  canvas.remove(polyLines.current[i]);\n                }\n                newShape.current = true;\n                isDrawing.current = false;\n                polyLine.current = null;\n                polyPoints.current.pop();\n                polyPoints.current.push(polyPoints.current[0]);\n                console.log(polyPoints.current);\n                polyLine.current = new fabric.Polygon(polyPoints.current, {\n                  stroke: pickerStroke,\n                  fill: pickerFill,\n                  strokeWidth: strokeWidth,\n                  padding: 15,\n                  selectable: false,\n                  hoverCursor: \"default\",\n                  name: \"shape-polygon-\" + shapeCount.current,\n                });\n                // console.log(fill);\n                canvas.add(polyLine.current);\n                canvas.setActiveObject(polyLine.current);\n                // document.getElementById(\"select\").click();\n                editPoly.current = true;\n                canvas.renderAll();\n                shapeCount.current++;\n                const newCanvasState = canvas.toJSON([\"name\"]);\n                saveCanvasState(newCanvasState);\n                return;\n              } else {\n                // Do nothing!\n                console.log(\"Shape still open double click to finish\");\n              }\n            }\n            canvas.add(newPolyLine);\n            polyLines.current.push(newPolyLine);\n            canvas.renderAll();\n          }\n        }\n      }\n      if (canvasTool === \"polygon\") {\n        if (newShape.current) {\n          polyPoints.current = [];\n          isDrawing.current = true;\n          pointer.current = canvas.getPointer(e);\n          polyPoints.current.push(pointer.current);\n          line.current = new fabric.Line(\n            [\n              pointer.current.x,\n              pointer.current.y,\n              pointer.current.x,\n              pointer.current.y,\n            ],\n            {\n              stroke: pickerStroke,\n              strokeWidth: strokeWidth,\n              padding: 15,\n              hasControls: false,\n              hasBorders: false,\n              selectable: false,\n              lockMovementX: true,\n              lockMovementY: true,\n              hoverCursor: \"default\",\n              originX: \"center\",\n              originY: \"center\",\n            }\n          );\n          canvas.add(line.current);\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          line.current.set({ x1: pointer.current.x, y1: pointer.current.y });\n          polyPoints.current.push(pointer.current);\n          if (polyPoints.current.length > 1) {\n            startPoint = polyPoints.current[polyPoints.current.length - 2];\n            endPoint = polyPoints.current[polyPoints.current.length - 1];\n            newPolyLine = new fabric.Line(\n              [startPoint.x, startPoint.y, endPoint.x, endPoint.y],\n              {\n                stroke: pickerStroke,\n                strokeWidth: strokeWidth,\n                padding: 15,\n                hasControls: false,\n                hasBorders: false,\n                selectable: false,\n                lockMovementX: true,\n                lockMovementY: true,\n                hoverCursor: \"default\",\n                originX: \"center\",\n                originY: \"center\",\n              }\n            );\n            canvas.add(newPolyLine);\n            polyLines.current.push(newPolyLine);\n            canvas.renderAll();\n          }\n        }\n      }\n      if (canvasTool === \"rpolygon\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          rpolygon.current = new fabric.Polygon(\n            calcPolygonPoints(\n              8,\n              Math.abs(origX.current - pointer.current.x) / 2\n            ),\n            {\n              objectCaching: false,\n              left: origX.current,\n              top: origY.current,\n              originX: \"center\",\n              originY: \"center\",\n              fill: pickerFill,\n              perPixelTargetFind: false,\n              strokeWidth: strokeWidth,\n              stroke: pickerStroke,\n              hasControls: false,\n              hasBorders: false,\n              padding: 15,\n              name: \"shape-rpolygon-\" + shapeCount.current,\n            }\n          );\n          canvas.add(rpolygon.current);\n          newShape.current = false;\n          shapeCount.current++;\n        } else {\n          newShape.current = true;\n          var matrix = rpolygon.current.calcTransformMatrix();\n          var transformedPoints = rpolygon.current\n            .get(\"points\")\n            .map(function (p) {\n              return new fabric.Point(\n                p.x - rpolygon.current.pathOffset.x,\n                p.y - rpolygon.current.pathOffset.y\n              );\n            })\n            .map(function (p) {\n              return fabric.util.transformPoint(p, matrix);\n            });\n          canvas.remove(rpolygon.current);\n          var updatedPoly = new fabric.Polygon(transformedPoints, {\n            fill: pickerFill,\n            stroke: pickerStroke,\n            padding: 15,\n            name: \"shape-rpolygon-\" + shapeCount.current,\n            // hasControls: false,\n            // hasBorders: false,\n            //selectable: false,\n            hoverCursor: \"default\",\n          });\n          updatedPoly.set({\n            originX: \"center\",\n            originY: \"center\",\n            left: origX.current + updatedPoly.width / 2,\n            top: origY.current + updatedPoly.height / 2,\n          });\n          canvas.add(updatedPoly);\n          canvas.setActiveObject(updatedPoly);\n          //  document.getElementById(\"select\").click();\n          canvas.renderAll();\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n      if (canvasTool === \"rect\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          Rectangle.current = new fabric.Rect({\n            left: origX.current,\n            top: origY.current,\n            fill: pickerFill,\n            stroke: pickerStroke,\n            strokeWidth: strokeWidth,\n            padding: 15,\n            strokeDashArray: [dashSize, gapSize],\n            centeredScaling: true,\n            opacity: opacity,\n            selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-rect-\" + shapeCount.current,\n          });\n          shapeCount.current++;\n\n          canvas.add(Rectangle.current);\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n\n          if (origX.current > pointer.current.x) {\n            Rectangle.current.set({ left: Math.abs(pointer.current.x) });\n          }\n          if (origY.current > pointer.current.y) {\n            Rectangle.current.set({ top: Math.abs(pointer.current.y) });\n          }\n          Rectangle.current.set({\n            width: Math.abs(origX.current - pointer.current.x),\n          });\n          Rectangle.current.set({\n            height: Math.abs(origY.current - pointer.current.y),\n          });\n          Rectangle.current.set({\n            originX: \"center\",\n            originY: \"center\",\n            left: origX.current + Rectangle.current.width / 2,\n            top: origY.current + Rectangle.current.height / 2,\n          });\n          newShape.current = true;\n          canvas.setActiveObject(Rectangle.current);\n\n          //  document.getElementById(\"select\").click();\n          canvas.renderAll();\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n      if (canvasTool === \"arc\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          circle.current = new fabric.Circle({\n            left: origX.current,\n            top: origY.current,\n            originX: \"left\",\n            originY: \"top\",\n            radius: pointer.current.x - origX.current,\n            angle: 45,\n            startAngle: 0,\n            endAngle: Math.PI,\n            fill: pickerFill,\n            stroke: pickerStroke,\n            strokeWidth: strokeWidth,\n            padding: 15,\n            selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-arc-\" + shapeCount.current,\n          });\n          canvas.add(circle.current);\n          newShape.current = false;\n          shapeCount.current++;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          var radius =\n            Math.max(\n              Math.abs(origY.current - pointer.current.y),\n              Math.abs(origX.current - pointer.current.x)\n            ) / 2;\n          if (radius > circle.current.strokeWidth) {\n            radius -= circle.current.strokeWidth / 2;\n          }\n          circle.current.set({ radius: radius });\n\n          if (origX.current > pointer.current.x) {\n            circle.current.set({ originX: \"right\" });\n          } else {\n            circle.current.set({ originX: \"left\" });\n          }\n          if (origY.current > pointer.current.y) {\n            circle.current.set({ originY: \"bottom\" });\n          } else {\n            circle.current.set({ originY: \"top\" });\n          }\n          newShape.current = true;\n          canvas.setActiveObject(circle.current);\n          // document.getElementById(\"select\").click();\n          canvas.renderAll();\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n      if (canvasTool === \"circle\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          circle.current = new fabric.Circle({\n            left: origX.current,\n            top: origY.current,\n            originX: \"left\",\n            originY: \"top\",\n            radius: pointer.current.x - origX.current,\n            angle: 0,\n            fill: pickerFill,\n            stroke: pickerStroke,\n            strokeWidth: strokeWidth,\n            padding: 15,\n            selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-circle-\" + shapeCount.current,\n          });\n          canvas.add(circle.current);\n          newShape.current = false;\n          shapeCount.current++;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          radius =\n            Math.max(\n              Math.abs(origY.current - pointer.current.y),\n              Math.abs(origX.current - pointer.current.x)\n            ) / 2;\n\n          if (radius > circle.current.strokeWidth) {\n            radius -= circle.current.strokeWidth / 2;\n          }\n          radius += someValue.current;\n          circle.current.set({ radius: radius });\n\n          if (origX.current > pointer.current.x) {\n            circle.current.set({ originX: \"right\" });\n          } else {\n            circle.current.set({ originX: \"left\" });\n          }\n          if (origY.current > pointer.current.y) {\n            circle.current.set({ originY: \"bottom\" });\n          } else {\n            circle.current.set({ originY: \"top\" });\n          }\n          circle.current.set({\n            originX: \"center\",\n            originY: \"center\",\n            left: origX.current + circle.current.radius,\n            top: origY.current + circle.current.radius,\n          });\n          newShape.current = true;\n          canvas.setActiveObject(circle.current);\n          //  document.getElementById(\"select\").click();\n          canvas.renderAll();\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n      if (canvasTool === \"ellipse\") {\n        if (newShape.current) {\n          pointer.current = canvas.getPointer(e);\n          origX.current = pointer.current.x;\n          origY.current = pointer.current.y;\n          ellipse.current = new fabric.Ellipse({\n            left: origX.current,\n            top: origY.current,\n            originX: \"left\",\n            originY: \"top\",\n            rx: pointer.current.x - origX.current,\n            ry: pointer.current.y - origY.current,\n            angle: 0,\n            fill: pickerFill,\n            stroke: pickerStroke,\n            strokeWidth: strokeWidth,\n            padding: 15,\n            type: \"ellipse\",\n            selectable: false,\n            hoverCursor: \"default\",\n            name: \"shape-ellipse-\" + shapeCount.current,\n          });\n          canvas.add(ellipse.current);\n          newShape.current = false;\n        } else {\n          pointer.current = canvas.getPointer(e);\n          var rx = Math.abs(origX.current - pointer.current.x) / 2;\n          var ry = Math.abs(origY.current - pointer.current.y) / 2;\n          rx += someValue.current;\n          ry += someValue.current;\n          if (rx > ellipse.current.strokeWidth) {\n            rx -= ellipse.current.strokeWidth / 2;\n          }\n          if (ry > ellipse.current.strokeWidth) {\n            ry -= ellipse.current.strokeWidth / 2;\n          }\n          ellipse.current.set({ rx: rx, ry: ry });\n\n          if (origX.current > pointer.current.x) {\n            ellipse.current.set({ originX: \"right\" });\n          } else {\n            ellipse.current.set({ originX: \"left\" });\n          }\n          if (origY.current > pointer.current.y) {\n            ellipse.current.set({ originY: \"bottom\" });\n          } else {\n            ellipse.current.set({ originY: \"top\" });\n          }\n          ellipse.current.set({\n            originX: \"center\",\n            originY: \"center\",\n            left: origX.current + ellipse.current.rx,\n            top: origY.current + ellipse.current.ry,\n          });\n          newShape.current = true;\n          canvas.setActiveObject(ellipse.current);\n          // document.getElementById(\"select\").click();\n          canvas.renderAll();\n          // Save the canvas to State variable\n          const newCanvasState = canvas.toJSON([\"name\"]);\n          saveCanvasState(newCanvasState);\n        }\n      }\n      //check if user clicked an object\n      if (e.target) {\n        evt = e.e;\n        if (evt.altKey === true) {\n          if (e.target.name.includes(\"anchor\")) {\n            console.log(e.target);\n            var editable = openPoly.current;\n            var newPoints = editable.get(\"points\");\n            console.log(newPoints.length);\n            if (newPoints.length <= 3) return;\n            canvas.remove(e.target);\n\n            var pFill = editable.get(\"fill\");\n            var pStroke = editable.get(\"stroke\");\n            var pName = editable.get(\"name\");\n\n            var id = e.target.name.split(\"-\");\n            var pointIndex = parseInt(id[2]);\n            var cloneArray = newPoints.slice();\n            cloneArray.splice(pointIndex, 1);\n            console.log(newPoints);\n            console.log(cloneArray);\n\n            //canvas.remove(openPoly.current);\n            editable.set({ points: cloneArray });\n            console.log(editable);\n            /*\n            var updatedPoly = new fabric.Polyline(cloneArray, {\n              fill: pFill,\n              stroke: pStroke,\n              name: pName,\n              hasControls: false,\n              hasBorders: false,\n              selectable: false,\n              hoverCursor: \"default\",\n            });\n            canvas.add(updatedPoly);\n            canvas.sendToBack(updatedPoly);\n            */\n            canvas.renderAll();\n            //anchors.current = [];\n          }\n        }\n        if (!editPoly.current) return;\n        var activeShape = canvas.getActiveObject();\n        //if (activeShape.length > 1) return;\n        //        console.log(activeShape.type);\n        if (activeShape) {\n          console.log(activeShape);\n          // if (activeShape.stroke && activeShape.type !== \"i-text\") {\n          //   if (currentStroke.current !== null) {\n          //     var rgba = currentStroke.current\n          //       .substr(5)\n          //       .split(\")\")[0]\n          //       .split(\",\");\n          //     setStrokeColor({\n          //       r: rgba[0],\n          //       g: rgba[1],\n          //       b: rgba[2],\n          //       a: rgba[3],\n          //     });\n          //     //if()\n          //     console.log(activeShape.stroke);\n          //     setPickerColor(activeShape.stroke);\n\n          //     currentStroke.current = activeShape.stroke;\n          //     // activeObjectStrokeRef.current();\n          //     if (activeObjectStrokeRef?.current) {\n          //       activeObjectStrokeRef.current(activeShape.stroke);\n          //     }\n          //   }\n          //   setStrokeWidth(activeShape.strokeWidth);\n          // } else {\n          //   if (activeObjectStrokeRef?.current) {\n          //     activeObjectStrokeRef.current(\"nill\");\n          //   }\n          // }\n          if (activeShape.stroke !== null && activeShape.type !== \"i-text\") {\n            // setPickerColorStroke(activeShape.stroke);\n            if (activeObjectStrokeRef?.current) {\n              activeObjectStrokeRef.current(activeShape.stroke);\n            }\n          } else {\n            if (activeObjectStrokeRef?.current) {\n              activeObjectStrokeRef.current(\"nill\");\n            }\n          }\n          if (activeShape.fill) {\n            // setPickerColorFill(activeShape.fill);\n            if (activeObjectFillRef?.current) {\n              activeObjectFillRef.current(activeShape.fill);\n            }\n          } else {\n            if (activeObjectFillRef?.current) {\n              activeObjectFillRef.current(\"nill\");\n            }\n            // console.log(activeShape.fill);\n            // rgba = activeShape.fill.substr(5).split(\")\")[0].split(\",\");\n            // setFillColor({ r: rgba[0], g: rgba[1], b: rgba[2], a: rgba[3] });\n          }\n          //console.log(activeShape.opacity);\n          if (Number.isNaN(activeShape.opacity)) setOpacity(100);\n          else setOpacity(activeShape.opacity * 100);\n          //setOpacity(activeShape.opacity * 100);\n          //setFont(activeShape.fontFamily);\n          ///setFontSize(activeShape.fontSize);\n          //setFontWeight(activeShape.fontWeight);\n          //setFontStyle(activeShape.fontStyle);\n        }\n      }\n    });\n\n    canvas.on(\"mouse:wheel\", function (opt) {\n      var delta = opt.e.deltaY;\n      var zoom = canvas.getZoom();\n      zoom *= 0.999 ** delta;\n      if (zoom > 20) zoom = 20;\n      if (zoom < 0.01) zoom = 0.01;\n      canvas.zoomToPoint({ x: opt.e.offsetX, y: opt.e.offsetY }, zoom);\n      opt.e.preventDefault();\n      opt.e.stopPropagation();\n      var vpt = this.viewportTransform;\n      if (zoom < 400 / 1000) {\n        vpt[4] = 200 - (1000 * zoom) / 2;\n        vpt[5] = 200 - (1000 * zoom) / 2;\n      } else {\n        if (vpt[4] >= 0) {\n          vpt[4] = 0;\n        } else if (vpt[4] < canvas.getWidth() - 1000 * zoom) {\n          vpt[4] = canvas.getWidth() - 1000 * zoom;\n        }\n        if (vpt[5] >= 0) {\n          vpt[5] = 0;\n        } else if (vpt[5] < canvas.getHeight() - 1000 * zoom) {\n          vpt[5] = canvas.getHeight() - 1000 * zoom;\n        }\n      }\n    });\n    //object.on\n    canvas.on(\"mouse:down\", function (opt) {\n      if (canvasTool !== \"select\") {\n        this.selection = false;\n      }\n      var evt = opt.e;\n      if (opt.button === 2) {\n        this.isDragging = true;\n        this.selection = false;\n        this.lastPosX = evt.clientX;\n        this.lastPosY = evt.clientY;\n      }\n      // if (opt.button === 3) {\n      //   setCanvasTool(\"select\");\n      //   setActiveTool(evt, \"select\");\n      //   //document.getElementById(\"select\").click();\n      //   // canvas.renderAll();\n      //   //this.selection = true;\n      //   canvasRef.current.click();\n\n      //   //return;\n      // }\n      if (opt.e.altKey) {\n        if (evt.target) {\n          var temp, oObjectType;\n          var oObject = canvas.getActiveObject();\n\n          if (oObject) {\n            oObjectType = oObject.get(\"type\");\n            oObject.clone(function (cloned) {\n              temp = cloned;\n            });\n            shapeCount.current = shapeCount.current + 1;\n            temp.set({\n              hasControls: false,\n              hasBorders: false,\n              name: oObjectType + shapeCount.current,\n            });\n\n            canvas.add(temp);\n            canvas.renderAll();\n\n            // Save the canvas to State variable\n            const newCanvasState = canvas.toJSON([\"name\"]);\n            saveCanvasState(newCanvasState);\n          }\n        }\n      }\n    });\n    canvas.on(\"mouse:move\", function (opt) {\n      if (this.isDragging) {\n        var e = opt.e;\n        var vpt = this.viewportTransform;\n        vpt[4] += e.clientX - this.lastPosX;\n        vpt[5] += e.clientY - this.lastPosY;\n        this.requestRenderAll();\n        this.lastPosX = e.clientX;\n        this.lastPosY = e.clientY;\n      }\n      if (newShape.current === true && canvasTool !== \"pen\") {\n        return;\n      }\n      if (canvasTool === \"rect\") {\n        mouseMoving.current = true;\n        pointer.current = canvas.getPointer(opt);\n        if (origX.current > pointer.current.x) {\n          Rectangle.current.set({ left: Math.abs(pointer.current.x) });\n        }\n        if (origY.current > pointer.current.y) {\n          Rectangle.current.set({ top: Math.abs(pointer.current.y) });\n        }\n        Rectangle.current.set({\n          width: Math.abs(origX.current - pointer.current.x),\n        });\n        Rectangle.current.set({\n          height: Math.abs(origY.current - pointer.current.y),\n        });\n        canvas.requestRenderAll();\n      }\n      if (canvasTool === \"line\") {\n        mouseMoving.current = true;\n        pointer.current = canvas.getPointer(opt);\n        if (opt.e.shiftKey) {\n          var { tx, ty } = determineAdjustedCoords(\n            line.current.x1,\n            line.current.y1,\n            pointer.current.x,\n            pointer.current.y\n          );\n          line.current.set({ x2: tx, y2: ty });\n          // var deltaX = Math.abs(pointer.current.x - line.current.x1);\n          // var deltaY = Math.abs(pointer.current.y - line.current.y1);\n          // if (deltaX > deltaY)\n          //   line.current.set({ x2: pointer.current.x, y2: line.current.y1 });\n          // if (deltaY > deltaX)\n          //   line.current.set({ x2: line.current.x1, y2: pointer.current.y });\n        } else\n          line.current.set({ x2: pointer.current.x, y2: pointer.current.y });\n\n        canvas.renderAll();\n      }\n      if (canvasTool === \"arrow\") {\n        mouseMoving.current = true;\n        pointer.current = canvas.getPointer(opt);\n        if (opt.e.shiftKey) {\n          var { tx, ty } = determineAdjustedCoords(\n            line.current.x1,\n            line.current.y1,\n            pointer.current.x,\n            pointer.current.y\n          );\n          line.current.set({ x2: tx, y2: ty });\n          // var deltaX = Math.abs(pointer.current.x - line.current.x1);\n          // var deltaY = Math.abs(pointer.current.y - line.current.y1);\n          // if (deltaX > deltaY)\n          //   line.current.set({ x2: pointer.current.x, y2: line.current.y1 });\n          // if (deltaY > deltaX)\n          //   line.current.set({ x2: line.current.x1, y2: pointer.current.y });\n        } else\n          line.current.set({ x2: pointer.current.x, y2: pointer.current.y });\n\n        let dx = line.current.x2 - line.current.x1,\n          dy = line.current.y2 - line.current.y1;\n        angle.current = Math.atan2(dy, dx);\n        angle.current *= 180 / Math.PI;\n        angle.current += 90;\n        arrow.current.set({\n          top: line.current.y2,\n          left: line.current.x2,\n          angle: angle.current,\n          width: 15,\n          height: 15,\n        });\n        canvas.renderAll();\n      }\n      if (canvasTool === \"polyline\") {\n        if (isDrawing.current) {\n          mouseMoving.current = true;\n          var endPoint = canvas.getPointer(opt);\n          var evt = opt.e;\n          if (evt.shiftKey === true) {\n            if (\n              Math.abs(endPoint.x - line.current.x1) >\n              Math.abs(endPoint.y - line.current.y1)\n            ) {\n              console.log(\"line should be horizontally strait\");\n              line.current.set({\n                x2: endPoint.x,\n                y2: line.current.y1,\n              });\n              canvas.renderAll();\n              return;\n            } else {\n              console.log(\"line should be vertically strait\");\n              line.current.set({\n                x2: line.current.x1,\n                y2: endPoint.y,\n              });\n              canvas.renderAll();\n              return;\n            }\n          }\n          line.current.set({\n            x2: endPoint.x,\n            y2: endPoint.y,\n          });\n          canvas.renderAll();\n        }\n      }\n      if (canvasTool === \"polygon\") {\n        if (isDrawing.current) {\n          mouseMoving.current = true;\n          endPoint = canvas.getPointer(opt);\n          line.current.set({\n            x2: endPoint.x,\n            y2: endPoint.y,\n          });\n          canvas.renderAll();\n        }\n      }\n      if (canvasTool === \"rpolygon\") {\n        mouseMoving.current = true;\n        pointer.current = canvas.getPointer(opt);\n        rpolygon.current.set({\n          points: calcPolygonPoints(\n            8,\n            Math.abs(origX.current - pointer.current.x) / 2\n          ),\n          left: origX.current,\n          top: origY.current,\n        });\n        canvas.renderAll();\n      }\n      if (canvasTool === \"arc\") {\n        mouseMoving.current = true;\n        pointer.current = canvas.getPointer(opt);\n        var radius =\n          Math.max(\n            Math.abs(origY.current - pointer.current.y),\n            Math.abs(origX.current - pointer.current.x)\n          ) / 2;\n        if (radius > circle.current.strokeWidth) {\n          radius -= circle.current.strokeWidth / 2;\n        }\n        circle.current.set({ radius: radius });\n        if (origX.current > pointer.current.x) {\n          circle.current.set({ originX: \"right\" });\n          circle.current.set({ angle: -135 });\n        } else {\n          circle.current.set({ originX: \"left\" });\n          circle.current.set({ angle: 135 });\n        }\n        if (origY.current > pointer.current.y) {\n          circle.current.set({ originY: \"bottom\" });\n        } else {\n          circle.current.set({ originY: \"top\" });\n        }\n        canvas.renderAll();\n      }\n      if (canvasTool === \"circle\") {\n        mouseMoving.current = true;\n        pointer.current = canvas.getPointer(opt);\n        someValue.current =\n          Math.max(\n            Math.abs(origX.current - pointer.current.x),\n            Math.abs(origY.current - pointer.current.y)\n          ) / 20;\n        radius =\n          Math.max(\n            Math.abs(origX.current - pointer.current.x),\n            Math.abs(origY.current - pointer.current.y)\n          ) / 2;\n        // radius = Math.abs(origX.current - pointer.current.x) / 2;\n        radius += someValue.current;\n        if (radius > circle.current.strokeWidth) {\n          radius -= circle.current.strokeWidth / 2;\n        }\n        circle.current.set({ radius: radius });\n        if (origX.current > pointer.current.x) {\n          circle.current.set({ originX: \"right\" });\n        } else {\n          circle.current.set({ originX: \"left\" });\n        }\n        if (origY.current > pointer.current.y) {\n          circle.current.set({ originY: \"bottom\" });\n        } else {\n          circle.current.set({ originY: \"top\" });\n        }\n        canvas.renderAll();\n      }\n      if (canvasTool === \"ellipse\") {\n        mouseMoving.current = true;\n        pointer.current = canvas.getPointer(opt);\n        var rx = Math.abs(origX.current - pointer.current.x) / 2;\n        var ry = Math.abs(origY.current - pointer.current.y) / 2;\n        someValue.current =\n          Math.max(\n            Math.abs(origX.current - pointer.current.x),\n            Math.abs(origY.current - pointer.current.y)\n          ) / 20;\n        rx += someValue.current;\n        ry += someValue.current;\n        if (rx > ellipse.current.strokeWidth) {\n          rx -= ellipse.current.strokeWidth / 2;\n        }\n        if (ry > ellipse.current.strokeWidth) {\n          ry -= ellipse.current.strokeWidth / 2;\n        }\n        ellipse.current.set({ rx: rx, ry: ry });\n        if (origX.current > pointer.current.x) {\n          ellipse.current.set({ originX: \"right\" });\n        } else {\n          ellipse.current.set({ originX: \"left\" });\n        }\n        if (origY.current > pointer.current.y) {\n          ellipse.current.set({ originY: \"bottom\" });\n        } else {\n          ellipse.current.set({ originY: \"top\" });\n        }\n        canvas.renderAll();\n      }\n    });\n\n    canvas.on(\"mouse:over\", function (e) {\n      /*\n      if (e.target) {\n        //console.log(currentStroke.current);\n        currentStroke.current = e.target.get(\"stroke\");\n        //console.log(currentStroke.current);\n        e.target.set(\"stroke\", \"rgba(255,0,0,1)\");\n        canvas.renderAll();\n      }\n      */\n    });\n\n    canvas.on(\"mouse:out\", function (e) {\n      /*\n      if (e.target) {\n        e.target.set(\"stroke\", currentStroke.current);\n        canvas.renderAll();\n      }\n      */\n    });\n\n    setCanvas(canvas);\n\n    return () => {\n      canvas.dispose();\n      imgFileRef.current.removeEventListener(\"change\", handleImageFileLoad);\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, [canvasRef, canvasTool, setCanvas]);\n\n  //const onUndo = useCallback(() => moveHistory(-1), [moveHistory]);\n  const onUndo = () => {\n    const present = past.pop();\n    const newFuture = [present, ...future];\n    setFuture(newFuture);\n    const previous = past[past.length - 1];\n    canvas.loadFromJSON(previous);\n    setPast(past);\n    console.log(past);\n  };\n  // const onRedo = useCallback(() => moveHistory(1), [moveHistory]);\n  const onRedo = () => {\n    const next = future[0];\n    canvas.loadFromJSON(next);\n    const newFuture = future.slice(1);\n    past.push(next);\n    setPast(past);\n    setFuture(newFuture);\n    console.log(future);\n  };\n  const setShapeAttributes = (attributes) => {\n    if (canvas === undefined) return;\n    var activeShape = canvas.getActiveObject();\n    if (activeShape) {\n      var Attributes = attributes || {};\n      if (activeShape.type === \"group\") {\n        activeShape.item(0).set({\n          stroke: Attributes.stroke || activeShape.item(1).stroke,\n          strokeWidth:\n            Attributes.strokeWidth || activeShape.item(1).strokeWidth,\n        });\n        activeShape.item(1).set({\n          stroke: Attributes.stroke || activeShape.item(1).stroke,\n          strokeWidth:\n            Attributes.strokeWidth || activeShape.item(1).strokeWidth,\n          fill: Attributes.fill || activeShape.item(1).fill,\n        });\n      }\n      activeShape.set({\n        strokeWidth: Attributes.strokeWidth || activeShape.strokeWidth,\n        stroke:\n          Attributes.stroke === \"nill\"\n            ? null\n            : Attributes.stroke || activeShape.stroke,\n        fill:\n          Attributes.fill === \"nill\"\n            ? null\n            : Attributes.fill || activeShape.fill,\n        opacity: Attributes.opacity / 100 || activeShape.opacity,\n        strokeDashArray:\n          Attributes.strokeDashArray || activeShape.strokeDashArray,\n        fontFamily: Attributes.fontFamily || activeShape.fontFamily,\n        fontSize: Attributes.fontSize || activeShape.fontSize,\n        fontWeight: Attributes.fontWeight || activeShape.fontWeight,\n        fontStyle: Attributes.fontStyle || activeShape.fontStyle,\n        textBackgroundColor:\n          Attributes.textBackgroundColor || activeShape.textBackgroundColor,\n      });\n      canvas.renderAll();\n      canvas.setActiveObject(activeShape);\n      const newCanvasState = canvas.toJSON([\"name\"]);\n      saveCanvasState(newCanvasState);\n    }\n  };\n\n  function deleteObjects() {\n    if (canvas.getActiveObjects().length === 0) {\n      // window.location.reload();\n      return;\n    }\n    canvas.getActiveObjects().forEach((obj) => {\n      canvas.remove(obj);\n    });\n  }\n\n  /*\n  var simulateMouseEvent = function (element, eventName, coordX, coordY) {\n    element.dispatchEvent(\n      new MouseEvent(eventName, {\n        view: window,\n        bubbles: true,\n        cancelable: true,\n        clientX: coordX,\n        clientY: coordY,\n        button: 0,\n      })\n    );\n  };\n\n  \n  function hexToRGB(hex, alpha) {\n    var r = parseInt(hex.slice(1, 3), 16),\n      g = parseInt(hex.slice(3, 5), 16),\n      b = parseInt(hex.slice(5, 7), 16);\n    if (alpha) {\n      return \"rgba(\" + r + \", \" + g + \", \" + b + \", \" + alpha + \")\";\n    } else {\n      return \"rgb(\" + r + \", \" + g + \", \" + b + \")\";\n    }\n  }\n*/\n  function w3_openPanel(evt, panelId) {\n    if (currentOpenPanel !== panelId) {\n      document.getElementById(\"Library\").style.height = \"400px\";\n      document.getElementById(panelId).style.display = \"block\";\n      if (currentOpenPanel !== \"none\")\n        document.getElementById(currentOpenPanel).style.display = \"none\";\n      currentOpenPanel = panelId;\n      return;\n    }\n\n    if (currentOpenPanel === panelId) {\n      if (panelId === \"none\") return;\n      document.getElementById(panelId).style.display = \"none\";\n      currentOpenPanel = \"none\";\n      document.getElementById(\"Library\").style.height = \"0px\";\n    }\n    /*\n    else {\n      if (currentOpenPanel !== \"None\") {\n        document.getElementById(currentOpenPanel).style.display = \"none\";\n      }\n      document.getElementById(\"Library\").style.height = \"400px\";\n      document.getElementById(panelId).style.display = \"block\";\n      currentOpenPanel = panelId;\n    }\n    */\n  }\n\n  const setActiveTool = (e, id) => {\n    if (currentToolId.current !== null) {\n      //console.log(currentToolId);\n      document.getElementById(currentToolId.current).style.backgroundColor =\n        \"#003059\";\n      document.getElementById(id).style.backgroundColor = \"grey\";\n      currentToolId.current = id;\n      return;\n    } else {\n      //console.log(id);\n      document.getElementById(id).style.backgroundColor = \"grey\";\n      currentToolId.current = id;\n    }\n  };\n\n  function handleKeyDown(event) {\n    if (mouseMoving.current === false) {\n      if (event.key === \"Escape\") {\n        setCanvasTool(\"select\");\n        setActiveTool(event, \"select\");\n        return;\n      }\n      if (event.key === \"s\") {\n        setCanvasTool(\"select\");\n        setActiveTool(event, \"select\");\n        return;\n      }\n      if (event.key === \"r\") {\n        setCanvasTool(\"rect\");\n        setActiveTool(event, \"rect\");\n        return;\n      }\n      if (event.key === \"l\") {\n        setCanvasTool(\"line\");\n        setActiveTool(event, \"line\");\n        return;\n      }\n      if (event.key === \"a\") {\n        setCanvasTool(\"arrow\");\n        setActiveTool(event, \"arrow\");\n        return;\n      }\n      if (event.key === \"c\") {\n        setCanvasTool(\"circle\");\n        setActiveTool(event, \"circle\");\n        return;\n      }\n      if (event.key === \"e\") {\n        setCanvasTool(\"ellipse\");\n        setActiveTool(event, \"ellipse\");\n        return;\n      }\n      if (event.key === \"t\") {\n        setCanvasTool(\"text\");\n        setActiveTool(event, \"text\");\n        return;\n      }\n      if (event.key === \"p\") {\n        setCanvasTool(\"pen\");\n        setActiveTool(event, \"pen\");\n        return;\n      }\n      if (event.key === \"Delete\") {\n        deleteObjects();\n        return;\n      }\n\n      if (event.ctrlKey && event.key === \"z\") {\n        if (past.length === 1) return;\n        onUndo();\n        return;\n      }\n      if (event.ctrlKey && event.key === \"y\") {\n        if (future.length === 0) return;\n        onRedo();\n        return;\n      }\n    }\n    if (mouseMoving.current === true) {\n      mouseMoving.current = false;\n      if (event.key === \"Escape\") {\n        if (canvasTool === \"rect\") {\n          canvas.remove(Rectangle.current);\n          newShape.current = true;\n          shapeCount.current--;\n          return;\n        }\n        if (canvasTool === \"line\") {\n          canvas.remove(line.current);\n          newShape.current = true;\n          shapeCount.current--;\n          return;\n        }\n        if (canvasTool === \"arrow\") {\n          canvas.remove(line.current);\n          canvas.remove(arrow.current);\n          newShape.current = true;\n          return;\n        }\n        if (canvasTool === \"polyline\") {\n          canvas.remove(line.current);\n          //canvas.remove(polyLine.current);\n          newShape.current = true;\n          return;\n        }\n        if (canvasTool === \"polygon\") {\n          canvas.remove(line.current);\n          newShape.current = true;\n          return;\n        }\n        if (canvasTool === \"rpolygon\") {\n          canvas.remove(rpolygon.current);\n          newShape.current = true;\n          shapeCount.current--;\n          return;\n        }\n        if (canvasTool === \"arc\") {\n          canvas.remove(circle.current);\n          newShape.current = true;\n          shapeCount.current--;\n          return;\n        }\n        if (canvasTool === \"circle\") {\n          canvas.remove(circle.current);\n          newShape.current = true;\n          shapeCount.current--;\n          return;\n        }\n        if (canvasTool === \"ellipse\") {\n          canvas.remove(ellipse.current);\n          newShape.current = true;\n          shapeCount.current--;\n          return;\n        }\n      }\n      //setActiveTool(event, \"select\");\n    }\n  }\n\n  let url = \"#\";\n\n  const swatchStyles = reactCSS({\n    default: {\n      stroke: {\n        width: \"36px\",\n        height: \"14px\",\n        borderRadius: \"2px\",\n        background: `rgba(${stroke.r}, ${stroke.g}, ${stroke.b}, ${stroke.a})`,\n      },\n      blank: {\n        width: \"36px\",\n        height: \"14px\",\n        borderRadius: \"2px\",\n      },\n      fill: {\n        width: \"36px\",\n        height: \"14px\",\n        borderRadius: \"2px\",\n        background: `rgba(${fill.r}, ${fill.g}, ${fill.b}, ${fill.a})`,\n      },\n      highlight: {\n        width: \"36px\",\n        height: \"14px\",\n        borderRadius: \"2px\",\n        background: `rgba(${textHighlight.r}, ${textHighlight.g}, ${textHighlight.b}, ${textHighlight.a})`,\n      },\n      swatch: {\n        padding: \"0px\",\n        background: \"#fff\",\n        borderRadius: \"1px\",\n        boxShadow: \"0 0 0 1px rgba(0,0,0,.1)\",\n        display: \"inline-block\",\n        cursor: \"pointer\",\n        backgroundImage: \"url(images/no.png)\",\n      },\n      pickerContainer: {\n        display: \"inline-block\",\n      },\n      popover: {\n        position: \"absolute\",\n        zIndex: \"2\",\n      },\n      cover: {\n        position: \"fixed\",\n        top: \"50px\",\n        right: \"0px\",\n        bottom: \"0px\",\n        left: \"100px\",\n      },\n    },\n  });\n\n  return (\n    <MediaQuery minDeviceWidth={1224}>\n      {/* <h1>Device Test!</h1>\n      {isDesktopOrLaptop && <p>You are a desktop or laptop</p>}\n      {isBigScreen && <p>You have a huge screen</p>}\n      {isTabletOrMobile && <p>You are a tablet or mobile phone</p>}\n      <p>Your are in {isPortrait ? \"portrait\" : \"landscape\"} orientation</p>\n      {isRetina && <p>You are retina</p>} */}\n      <div\n        ref={mainDiv}\n        className=\"App\"\n        id=\"mainDiv\"\n        onKeyDown={(e) => {\n          handleKeyDown(e);\n          document.getElementById(\"my-fabric-canvas\").focus();\n        }}\n        tabIndex={-1}\n        // tabIndex=\"0\"\n      >\n        <div className={tbStyles.propBar}>\n          <a href={url}>\n            <button\n              className={tbStyles.buttontoolbar}\n              onClick={onUndo}\n              id=\"undo\"\n              //disabled={canvasHistory[0] === canvasState}\n              disabled={past.length === 1}\n            >\n              <div className={tbStyles.tooltipDown}>\n                <img src={imgUndo} alt=\"Undo\"></img>\n                <span className={tbStyles.tooltiptextDown}>Undo</span>\n              </div>\n            </button>\n            <button\n              className={tbStyles.buttontoolbar}\n              onClick={onRedo}\n              id=\"redo\"\n              //disabled={canvasHistory[canvasHistory.length - 1] === canvasState}\n              disabled={future.length === 0}\n            >\n              <div className={tbStyles.tooltipDown}>\n                <img src={imgRedo} alt=\"Redo\"></img>\n                <span className={tbStyles.tooltiptextDown}>Redo</span>\n              </div>\n            </button>\n            <button\n              className={tbStyles.buttontoolbar}\n              onClick={deleteObjects}\n              id=\"del\"\n            >\n              <div className={tbStyles.tooltipDown}>\n                <img src={imgDelete} alt=\"Delete\"></img>\n                <span className={tbStyles.tooltiptextDown}>Delete</span>\n              </div>\n            </button>\n          </a>\n          <div className={tbStyles.dropdown}>\n            <button className={tbStyles.buttontoolbar} id=\"wList\">\n              <img src={imglineWidth} alt=\"Line Width\"></img>\n              <div id=\"wlDropDown\" className={tbStyles.dropdowncontent}>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setStrokeWidth(1);\n                    setShapeAttributes({\n                      strokeWidth: 1,\n                    });\n                  }}\n                >\n                  <img src={imgStroke1} alt=\"1\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setStrokeWidth(2);\n                    setShapeAttributes({\n                      strokeWidth: 2,\n                    });\n                  }}\n                >\n                  <img src={imgStroke2} alt=\"2\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setStrokeWidth(4);\n                    setShapeAttributes({\n                      strokeWidth: 4,\n                    });\n                  }}\n                >\n                  <img src={imgStroke4} alt=\"4\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setStrokeWidth(5);\n                    setShapeAttributes({\n                      strokeWidth: 5,\n                    });\n                  }}\n                >\n                  <img src={imgStroke5} alt=\"5\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setStrokeWidth(10);\n                    setShapeAttributes({\n                      strokeWidth: 10,\n                    });\n                  }}\n                >\n                  <img src={imgStroke10} alt=\"10\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setStrokeWidth(12);\n                    setShapeAttributes({\n                      strokeWidth: 12,\n                    });\n                  }}\n                >\n                  <img src={imgStroke12} alt=\"12\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setStrokeWidth(15);\n                    setShapeAttributes({\n                      strokeWidth: 15,\n                    });\n                  }}\n                >\n                  <img src={imgStroke15} alt=\"15\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setStrokeWidth(20);\n                    setShapeAttributes({\n                      strokeWidth: 20,\n                    });\n                  }}\n                >\n                  <img src={imgStroke20} alt=\"20\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setStrokeWidth(25);\n                    setShapeAttributes({\n                      strokeWidth: 25,\n                    });\n                  }}\n                >\n                  <img src={imgStroke25} alt=\"25\"></img>\n                </a>\n              </div>\n            </button>\n          </div>\n          <div className={tbStyles.dropdown}>\n            <button className={tbStyles.buttontoolbar} id=\"sList\">\n              <img src={imgLineStyle} alt=\"Line Style\"></img>\n              <div id=\"lsDropDown\" className={tbStyles.dropdowncontent}>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setDashSize(0);\n                    setGapSize(0);\n                    setShapeAttributes({\n                      strokeDashArray: [0, 0],\n                    });\n                  }}\n                >\n                  <img src={imgLineStyle1} alt=\"1\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setDashSize(10);\n                    setGapSize(5);\n                    setShapeAttributes({\n                      strokeDashArray: [10, 5],\n                    });\n                  }}\n                >\n                  <img src={imgLineStyle2} alt=\"1\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setDashSize(10);\n                    setGapSize(5);\n                    setShapeAttributes({\n                      strokeDashArray: [10, 5],\n                    });\n                  }}\n                >\n                  <img src={imgLineStyle3} alt=\"1\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setDashSize(20);\n                    setGapSize(5);\n                    setShapeAttributes({\n                      strokeDashArray: [20, 5],\n                    });\n                  }}\n                >\n                  <img src={imgLineStyle4} alt=\"1\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setDashSize(20);\n                    setGapSize(10);\n                    setShapeAttributes({\n                      strokeDashArray: [20, 10],\n                    });\n                  }}\n                >\n                  <img src={imgLineStyle5} alt=\"1\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setDashSize(5);\n                    setGapSize(5);\n                    setShapeAttributes({\n                      strokeDashArray: [5, 5],\n                    });\n                  }}\n                >\n                  <img src={imgLineStyle6} alt=\"1\"></img>\n                </a>\n                <a\n                  href={url}\n                  onClick={(e) => {\n                    setDashSize(2);\n                    setGapSize(2);\n                    setShapeAttributes({\n                      strokeDashArray: [2, 2],\n                    });\n                  }}\n                >\n                  <img src={imgLineStyle7} alt=\"1\"></img>\n                </a>\n              </div>\n            </button>\n          </div>\n          <button className={tbStyles.buttontoolbar} id=\"dropper\">\n            <div className={tbStyles.tooltipDown}>\n              <img src={imgDropper} alt=\"Pick a color\"></img>\n              <span className={tbStyles.tooltiptextDown}>Pick a color</span>\n            </div>\n          </button>\n          &nbsp;Stroke&nbsp;\n          <input\n            type=\"number\"\n            id=\"strokePoint\"\n            value={strokeWidth}\n            min=\"0\"\n            max=\"50\"\n            onChange={(e) => {\n              setStrokeWidth(+e.target.value);\n              setShapeAttributes({\n                strokeWidth: +e.target.value,\n              });\n            }}\n          ></input>\n          &nbsp;Dash&nbsp;\n          <input\n            type=\"number\"\n            min=\"0\"\n            max=\"20\"\n            id=\"dashSize\"\n            value={dashSize}\n            onChange={(e) => {\n              setDashSize(+e.target.value);\n              setShapeAttributes({\n                strokeDashArray: [+e.target.value, +e.target.value],\n              });\n            }}\n          ></input>\n          &nbsp;Stroke Color&nbsp;\n          <div style={swatchStyles.pickerContainer}>\n            <Picker\n              setPickerColor={setPickerColorStroke}\n              type=\"Stroke\"\n              ref={activeObjectStrokeRef}\n            />\n          </div>\n          &nbsp;Fill Color&nbsp;\n          <div style={swatchStyles.pickerContainer}>\n            <Picker\n              setPickerColor={setPickerColorFill}\n              type=\"Fill\"\n              ref={activeObjectFillRef}\n            />\n          </div>\n          {/* <div style={swatchStyles.pickerContainer}>\n            <div style={swatchStyles.swatch} onClick={StrokeSwatchClick}>\n              <div style={swatchStyles.stroke} />\n            </div>\n            {showStrokePicker ? (\n              <div style={swatchStyles.popover}>\n                <div style={swatchStyles.cover} onClick={StrokeSwatchClose} />\n                <SketchPicker color={stroke} onChange={StrokeSwatchChange} />\n              </div>\n            ) : null}\n          </div> */}\n          {/* &nbsp;Fill Color&nbsp;\n          <div style={swatchStyles.pickerContainer}>\n            <div style={swatchStyles.swatch} onClick={FillSwatchClick}>\n              <div id=\"fillSwatch\" style={swatchStyles.fill} />\n            </div>\n            {showFillPicker ? (\n              <div style={swatchStyles.popover}>\n                <div style={swatchStyles.cover} onClick={FillSwatchClose} />\n                <SketchPicker color={fill} onChange={FillSwatchChange} />\n              </div>\n            ) : null}\n          </div> */}\n          {/* &nbsp;HighlightText&nbsp;\n          <div style={swatchStyles.pickerContainer}>\n            <div style={swatchStyles.swatch} onClick={HighlightSwatchClick}>\n              <div style={swatchStyles.highlight} />\n            </div>\n            {showHighlightPicker ? (\n              <div style={swatchStyles.popover}>\n                <div\n                  style={swatchStyles.cover}\n                  onClick={HighlightSwatchClose}\n                />\n                <SketchPicker\n                  color={textHighlight}\n                  onChange={HighlightSwatchChange}\n                />\n              </div>\n            ) : null}\n          </div> */}\n          {/* &nbsp;\n          <button\n            id=\"noStroke\"\n            onClick={(e) => {\n              setStrokeColor({ r: 255, g: 255, b: 255, a: 0 });\n              setShapeAttributes({\n                stroke: \"rgba(255,255,255,0)\",\n              });\n            }}\n          >\n            <div className={tbStyles.tooltipDown}>\n              <img src={imgNoStroke} alt=\"No stroke\"></img>\n              <span className={tbStyles.tooltiptextDown}>Set No Stroke</span>\n            </div>\n          </button>\n          &nbsp;\n          <button\n            id=\"noFill\"\n            onClick={(e) => {\n              setFillColor({ r: 255, g: 255, b: 255, a: 0 });\n              setShapeAttributes({\n                fill: \"rgba(255,255,255,0)\",\n              });\n            }}\n          >\n            <div className={tbStyles.tooltipDown}>\n              <img src={imgNoFill} alt=\"No fill\"></img>\n              <span className={tbStyles.tooltiptextDown}>Set No Fill</span>\n            </div>\n          </button> */}\n          &nbsp;Opacity\n          <input\n            type=\"range\"\n            id=\"opacityRange\"\n            value={opacity}\n            onChange={(e) => {\n              //opacity.current = e.target.value;\n              setOpacity(e.target.value);\n              setShapeAttributes({\n                opacity: e.target.value,\n              });\n            }}\n          ></input>\n          &nbsp; Angle snap:\n          <input\n            type=\"checkbox\"\n            id=\"chkSnap\"\n            onChange={(e) => {\n              //console.log(e.target.checked);\n              snap.current = e.target.checked;\n            }}\n          ></input>\n          &nbsp;Font\n          <select\n            name=\"fonts\"\n            id=\"fonts\"\n            onChange={(e) => {\n              setFont(e.target.value);\n              setShapeAttributes({ fontFamily: e.target.value });\n            }}\n          ></select>\n          &nbsp;Size\n          <input\n            type=\"number\"\n            id=\"fontSize\"\n            value={fontSize}\n            min=\"0\"\n            max=\"100\"\n            onChange={(e) => {\n              setFontSize(+e.target.value);\n              setShapeAttributes({\n                fontSize: +e.target.value,\n              });\n            }}\n          ></input>\n          &nbsp;\n          <label>\n            FontWeight:\n            <select\n              value={fontWeight}\n              onChange={(e) => {\n                setFontWeight(e.target.value);\n                setShapeAttributes({\n                  fontWeight: e.target.value,\n                });\n              }}\n            >\n              <option value=\"normal\">Normal</option>\n              <option value=\"bold\">Bold</option>\n            </select>\n          </label>\n          <label>\n            FontSyle:\n            <select\n              value={fontStyle}\n              onChange={(e) => {\n                setFontStyle(e.target.value);\n                setShapeAttributes({\n                  fontStyle: e.target.value,\n                });\n              }}\n            >\n              <option value=\"regular\">Regular</option>\n              <option value=\"italic\">Italic</option>\n            </select>\n          </label>\n          <input\n            ref={imgFileRef}\n            type=\"file\"\n            id=\"FileUpload1\"\n            style={{ display: \"none\" }}\n          />\n        </div>\n        <div id=\"lMenu\" className={styles.menu}>\n          <div className={styles.tableft}>\n            <button\n              onMouseEnter={(e) => {\n                w3_openPanel(e, \"File\");\n              }}\n              onClick={(e) => {\n                w3_openPanel(e, currentOpenPanel);\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgFileAccess} alt=\"FileAccess\"></img>\n                <span className={styles.tooltiptextleft}>File Access</span>\n              </div>\n            </button>\n            <button\n              onClick={(e) => {\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              onMouseEnter={(e) => {\n                w3_openPanel(e, \"CanvasSet\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgCanvasSettings} alt=\"Canvas Settings\"></img>\n                <span className={styles.tooltiptextleft}>Canvas Settings</span>\n              </div>\n            </button>\n            <button\n              onClick={(e) => {\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              onMouseEnter={(e) => {\n                w3_openPanel(e, \"LayerSet\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgLayers} alt=\"Layers\"></img>\n                <span className={styles.tooltiptextleft}>Layers</span>\n              </div>\n            </button>\n            <button\n              onClick={(e) => {\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              onMouseEnter={(e) => {\n                w3_openPanel(e, \"Warehouse\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgWarehouse} alt=\"Warehouse\"></img>\n                <span className={styles.tooltiptextleft}>Warehouse</span>\n              </div>\n            </button>\n            <button\n              onClick={(e) => {\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              onMouseEnter={(e) => {\n                w3_openPanel(e, \"Phases\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgPhase} alt=\"Phases\"></img>\n                <span className={styles.tooltiptextleft}>Phases</span>\n              </div>\n            </button>\n            <button\n              onClick={(e) => {\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              onMouseEnter={(e) => {\n                w3_openPanel(e, \"Measures\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgMeasurement} alt=\"Measurements\"></img>\n                <span className={styles.tooltiptextleft}>Measures</span>\n              </div>\n            </button>\n            <button\n              onClick={(e) => {\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              onMouseEnter={(e) => {\n                w3_openPanel(e, \"Animation\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgAnimation} alt=\"Animation\"></img>\n                <span className={styles.tooltiptextleft}>Phase Player</span>\n              </div>\n            </button>\n            <div className={styles.tabbar}></div>\n          </div>\n        </div>\n        <div\n          id=\"Library\"\n          className={styles.library}\n          onClick={(e) => {\n            //document.getElementById(\"File\").style.display = \"none\";\n            w3_openPanel(e, currentOpenPanel);\n          }}\n        >\n          <div id=\"File\" className={styles.File} style={{ display: \"none\" }}>\n            File Access\n            <span\n              onClick={(e) => {\n                //document.getElementById(\"File\").style.display = \"none\";\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              className={tbStyles.close}\n              title=\"Close Modal\"\n            >\n              &times;\n            </span>\n            <div className={styles.btngroup}>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgNewFile} alt=\"NewFile\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>New File</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgOpenFile} alt=\"OpenFile\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Open File</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgRecentFile} alt=\"RecentFile\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Recent File</span>\n              </div>\n            </div>\n          </div>\n          <div\n            id=\"CanvasSet\"\n            className={styles.CanvasSet}\n            style={{ display: \"none\" }}\n          >\n            Canvas Settings\n            <span\n              onClick={(e) => {\n                //document.getElementById(\"File\").style.display = \"none\";\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              className={tbStyles.close}\n              title=\"Close Modal\"\n            >\n              &times;\n            </span>\n            <div className={styles.btngroup}>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgCanvasSize} alt=\"CanvasSize\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Canvas Size</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgCanvasColor} alt=\"CanvasColor\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Canvas Color</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgCanvasImage} alt=\"CanvasImage\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Canvas Image</span>\n              </div>\n            </div>\n          </div>\n          <div\n            id=\"LayerSet\"\n            className={styles.LayerSet}\n            style={{ display: \"none\" }}\n          >\n            Layers\n            <span\n              onClick={(e) => {\n                //document.getElementById(\"File\").style.display = \"none\";\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              className={tbStyles.close}\n              title=\"Close Modal\"\n            >\n              &times;\n            </span>\n            <div className={styles.sbtngroup}>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgLayerBefore} alt=\"AddLayerBefore\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Add Layer Before</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgLayerAfter} alt=\"AddLayerAfter\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Add Layer After</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgLayerUp} alt=\"LayerUp\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Layer Up</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgLayerDown} alt=\"LayerDown\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Layer Down</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgLayerHide} alt=\"HideLayer\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Hide Layer</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgLayerLock} alt=\"LockLayer\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Lock Layer</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgLayerSort} alt=\"SortLayer\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Sort layer</span>\n              </div>\n            </div>\n            <ul className={styles.a}>\n              <li>Shapes</li>\n              <ul>\n                <li>Circle</li>\n                <li>Rectangle</li>\n              </ul>\n              <li>Texts</li>\n              <li>Lines</li>\n            </ul>\n          </div>\n          <div\n            id=\"Warehouse\"\n            className={styles.Warehouse}\n            style={{ display: \"none\" }}\n          >\n            Warehouse\n            <span\n              onClick={(e) => {\n                //document.getElementById(\"File\").style.display = \"none\";\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              className={tbStyles.close}\n              title=\"Close Modal\"\n            >\n              &times;\n            </span>\n            <div className={styles.btngroup}>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgCrane} alt=\"Crane\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Crane</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgElevator} alt=\"Elevator\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Elevator</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgLabels} alt=\"Labels\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Labels</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgCloud2} alt=\"Cloud\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Cloud</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgCallout} alt=\"Callout\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Callout</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgWedge} alt=\"Wedge\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Wedge</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgRing} alt=\"Ring\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Ring</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgFilledArc} alt=\"FilledArc\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Filled Arc</span>\n              </div>\n            </div>\n          </div>\n          <div\n            id=\"Phases\"\n            className={styles.Phases}\n            style={{ display: \"none\" }}\n          >\n            Phases\n            <span\n              onClick={(e) => {\n                //document.getElementById(\"File\").style.display = \"none\";\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              className={tbStyles.close}\n              title=\"Close Modal\"\n            >\n              &times;\n            </span>\n            <div className={styles.btngroup}>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgNewPhase} alt=\"NewPhase\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>NewPhase</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgPhaseStart} alt=\"StartDate\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Start Date</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgPhaseEnd} alt=\"EndDate\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>End Date</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgPhaseDelete} alt=\"DeletePhase\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Delete Phase </span>\n              </div>\n            </div>\n          </div>\n          <div\n            id=\"Measures\"\n            className={styles.Measures}\n            style={{ display: \"none\" }}\n          >\n            Measurement\n            <span\n              onClick={(e) => {\n                //document.getElementById(\"File\").style.display = \"none\";\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              className={tbStyles.close}\n              title=\"Close Modal\"\n            >\n              &times;\n            </span>\n            <div className={styles.btngroup}>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgPageScale} alt=\"PageScale\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Page Scale</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgSetUnits} alt=\"SetUnits\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Set Units</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgLength} alt=\"Length\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Length</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgPerimeter} alt=\"Perimeter\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Perimeter</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgArea} alt=\"Area\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Area</span>\n              </div>\n            </div>\n          </div>\n          <div\n            id=\"Animation\"\n            className={styles.Animation}\n            style={{ display: \"none\" }}\n          >\n            Phase Player\n            <span\n              onClick={(e) => {\n                //document.getElementById(\"File\").style.display = \"none\";\n                w3_openPanel(e, currentOpenPanel);\n              }}\n              className={tbStyles.close}\n              title=\"Close Modal\"\n            >\n              &times;\n            </span>\n            <div className={styles.sbtngroup}>\n              <div className={styles.tooltip}>\n                <button>Phase1</button>\n                <span className={styles.tooltiptextB}>Play</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>Phase2</button>\n                <span className={styles.tooltiptextB}>Play</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>Phase3</button>\n                <span className={styles.tooltiptextB}>Play</span>\n              </div>\n            </div>\n            <div className={styles.sbtngroup}>\n              <div className={styles.tooltip}>\n                <button>\n                  <img src={imgPlay} alt=\"Play\"></img>\n                </button>\n                <span className={styles.tooltiptextB}>Play/Stop</span>\n              </div>\n              <input type=\"range\" min=\"1\" max=\"100\"></input>\n              Play Speed\n              <div className={styles.tooltip}>\n                <button>1</button>\n                <span className={styles.tooltiptextB}>1 Day/Second</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>2</button>\n                <span className={styles.tooltiptextB}>2 Day/Second</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>5</button>\n                <span className={styles.tooltiptextB}>5 Day/Second</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>10</button>\n                <span className={styles.tooltiptextB}>10 Day/Second</span>\n              </div>\n              <div className={styles.tooltip}>\n                <button>30</button>\n                <span className={styles.tooltiptextB}>30 Day/Second</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className={styles.right} ref={rightBar}>\n          <div className={styles.tab}>\n            <button\n              id=\"select\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = true;\n                setCanvasTool(\"select\");\n                setActiveTool(e, \"select\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgSelection} alt=\"Select\"></img>\n                <span className={styles.tooltiptext}>Selection [S]</span>\n              </div>\n            </button>\n            <button\n              id=\"text\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"text\");\n                setActiveTool(e, \"text\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgText} alt=\"TextBox\"></img>\n                <span className={styles.tooltiptext}>Text [T]</span>\n              </div>\n            </button>\n            <button\n              id=\"pen\"\n              onClick={(e) => {\n                setCanvasTool(\"pen\");\n                canvas.isDrawingMode = 1;\n                if (stroke.a === 0) setStrokeColor({ r: 0, g: 0, b: 0, a: 1 });\n                canvas.freeDrawingBrush.color = stroke;\n                canvas.freeDrawingBrush.width = strokeWidth;\n                setActiveTool(e, \"pen\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgFreeHand} alt=\"Pen\"></img>\n                <span className={styles.tooltiptext}>Free-hand [H]</span>\n              </div>\n            </button>\n            <button\n              id=\"cloud\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"cloud\");\n                setActiveTool(e, \"cloud\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgCloud} alt=\"Cloud\"></img>\n                <span className={styles.tooltiptext}>Cloud</span>\n              </div>\n            </button>\n            <button\n              id=\"callout\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"callout\");\n                setActiveTool(e, \"callout\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgCallout} alt=\"Callout\"></img>\n                <span className={styles.tooltiptext}>Callout</span>\n              </div>\n            </button>\n            <button\n              id=\"image\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"image\");\n                setActiveTool(e, \"image\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgImageEdit} alt=\"Edit\"></img>\n                <span className={styles.tooltiptext}>Image Edit [I]</span>\n              </div>\n            </button>\n            <div className={styles.tabspace}></div>\n            <button\n              id=\"line\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                editPoly.current = true;\n                setCanvasTool(\"line\");\n                setActiveTool(e, \"line\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgLine} alt=\"Line\"></img>\n                <span className={styles.tooltiptext}>Line [L]</span>\n              </div>\n            </button>\n            <button\n              id=\"polyline\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                setCanvasTool(\"polyline\");\n                setActiveTool(e, \"polyline\");\n                canvas.selection = false;\n                var objects = canvas.getObjects();\n                for (var i = 0; i < objects.length; i++) {\n                  objects[i].set({ selectable: false, evented: false });\n                }\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgPolyline} alt=\"Polyline\"></img>\n                <span className={styles.tooltiptext}>Polyline [P]</span>\n              </div>\n            </button>\n            <button\n              id=\"arrow\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"arrow\");\n                setActiveTool(e, \"arrow\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgArrow} alt=\"Arrow\"></img>\n                <span className={styles.tooltiptext}>Arrow [A]</span>\n              </div>\n            </button>\n            <button\n              id=\"arc\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"arc\");\n                setActiveTool(e, \"arc\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgArc} alt=\"Arc\"></img>\n                <span className={styles.tooltiptext}>Arc [Q]</span>\n              </div>\n            </button>\n            <button\n              id=\"rect\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                canvas.selection = false;\n                canvas.forEachObject(function (o) {\n                  o.selectable = false;\n                });\n                canvas.renderAll();\n                setCanvasTool(\"rect\");\n                setActiveTool(e, \"rect\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgRect} alt=\"Rectangle\"></img>\n                <span className={styles.tooltiptext}>Rectangle [R]</span>\n              </div>\n            </button>\n            <button\n              id=\"polygon\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"polygon\");\n                setActiveTool(e, \"polygon\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgPolygon} alt=\"Polygon\"></img>\n                <span className={styles.tooltiptext}>Polygon [G]</span>\n              </div>\n            </button>\n            <button\n              id=\"rpolygon\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"rpolygon\");\n                setActiveTool(e, \"rpolygon\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgRPolygon} alt=\"Regular Polygon\"></img>\n                <span className={styles.tooltiptext}>Regular Polygon [U]</span>\n              </div>\n            </button>\n            <button\n              id=\"circle\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"circle\");\n                setActiveTool(e, \"circle\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgCircle} alt=\"Circle\"></img>\n                <span className={styles.tooltiptext}>Circle [C]</span>\n              </div>\n            </button>\n            <button\n              id=\"ellipse\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"ellipse\");\n                setActiveTool(e, \"ellipse\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgEllipse} alt=\"Ellipse\"></img>\n                <span className={styles.tooltiptext}>Ellipse {\"  \"} [E]</span>\n              </div>\n            </button>\n            <div className={styles.tabspace}></div>\n            <button\n              id=\"dimension\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"dimension\");\n                setActiveTool(e, \"dimension\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgDimension} alt=\"Dimension\"></img>\n                <span className={styles.tooltiptext}>Dimension [D]</span>\n              </div>\n            </button>\n\n            <button\n              id=\"area\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"area\");\n                setActiveTool(e, \"area\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgArea} alt=\"Area\"></img>\n                <span className={styles.tooltiptext}>Area</span>\n              </div>\n            </button>\n            <button\n              id=\"length\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"length\");\n                setActiveTool(e, \"length\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgLength} alt=\"Length\"></img>\n                <span className={styles.tooltiptext}>Length</span>\n              </div>\n            </button>\n            <button\n              id=\"perimeter\"\n              onClick={(e) => {\n                canvas.isDrawingMode = false;\n                canvas.selection = false;\n                setCanvasTool(\"perimeter\");\n                setActiveTool(e, \"perimeter\");\n              }}\n            >\n              <div className={styles.tooltip}>\n                <img src={imgPerimeter} alt=\"Perimeter\"></img>\n                <span className={styles.tooltiptext}>Perimeter</span>\n              </div>\n            </button>\n          </div>\n        </div>\n        <div ref={containerRef}>\n          <canvas\n            ref={canvasRef}\n            id=\"my-fabric-canvas\"\n            width={\n              isBigScreen\n                ? 1191\n                : isDesktopOrLaptop\n                ? 1086\n                : isTabletOrMobile\n                ? 960\n                : 640\n            }\n            height={\n              isBigScreen\n                ? 842\n                : isDesktopOrLaptop\n                ? 768\n                : isTabletOrMobile\n                ? 540\n                : 320\n            }\n          ></canvas>\n        </div>\n      </div>\n    </MediaQuery>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}