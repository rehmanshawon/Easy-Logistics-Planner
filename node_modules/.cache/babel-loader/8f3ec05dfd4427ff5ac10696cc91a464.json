{"ast":null,"code":"var _jsxFileName = \"c:\\\\Tutorials\\\\fabric-drawing\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState, useCallback } from \"react\";\nimport \"./styles.css\";\nimport styles from \"./rightMenu.module.css\";\nimport tbStyles from \"./toolbar.module.css\";\nimport { fabric } from \"fabric\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  version: \"3.6.3\",\n  objects: [{\n    type: \"rect\",\n    version: \"3.6.3\",\n    originX: \"left\",\n    originY: \"top\",\n    left: 106,\n    top: 33,\n    width: 60,\n    height: 70,\n    fill: \"red\",\n    stroke: null,\n    strokeWidth: 1,\n    strokeDashArray: null,\n    strokeLineCap: \"butt\",\n    strokeDashOffset: 0,\n    strokeLineJoin: \"miter\",\n    strokeMiterLimit: 4,\n    scaleX: 1,\n    scaleY: 1,\n    angle: 0,\n    flipX: false,\n    flipY: false,\n    opacity: 1,\n    shadow: null,\n    visible: true,\n    clipTo: null,\n    backgroundColor: \"\",\n    fillRule: \"nonzero\",\n    paintFirst: \"fill\",\n    globalCompositeOperation: \"source-over\",\n    transformMatrix: null,\n    skewX: 0,\n    skewY: 0,\n    rx: 0,\n    ry: 0\n  }]\n}; // Or you can use:\n// const fabric = require(\"fabric\").fabric;\n//const canvas = new fabric.Canvas(\"my-fabric-canvas\");\n\nconst App = () => {\n  _s();\n\n  const canvasRef = useRef();\n  const [canvas, setCanvas] = useState();\n  const [canvasHistory, setCanvasHistory] = useState([initialState]);\n  const [canvasState, setCanvasState] = useState(initialState);\n  const [canvasTool, setCanvasTool] = useState(\"select\");\n  const [strokeWidth, setStrokeWidth] = useState(1);\n  const [strokeColor, setStrokeColor] = useState(\"black\");\n  const [strokeEnabled, setStrokeEnabled] = useState(true);\n  const [fillColor, setFillColor] = useState(\"black\");\n  const [fillEnable, setFillEnabled] = useState(true);\n  const [fillOpacity, setFillOpacity] = useState(1.0);\n  const [dashSize, setDashSize] = useState(0);\n  const [gapSize, setGapSize] = useState(0);\n  const [opacity, setOpacity] = useState(1.0);\n  var nRect = true;\n  var Rectangle = null;\n  var origX, origY;\n  const onObjectModified = useCallback(e => {\n    const newCanvasState = e.target.canvas.toJSON();\n    setCanvasState(newCanvasState); // Limit history depth\n\n    setCanvasHistory(history => [...history, newCanvasState].slice(-32));\n  }, [setCanvasState, setCanvasHistory]);\n  React.useEffect(() => {//console.log(JSON.stringify(canvasState));\n  }, [canvasState]);\n  React.useEffect(() => {\n    const canvas = new fabric.Canvas(canvasRef.current);\n    canvas.loadFromJSON(initialState); //canvas.on(\"object:added\", onObjectModified);\n\n    canvas.on(\"object:modified\", onObjectModified); //canvas.on(\"object:removed\", onObjectModified);\n\n    const rect = new fabric.Rect({\n      width: 50,\n      height: 50,\n      fill: \"blue\",\n      angle: 10,\n      top: 20,\n      left: 20\n    });\n    const textbox = new fabric.Textbox(\"Click on the Rectangle to move it.\", {\n      fontSize: 20,\n      left: 50,\n      top: 100,\n      width: 200\n    });\n    canvas.add(textbox);\n    canvas.add(rect);\n    setCanvas(canvas); //refCanvas.current = canvas;\n    // UseEffect's cleanup function\n\n    return () => {\n      canvas.dispose(); //setCanvas(null);\n    };\n  }, [canvasRef, onObjectModified, setCanvas]);\n  const moveHistory = useCallback(step => {\n    const currentStateIndex = canvasHistory.indexOf(canvasState);\n    const prevState = canvasHistory[currentStateIndex + step];\n    canvas.loadFromJSON(prevState);\n    setCanvasState(prevState);\n  }, [canvas, canvasState, canvasHistory, setCanvasState]);\n  const onUndo = useCallback(() => moveHistory(-1), [moveHistory]);\n  const onRedo = useCallback(() => moveHistory(1), [moveHistory]);\n\n  const handleMouseClick = event => {\n    //let o = canvas.getActiveObject();\n    //console.log(o);\n    if (canvasTool === \"select\") {}\n\n    if (canvasTool === \"line\") {}\n\n    if (canvasTool === \"rect\") {\n      if (nRect) {\n        var pointer = canvas.getPointer(event);\n        origX = pointer.x;\n        origY = pointer.y;\n        Rectangle = new fabric.Rect({\n          left: origX,\n          top: origY,\n          fill: \"transparent\",\n          stroke: \"red\",\n          strokeWidth: strokeWidth\n        }); //console.log(Rectangle);\n\n        canvas.add(Rectangle);\n        setCanvas(canvas); //canvas.renderAll();\n        //setRect((prevState) => (prevState = false));\n\n        nRect = false; //setNewRectangle(false);\n      } else {\n        pointer = canvas.getPointer(event);\n\n        if (origX > pointer.x) {\n          Rectangle.set({\n            left: Math.abs(pointer.x)\n          });\n        }\n\n        if (origY > pointer.y) {\n          Rectangle.set({\n            top: Math.abs(pointer.y)\n          });\n        }\n\n        Rectangle.set({\n          width: Math.abs(origX - pointer.x)\n        });\n        Rectangle.set({\n          height: Math.abs(origY - pointer.y)\n        });\n        canvas.setActiveObject(Rectangle); //setNewRectangle(true);\n\n        nRect = true; // Render the Canvas\n\n        canvas.renderAll(); // Save the canvas to State variable\n\n        const newCanvasState = canvas.toJSON();\n        setCanvasState(newCanvasState); // Save state to History and Limit history depth to 32\n\n        setCanvasHistory(history => [...history, newCanvasState].slice(-32));\n      }\n    }\n  };\n\n  const handleMouseMove = event => {\n    if (nRect) return; //canvas.renderAll();\n\n    var pointer = canvas.getPointer(event);\n\n    if (origX > pointer.x) {\n      Rectangle.set({\n        left: Math.abs(pointer.x)\n      });\n    }\n\n    if (origY > pointer.y) {\n      Rectangle.set({\n        top: Math.abs(pointer.y)\n      });\n    }\n\n    Rectangle.set({\n      width: Math.abs(origX - pointer.x)\n    });\n    Rectangle.set({\n      height: Math.abs(origY - pointer.y)\n    }); //console.log(Rectangle);\n\n    canvas.renderAll(); //var pointer = canvas.getPointer(event);\n    //console.log(pointer);\n  };\n\n  const setShapeAttributes = attributes => {\n    var activeShape = canvas.getActiveObject();\n\n    if (activeShape) {\n      var attributes = attributes || {};\n      console.log(activeShape.stroke);\n      canvas.getActiveObject().set({\n        strokeWidth: attributes.strokeWidth || activeShape.strokeWidth,\n        stroke: attributes.strokeColor || activeShape.stroke\n      }); // Save the canvas to State variable\n\n      const newCanvasState = canvas.toJSON();\n      setCanvasState(newCanvasState); // Save state to History and Limit history depth to 32\n\n      setCanvasHistory(history => [...history, newCanvasState].slice(-32));\n    }\n  };\n\n  let url = \"#\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onMouseMove: handleMouseMove,\n    onClick: handleMouseClick,\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: tbStyles.propBar,\n      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n        href: url,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: tbStyles.buttontoolbar,\n          onClick: onUndo,\n          id: \"undo\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: tbStyles.tooltipDown,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/undo2.png\",\n              alt: \"Undo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: tbStyles.tooltiptextDown,\n              children: \"Undo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: tbStyles.buttontoolbar,\n          onClick: onRedo,\n          id: \"redo\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: tbStyles.tooltipDown,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/redo2.png\",\n              alt: \"Redo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: tbStyles.tooltiptextDown,\n              children: \"Redo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: tbStyles.buttontoolbar,\n          onClick: onRedo,\n          id: \"del\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: tbStyles.tooltipDown,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/delete2.png\",\n              alt: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: tbStyles.tooltiptextDown,\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: tbStyles.dropdown,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: tbStyles.buttontoolbar,\n          id: \"wList\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"images/lineWidth2.png\",\n            alt: \"Line Width\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"wlDropDown\",\n            className: tbStyles.dropdowncontent,\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              href: url,\n              onClick: e => {\n                setStrokeWidth(1);\n                setShapeAttributes({\n                  strokeWidth: 1,\n                  strokeColor: \"green\"\n                });\n              },\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"images/stroke1.png\",\n                alt: \"1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: url,\n              onClick: e => {\n                setStrokeWidth(2);\n                canvas.getActiveObject().set({\n                  strokeWidth: 2\n                }); // Save the canvas to State variable\n\n                const newCanvasState = canvas.toJSON();\n                setCanvasState(newCanvasState); // Save state to History and Limit history depth to 32\n\n                setCanvasHistory(history => [...history, newCanvasState].slice(-32));\n              },\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"images/stroke2.png\",\n                alt: \"2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: url,\n              onClick: e => {\n                setStrokeWidth(4);\n                canvas.getActiveObject().set({\n                  strokeWidth: 4\n                }); // Save the canvas to State variable\n\n                const newCanvasState = canvas.toJSON();\n                setCanvasState(newCanvasState); // Save state to History and Limit history depth to 32\n\n                setCanvasHistory(history => [...history, newCanvasState].slice(-32));\n              },\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"images/stroke4.png\",\n                alt: \"4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: url,\n              onClick: e => {\n                setStrokeWidth(5);\n                canvas.getActiveObject().set({\n                  strokeWidth: 5\n                }); // Save the canvas to State variable\n\n                const newCanvasState = canvas.toJSON();\n                setCanvasState(newCanvasState); // Save state to History and Limit history depth to 32\n\n                setCanvasHistory(history => [...history, newCanvasState].slice(-32));\n              },\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"images/stroke5.png\",\n                alt: \"5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: url,\n              onClick: e => {\n                setStrokeWidth(10);\n                canvas.getActiveObject().set({\n                  strokeWidth: 10\n                }); // Save the canvas to State variable\n\n                const newCanvasState = canvas.toJSON();\n                setCanvasState(newCanvasState); // Save state to History and Limit history depth to 32\n\n                setCanvasHistory(history => [...history, newCanvasState].slice(-32));\n              },\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"images/stroke10.png\",\n                alt: \"10\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: url,\n              onClick: e => {\n                setStrokeWidth(12);\n                canvas.getActiveObject().set({\n                  strokeWidth: 12\n                }); // Save the canvas to State variable\n\n                const newCanvasState = canvas.toJSON();\n                setCanvasState(newCanvasState); // Save state to History and Limit history depth to 32\n\n                setCanvasHistory(history => [...history, newCanvasState].slice(-32));\n              },\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"images/stroke12.png\",\n                alt: \"12\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: url,\n              onClick: e => {\n                setStrokeWidth(15);\n                canvas.getActiveObject().set({\n                  strokeWidth: 15\n                }); // Save the canvas to State variable\n\n                const newCanvasState = canvas.toJSON();\n                setCanvasState(newCanvasState); // Save state to History and Limit history depth to 32\n\n                setCanvasHistory(history => [...history, newCanvasState].slice(-32));\n              },\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"images/stroke15.png\",\n                alt: \"15\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: url,\n              onClick: e => {\n                setStrokeWidth(20);\n                canvas.getActiveObject().set({\n                  strokeWidth: 20\n                }); // Save the canvas to State variable\n\n                const newCanvasState = canvas.toJSON();\n                setCanvasState(newCanvasState); // Save state to History and Limit history depth to 32\n\n                setCanvasHistory(history => [...history, newCanvasState].slice(-32));\n              },\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"images/stroke20.png\",\n                alt: \"20\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n              href: url,\n              onClick: e => {\n                setStrokeWidth(25);\n                canvas.getActiveObject().set({\n                  strokeWidth: 25\n                }); // Save the canvas to State variable\n\n                const newCanvasState = canvas.toJSON();\n                setCanvasState(newCanvasState); // Save state to History and Limit history depth to 32\n\n                setCanvasHistory(history => [...history, newCanvasState].slice(-32));\n              },\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"images/stroke25.png\",\n                alt: \"25\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Hello CodeSandbox\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Start editing to see some magic happen!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onUndo,\n        disabled: canvasHistory[0] === canvasState,\n        children: \"Undo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onRedo,\n        disabled: canvasHistory[canvasHistory.length - 1] === canvasState,\n        children: \"Redo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 392,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.right,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.tab,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setCanvasTool(\"select\");\n          },\n          id: \"defaultSelect\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tooltip,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/Select2.png\",\n              alt: \"Select\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.tooltiptext,\n              children: \"Selection\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setCanvasTool(\"text\");\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tooltip,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/TextBox2.png\",\n              alt: \"TextBox\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.tooltiptext,\n              children: \"Text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setCanvasTool(\"pen\");\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tooltip,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/PenTool2.png\",\n              alt: \"Pen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 434,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.tooltiptext,\n              children: \"Free-hand\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setCanvasTool(\"cloud\");\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tooltip,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/Cloud2.png\",\n              alt: \"Cloud\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.tooltiptext,\n              children: \"Cloud\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setCanvasTool(\"callout\");\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tooltip,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/CallOut2.png\",\n              alt: \"Callout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.tooltiptext,\n              children: \"Callout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setCanvasTool(\"image\");\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tooltip,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/Image2.png\",\n              alt: \"Image Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.tooltiptext,\n              children: \"Image Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.tabspace\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setCanvasTool(\"line\");\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tooltip,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/Line2.png\",\n              alt: \"Line\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.tooltiptext,\n              children: \"Line\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setCanvasTool(\"polyline\");\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tooltip,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/Polyline2.png\",\n              alt: \"Polyline\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.tooltiptext,\n              children: \"Polyline\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setCanvasTool(\"arrow\");\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tooltip,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/Arrow2.png\",\n              alt: \"Arrow\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.tooltiptext,\n              children: \"Arrow\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setCanvasTool(\"arc\");\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tooltip,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/Arc2.png\",\n              alt: \"Arc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.tooltiptext,\n              children: \"Arc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 504,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setCanvasTool(\"rect\");\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tooltip,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/Rectangle2.png\",\n              alt: \"Rectangle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.tooltiptext,\n              children: \"Rectangle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setCanvasTool(\"polygon\");\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tooltip,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/Polygon2.png\",\n              alt: \"Polygon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 525,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.tooltiptext,\n              children: \"Polygon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 526,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 524,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setCanvasTool(\"rpolygon\");\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tooltip,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/RPolygon2.png\",\n              alt: \"Regular Polygon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.tooltiptext,\n              children: \"Regular Polygon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 536,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 534,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setCanvasTool(\"circle\");\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tooltip,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/Circle2.png\",\n              alt: \"Circle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 545,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.tooltiptext,\n              children: \"Circle\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 546,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setCanvasTool(\"ellipse\");\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tooltip,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/Ellipse2.png\",\n              alt: \"Ellipse\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.tooltiptext,\n              children: \"Ellipse\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 556,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.tabspace\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setCanvasTool(\"dimension\");\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tooltip,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/Dimension2.png\",\n              alt: \"Dimension\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 566,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.tooltiptext,\n              children: \"Dimension\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setCanvasTool(\"area\");\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tooltip,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/Area2.png\",\n              alt: \"Area\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 577,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.tooltiptext,\n              children: \"Area\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 578,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 571,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setCanvasTool(\"length\");\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tooltip,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/Length2.png\",\n              alt: \"Length\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 587,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.tooltiptext,\n              children: \"Length\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 588,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 586,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            setCanvasTool(\"perimeter\");\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.tooltip,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"images/Perimeter2.png\",\n              alt: \"Perimeter\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 597,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.tooltiptext,\n              children: \"Perimeter\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 598,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 596,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 591,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      id: \"my-fabric-canvas\",\n      width: \"1920\",\n      height: \"1080\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 603,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 221,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"j/rj2hbahvgkiTMFd/KenNzFTN8=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["c:/Tutorials/fabric-drawing/src/App.js"],"names":["React","useRef","useState","useCallback","styles","tbStyles","fabric","initialState","version","objects","type","originX","originY","left","top","width","height","fill","stroke","strokeWidth","strokeDashArray","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","scaleX","scaleY","angle","flipX","flipY","opacity","shadow","visible","clipTo","backgroundColor","fillRule","paintFirst","globalCompositeOperation","transformMatrix","skewX","skewY","rx","ry","App","canvasRef","canvas","setCanvas","canvasHistory","setCanvasHistory","canvasState","setCanvasState","canvasTool","setCanvasTool","setStrokeWidth","strokeColor","setStrokeColor","strokeEnabled","setStrokeEnabled","fillColor","setFillColor","fillEnable","setFillEnabled","fillOpacity","setFillOpacity","dashSize","setDashSize","gapSize","setGapSize","setOpacity","nRect","Rectangle","origX","origY","onObjectModified","e","newCanvasState","target","toJSON","history","slice","useEffect","Canvas","current","loadFromJSON","on","rect","Rect","textbox","Textbox","fontSize","add","dispose","moveHistory","step","currentStateIndex","indexOf","prevState","onUndo","onRedo","handleMouseClick","event","pointer","getPointer","x","y","set","Math","abs","setActiveObject","renderAll","handleMouseMove","setShapeAttributes","attributes","activeShape","getActiveObject","console","log","url","propBar","buttontoolbar","tooltipDown","tooltiptextDown","dropdown","dropdowncontent","length","right","tab","tooltip","tooltiptext","tabspace"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useCallback } from \"react\";\nimport \"./styles.css\";\nimport styles from \"./rightMenu.module.css\";\nimport tbStyles from \"./toolbar.module.css\";\nimport { fabric } from \"fabric\";\n\nconst initialState = {\n  version: \"3.6.3\",\n  objects: [\n    {\n      type: \"rect\",\n      version: \"3.6.3\",\n      originX: \"left\",\n      originY: \"top\",\n      left: 106,\n      top: 33,\n      width: 60,\n      height: 70,\n      fill: \"red\",\n      stroke: null,\n      strokeWidth: 1,\n      strokeDashArray: null,\n      strokeLineCap: \"butt\",\n      strokeDashOffset: 0,\n      strokeLineJoin: \"miter\",\n      strokeMiterLimit: 4,\n      scaleX: 1,\n      scaleY: 1,\n      angle: 0,\n      flipX: false,\n      flipY: false,\n      opacity: 1,\n      shadow: null,\n      visible: true,\n      clipTo: null,\n      backgroundColor: \"\",\n      fillRule: \"nonzero\",\n      paintFirst: \"fill\",\n      globalCompositeOperation: \"source-over\",\n      transformMatrix: null,\n      skewX: 0,\n      skewY: 0,\n      rx: 0,\n      ry: 0,\n    },\n  ],\n};\n\n// Or you can use:\n// const fabric = require(\"fabric\").fabric;\n//const canvas = new fabric.Canvas(\"my-fabric-canvas\");\nconst App = () => {\n  const canvasRef = useRef();\n  const [canvas, setCanvas] = useState();\n  const [canvasHistory, setCanvasHistory] = useState([initialState]);\n  const [canvasState, setCanvasState] = useState(initialState);\n  const [canvasTool, setCanvasTool] = useState(\"select\");\n  const [strokeWidth, setStrokeWidth] = useState(1);\n  const [strokeColor, setStrokeColor] = useState(\"black\");\n  const [strokeEnabled, setStrokeEnabled] = useState(true);\n  const [fillColor, setFillColor] = useState(\"black\");\n  const [fillEnable, setFillEnabled] = useState(true);\n  const [fillOpacity, setFillOpacity] = useState(1.0);\n  const [dashSize, setDashSize] = useState(0);\n  const [gapSize, setGapSize] = useState(0);\n  const [opacity, setOpacity] = useState(1.0);\n\n  var nRect = true;\n  var Rectangle = null;\n  var origX, origY;\n\n  const onObjectModified = useCallback(\n    (e) => {\n      const newCanvasState = e.target.canvas.toJSON();\n      setCanvasState(newCanvasState);\n      // Limit history depth\n      setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\n    },\n    [setCanvasState, setCanvasHistory]\n  );\n\n  React.useEffect(() => {\n    //console.log(JSON.stringify(canvasState));\n  }, [canvasState]);\n\n  React.useEffect(() => {\n    const canvas = new fabric.Canvas(canvasRef.current);\n    canvas.loadFromJSON(initialState);\n    //canvas.on(\"object:added\", onObjectModified);\n    canvas.on(\"object:modified\", onObjectModified);\n\n    //canvas.on(\"object:removed\", onObjectModified);\n\n    const rect = new fabric.Rect({\n      width: 50,\n      height: 50,\n      fill: \"blue\",\n      angle: 10,\n      top: 20,\n      left: 20,\n    });\n    const textbox = new fabric.Textbox(\"Click on the Rectangle to move it.\", {\n      fontSize: 20,\n      left: 50,\n      top: 100,\n      width: 200,\n    });\n    canvas.add(textbox);\n    canvas.add(rect);\n    setCanvas(canvas);\n    //refCanvas.current = canvas;\n    // UseEffect's cleanup function\n    return () => {\n      canvas.dispose();\n      //setCanvas(null);\n    };\n  }, [canvasRef, onObjectModified, setCanvas]);\n\n  const moveHistory = useCallback(\n    (step) => {\n      const currentStateIndex = canvasHistory.indexOf(canvasState);\n      const prevState = canvasHistory[currentStateIndex + step];\n      canvas.loadFromJSON(prevState);\n      setCanvasState(prevState);\n    },\n    [canvas, canvasState, canvasHistory, setCanvasState]\n  );\n\n  const onUndo = useCallback(() => moveHistory(-1), [moveHistory]);\n\n  const onRedo = useCallback(() => moveHistory(1), [moveHistory]);\n\n  const handleMouseClick = (event) => {\n    //let o = canvas.getActiveObject();\n    //console.log(o);\n    if (canvasTool === \"select\") {\n    }\n    if (canvasTool === \"line\") {\n    }\n    if (canvasTool === \"rect\") {\n      if (nRect) {\n        var pointer = canvas.getPointer(event);\n        origX = pointer.x;\n        origY = pointer.y;\n        Rectangle = new fabric.Rect({\n          left: origX,\n          top: origY,\n          fill: \"transparent\",\n          stroke: \"red\",\n          strokeWidth: strokeWidth,\n        });\n        //console.log(Rectangle);\n        canvas.add(Rectangle);\n        setCanvas(canvas);\n        //canvas.renderAll();\n        //setRect((prevState) => (prevState = false));\n        nRect = false;\n        //setNewRectangle(false);\n      } else {\n        pointer = canvas.getPointer(event);\n        if (origX > pointer.x) {\n          Rectangle.set({ left: Math.abs(pointer.x) });\n        }\n        if (origY > pointer.y) {\n          Rectangle.set({ top: Math.abs(pointer.y) });\n        }\n        Rectangle.set({ width: Math.abs(origX - pointer.x) });\n        Rectangle.set({ height: Math.abs(origY - pointer.y) });\n        canvas.setActiveObject(Rectangle);\n        //setNewRectangle(true);\n        nRect = true;\n        // Render the Canvas\n        canvas.renderAll();\n\n        // Save the canvas to State variable\n        const newCanvasState = canvas.toJSON();\n        setCanvasState(newCanvasState);\n        // Save state to History and Limit history depth to 32\n        setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\n      }\n    }\n  };\n  const handleMouseMove = (event) => {\n    if (nRect) return;\n    //canvas.renderAll();\n    var pointer = canvas.getPointer(event);\n    if (origX > pointer.x) {\n      Rectangle.set({ left: Math.abs(pointer.x) });\n    }\n    if (origY > pointer.y) {\n      Rectangle.set({ top: Math.abs(pointer.y) });\n    }\n    Rectangle.set({ width: Math.abs(origX - pointer.x) });\n    Rectangle.set({ height: Math.abs(origY - pointer.y) });\n\n    //console.log(Rectangle);\n    canvas.renderAll();\n\n    //var pointer = canvas.getPointer(event);\n    //console.log(pointer);\n  };\n\n  const setShapeAttributes = (attributes) => {\n    var activeShape = canvas.getActiveObject();\n    if (activeShape) {\n      var attributes = attributes || {};\n      console.log(activeShape.stroke);\n      canvas.getActiveObject().set({\n        strokeWidth: attributes.strokeWidth || activeShape.strokeWidth,\n        stroke: attributes.strokeColor || activeShape.stroke,\n      });\n      // Save the canvas to State variable\n      const newCanvasState = canvas.toJSON();\n      setCanvasState(newCanvasState);\n      // Save state to History and Limit history depth to 32\n      setCanvasHistory((history) => [...history, newCanvasState].slice(-32));\n    }\n  };\n  let url = \"#\";\n  return (\n    <div\n      onMouseMove={handleMouseMove}\n      onClick={handleMouseClick}\n      className=\"App\"\n    >\n      <div className={tbStyles.propBar}>\n        <a href={url}>\n          <button className={tbStyles.buttontoolbar} onClick={onUndo} id=\"undo\">\n            <div className={tbStyles.tooltipDown}>\n              <img src=\"images/undo2.png\" alt=\"Undo\"></img>\n              <span className={tbStyles.tooltiptextDown}>Undo</span>\n            </div>\n          </button>\n          <button className={tbStyles.buttontoolbar} onClick={onRedo} id=\"redo\">\n            <div className={tbStyles.tooltipDown}>\n              <img src=\"images/redo2.png\" alt=\"Redo\"></img>\n              <span className={tbStyles.tooltiptextDown}>Redo</span>\n            </div>\n          </button>\n          <button className={tbStyles.buttontoolbar} onClick={onRedo} id=\"del\">\n            <div className={tbStyles.tooltipDown}>\n              <img src=\"images/delete2.png\" alt=\"Delete\"></img>\n              <span className={tbStyles.tooltiptextDown}>Delete</span>\n            </div>\n          </button>\n        </a>\n        <div className={tbStyles.dropdown}>\n          <button className={tbStyles.buttontoolbar} id=\"wList\">\n            <img src=\"images/lineWidth2.png\" alt=\"Line Width\"></img>\n            <div id=\"wlDropDown\" className={tbStyles.dropdowncontent}>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setStrokeWidth(1);\n                  setShapeAttributes({ strokeWidth: 1, strokeColor: \"green\" });\n                }}\n              >\n                <img src=\"images/stroke1.png\" alt=\"1\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setStrokeWidth(2);\n                  canvas.getActiveObject().set({ strokeWidth: 2 });\n                  // Save the canvas to State variable\n                  const newCanvasState = canvas.toJSON();\n                  setCanvasState(newCanvasState);\n                  // Save state to History and Limit history depth to 32\n                  setCanvasHistory((history) =>\n                    [...history, newCanvasState].slice(-32)\n                  );\n                }}\n              >\n                <img src=\"images/stroke2.png\" alt=\"2\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setStrokeWidth(4);\n                  canvas.getActiveObject().set({ strokeWidth: 4 });\n                  // Save the canvas to State variable\n                  const newCanvasState = canvas.toJSON();\n                  setCanvasState(newCanvasState);\n                  // Save state to History and Limit history depth to 32\n                  setCanvasHistory((history) =>\n                    [...history, newCanvasState].slice(-32)\n                  );\n                }}\n              >\n                <img src=\"images/stroke4.png\" alt=\"4\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setStrokeWidth(5);\n                  canvas.getActiveObject().set({ strokeWidth: 5 });\n                  // Save the canvas to State variable\n                  const newCanvasState = canvas.toJSON();\n                  setCanvasState(newCanvasState);\n                  // Save state to History and Limit history depth to 32\n                  setCanvasHistory((history) =>\n                    [...history, newCanvasState].slice(-32)\n                  );\n                }}\n              >\n                <img src=\"images/stroke5.png\" alt=\"5\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setStrokeWidth(10);\n                  canvas.getActiveObject().set({ strokeWidth: 10 });\n                  // Save the canvas to State variable\n                  const newCanvasState = canvas.toJSON();\n                  setCanvasState(newCanvasState);\n                  // Save state to History and Limit history depth to 32\n                  setCanvasHistory((history) =>\n                    [...history, newCanvasState].slice(-32)\n                  );\n                }}\n              >\n                <img src=\"images/stroke10.png\" alt=\"10\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setStrokeWidth(12);\n                  canvas.getActiveObject().set({ strokeWidth: 12 });\n                  // Save the canvas to State variable\n                  const newCanvasState = canvas.toJSON();\n                  setCanvasState(newCanvasState);\n                  // Save state to History and Limit history depth to 32\n                  setCanvasHistory((history) =>\n                    [...history, newCanvasState].slice(-32)\n                  );\n                }}\n              >\n                <img src=\"images/stroke12.png\" alt=\"12\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setStrokeWidth(15);\n                  canvas.getActiveObject().set({ strokeWidth: 15 });\n                  // Save the canvas to State variable\n                  const newCanvasState = canvas.toJSON();\n                  setCanvasState(newCanvasState);\n                  // Save state to History and Limit history depth to 32\n                  setCanvasHistory((history) =>\n                    [...history, newCanvasState].slice(-32)\n                  );\n                }}\n              >\n                <img src=\"images/stroke15.png\" alt=\"15\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setStrokeWidth(20);\n                  canvas.getActiveObject().set({ strokeWidth: 20 });\n                  // Save the canvas to State variable\n                  const newCanvasState = canvas.toJSON();\n                  setCanvasState(newCanvasState);\n                  // Save state to History and Limit history depth to 32\n                  setCanvasHistory((history) =>\n                    [...history, newCanvasState].slice(-32)\n                  );\n                }}\n              >\n                <img src=\"images/stroke20.png\" alt=\"20\"></img>\n              </a>\n              <a\n                href={url}\n                onClick={(e) => {\n                  setStrokeWidth(25);\n                  canvas.getActiveObject().set({ strokeWidth: 25 });\n                  // Save the canvas to State variable\n                  const newCanvasState = canvas.toJSON();\n                  setCanvasState(newCanvasState);\n                  // Save state to History and Limit history depth to 32\n                  setCanvasHistory((history) =>\n                    [...history, newCanvasState].slice(-32)\n                  );\n                }}\n              >\n                <img src=\"images/stroke25.png\" alt=\"25\"></img>\n              </a>\n            </div>\n          </button>\n        </div>\n      </div>\n      <div>\n        <h1>Hello CodeSandbox</h1>\n        <h2>Start editing to see some magic happen!</h2>\n        <button onClick={onUndo} disabled={canvasHistory[0] === canvasState}>\n          Undo\n        </button>\n        <button\n          onClick={onRedo}\n          disabled={canvasHistory[canvasHistory.length - 1] === canvasState}\n        >\n          Redo\n        </button>\n      </div>\n      <div className={styles.right}>\n        <div className={styles.tab}>\n          <button\n            onClick={(e) => {\n              setCanvasTool(\"select\");\n            }}\n            id=\"defaultSelect\"\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Select2.png\"} alt=\"Select\"></img>\n              <span className={styles.tooltiptext}>Selection</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              setCanvasTool(\"text\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/TextBox2.png\"} alt=\"TextBox\"></img>\n              <span className={styles.tooltiptext}>Text</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              setCanvasTool(\"pen\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/PenTool2.png\"} alt=\"Pen\"></img>\n              <span className={styles.tooltiptext}>Free-hand</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              setCanvasTool(\"cloud\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Cloud2.png\"} alt=\"Cloud\"></img>\n              <span className={styles.tooltiptext}>Cloud</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              setCanvasTool(\"callout\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/CallOut2.png\"} alt=\"Callout\"></img>\n              <span className={styles.tooltiptext}>Callout</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              setCanvasTool(\"image\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Image2.png\"} alt=\"Image Edit\"></img>\n              <span className={styles.tooltiptext}>Image Edit</span>\n            </div>\n          </button>\n          <div className={styles.tabspace}></div>\n          <button\n            onClick={(e) => {\n              setCanvasTool(\"line\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Line2.png\"} alt=\"Line\"></img>\n              <span className={styles.tooltiptext}>Line</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              setCanvasTool(\"polyline\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Polyline2.png\"} alt=\"Polyline\"></img>\n              <span className={styles.tooltiptext}>Polyline</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              setCanvasTool(\"arrow\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Arrow2.png\"} alt=\"Arrow\"></img>\n              <span className={styles.tooltiptext}>Arrow</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              setCanvasTool(\"arc\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Arc2.png\"} alt=\"Arc\"></img>\n              <span className={styles.tooltiptext}>Arc</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              setCanvasTool(\"rect\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Rectangle2.png\"} alt=\"Rectangle\"></img>\n              <span className={styles.tooltiptext}>Rectangle</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              setCanvasTool(\"polygon\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Polygon2.png\"} alt=\"Polygon\"></img>\n              <span className={styles.tooltiptext}>Polygon</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              setCanvasTool(\"rpolygon\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/RPolygon2.png\"} alt=\"Regular Polygon\"></img>\n              <span className={styles.tooltiptext}>Regular Polygon</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              setCanvasTool(\"circle\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Circle2.png\"} alt=\"Circle\"></img>\n              <span className={styles.tooltiptext}>Circle</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              setCanvasTool(\"ellipse\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Ellipse2.png\"} alt=\"Ellipse\"></img>\n              <span className={styles.tooltiptext}>Ellipse</span>\n            </div>\n          </button>\n          <div className={styles.tabspace}></div>\n          <button\n            onClick={(e) => {\n              setCanvasTool(\"dimension\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Dimension2.png\"} alt=\"Dimension\"></img>\n              <span className={styles.tooltiptext}>Dimension</span>\n            </div>\n          </button>\n\n          <button\n            onClick={(e) => {\n              setCanvasTool(\"area\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Area2.png\"} alt=\"Area\"></img>\n              <span className={styles.tooltiptext}>Area</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              setCanvasTool(\"length\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Length2.png\"} alt=\"Length\"></img>\n              <span className={styles.tooltiptext}>Length</span>\n            </div>\n          </button>\n          <button\n            onClick={(e) => {\n              setCanvasTool(\"perimeter\");\n            }}\n          >\n            <div className={styles.tooltip}>\n              <img src={\"images/Perimeter2.png\"} alt=\"Perimeter\"></img>\n              <span className={styles.tooltiptext}>Perimeter</span>\n            </div>\n          </button>\n        </div>\n      </div>\n      <canvas\n        ref={canvasRef}\n        id=\"my-fabric-canvas\"\n        width=\"1920\"\n        height=\"1080\"\n      />\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}