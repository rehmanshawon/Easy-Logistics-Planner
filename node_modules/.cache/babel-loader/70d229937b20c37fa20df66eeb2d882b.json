{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect } from \"react\"; // Improved version of https://usehooks.com/useOnClickOutside/\n\nconst useClickOutside = (ref, handler) => {\n  _s();\n\n  useEffect(() => {\n    let startedInside = false;\n    let startedWhenMounted = false;\n\n    const listener = event => {\n      // Do nothing if `mousedown` or `touchstart` started inside ref element\n      if (startedInside || !startedWhenMounted) return; // Do nothing if clicking ref's element or descendent elements\n\n      if (!ref.current || ref.current.contains(event.target)) return;\n      handler(event);\n    };\n\n    const validateEventStart = event => {\n      startedWhenMounted = ref.current;\n      startedInside = ref.current && ref.current.contains(event.target);\n    };\n\n    document.addEventListener(\"mousedown\", validateEventStart);\n    document.addEventListener(\"touchstart\", validateEventStart);\n    document.addEventListener(\"click\", listener);\n    return () => {\n      document.removeEventListener(\"mousedown\", validateEventStart);\n      document.removeEventListener(\"touchstart\", validateEventStart);\n      document.removeEventListener(\"click\", listener);\n    };\n  }, [ref, handler]);\n};\n\n_s(useClickOutside, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\nexport default useClickOutside;","map":{"version":3,"sources":["c:/Tutorials/fabric-drawing/src/useClickOutside.js"],"names":["useEffect","useClickOutside","ref","handler","startedInside","startedWhenMounted","listener","event","current","contains","target","validateEventStart","document","addEventListener","removeEventListener"],"mappings":";;AAAA,SAASA,SAAT,QAA0B,OAA1B,C,CAEA;;AACA,MAAMC,eAAe,GAAG,CAACC,GAAD,EAAMC,OAAN,KAAkB;AAAA;;AACxCH,EAAAA,SAAS,CAAC,MAAM;AACd,QAAII,aAAa,GAAG,KAApB;AACA,QAAIC,kBAAkB,GAAG,KAAzB;;AAEA,UAAMC,QAAQ,GAAIC,KAAD,IAAW;AAC1B;AACA,UAAIH,aAAa,IAAI,CAACC,kBAAtB,EAA0C,OAFhB,CAG1B;;AACA,UAAI,CAACH,GAAG,CAACM,OAAL,IAAgBN,GAAG,CAACM,OAAJ,CAAYC,QAAZ,CAAqBF,KAAK,CAACG,MAA3B,CAApB,EAAwD;AAExDP,MAAAA,OAAO,CAACI,KAAD,CAAP;AACD,KAPD;;AASA,UAAMI,kBAAkB,GAAIJ,KAAD,IAAW;AACpCF,MAAAA,kBAAkB,GAAGH,GAAG,CAACM,OAAzB;AACAJ,MAAAA,aAAa,GAAGF,GAAG,CAACM,OAAJ,IAAeN,GAAG,CAACM,OAAJ,CAAYC,QAAZ,CAAqBF,KAAK,CAACG,MAA3B,CAA/B;AACD,KAHD;;AAKAE,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCF,kBAAvC;AACAC,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,YAA1B,EAAwCF,kBAAxC;AACAC,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAmCP,QAAnC;AAEA,WAAO,MAAM;AACXM,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,EAA0CH,kBAA1C;AACAC,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,YAA7B,EAA2CH,kBAA3C;AACAC,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,OAA7B,EAAsCR,QAAtC;AACD,KAJD;AAKD,GA3BQ,EA2BN,CAACJ,GAAD,EAAMC,OAAN,CA3BM,CAAT;AA4BD,CA7BD;;GAAMF,e;;AA+BN,eAAeA,eAAf","sourcesContent":["import { useEffect } from \"react\";\r\n\r\n// Improved version of https://usehooks.com/useOnClickOutside/\r\nconst useClickOutside = (ref, handler) => {\r\n  useEffect(() => {\r\n    let startedInside = false;\r\n    let startedWhenMounted = false;\r\n\r\n    const listener = (event) => {\r\n      // Do nothing if `mousedown` or `touchstart` started inside ref element\r\n      if (startedInside || !startedWhenMounted) return;\r\n      // Do nothing if clicking ref's element or descendent elements\r\n      if (!ref.current || ref.current.contains(event.target)) return;\r\n\r\n      handler(event);\r\n    };\r\n\r\n    const validateEventStart = (event) => {\r\n      startedWhenMounted = ref.current;\r\n      startedInside = ref.current && ref.current.contains(event.target);\r\n    };\r\n\r\n    document.addEventListener(\"mousedown\", validateEventStart);\r\n    document.addEventListener(\"touchstart\", validateEventStart);\r\n    document.addEventListener(\"click\", listener);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", validateEventStart);\r\n      document.removeEventListener(\"touchstart\", validateEventStart);\r\n      document.removeEventListener(\"click\", listener);\r\n    };\r\n  }, [ref, handler]);\r\n};\r\n\r\nexport default useClickOutside;\r\n"]},"metadata":{},"sourceType":"module"}