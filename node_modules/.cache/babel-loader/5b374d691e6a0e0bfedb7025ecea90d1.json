{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/Tutorials/elp-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3;import React,{useRef,useEffect}from\"react\";import styled from\"styled-components\";import throttle from\"lodash.throttle\";import Svg from\"./Svg\";import usePaintAlpha from\"./usePaintAlpha\";import config from\"./config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var squareSize=config.squareSize,barSize=config.barSize,delay=config.delay;export var AlphaWrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  align-self: flex-end;\\n  position: relative;\\n  width: \",\";\\n  height: \",\";\\n  cursor: ew-resize;\\n\"])),squareSize+\"px\",barSize+\"px\");export var Canvas=styled.canvas.attrs(function(p){return{width:squareSize,height:barSize};})(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\"])));export var Handle=styled.div.attrs(function(p){return{style:{left:p.left+\"px\",transition:p.animate?\"left .2s ease-out\":\"0s\"}};})(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 0px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  width: \",\"px;\\n  height: \",\"px;\\n  pointer-events: none;\\n  svg {\\n    width: 100%;\\n    height: 100%;\\n  }\\n\"])),barSize,barSize);var Alpha=function Alpha(_ref){var hue=_ref.hue,alphaX=_ref.alphaX,offsetLeft=_ref.offsetLeft,animate=_ref.animate,setAlphaX=_ref.setAlphaX,setAlpha=_ref.setAlpha,setAnimate=_ref.setAnimate;var bar=useRef(null);var canvas=useRef(null);usePaintAlpha(canvas,hue);useEffect(function(){function computePosition(e){return Math.max(barSize/-2,Math.min(e.clientX-offsetLeft-barSize+5,squareSize-barSize/2));}function computeAlpha(x){return Math.round((x+barSize/2)*(100/squareSize));}var onMouseMove=throttle(function(e){var x=computePosition(e);var hue=computeAlpha(x);setAlphaX(x);setAlpha(hue);},delay);function onMouseUp(e){var x=computePosition(e);var hue=computeAlpha(x);setAlphaX(x);setAlpha(hue);document.body.removeEventListener(\"mousemove\",onMouseMove);document.body.removeEventListener(\"mouseup\",onMouseUp);}function onMouseDown(e){setAnimate(false);document.body.addEventListener(\"mousemove\",onMouseMove);document.body.addEventListener(\"mouseup\",onMouseUp);}var barRef=bar.current;barRef.addEventListener(\"mousedown\",onMouseDown);return function(){barRef.removeEventListener(\"mousedown\",onMouseDown);document.body.removeEventListener(\"mousemove\",onMouseMove);document.body.removeEventListener(\"mouseup\",onMouseUp);};},[offsetLeft,setAlpha,setAlphaX,setAnimate]);return/*#__PURE__*/_jsxs(AlphaWrapper,{ref:bar,children:[/*#__PURE__*/_jsx(Handle,{left:alphaX,animate:animate,children:/*#__PURE__*/_jsx(Svg,{name:\"handle\"})}),/*#__PURE__*/_jsx(Canvas,{ref:canvas})]});};export default Alpha;","map":{"version":3,"sources":["C:/Tutorials/elp-app/src/components/Picker/Alpha.js"],"names":["React","useRef","useEffect","styled","throttle","Svg","usePaintAlpha","config","squareSize","barSize","delay","AlphaWrapper","div","Canvas","canvas","attrs","p","width","height","Handle","style","left","transition","animate","Alpha","hue","alphaX","offsetLeft","setAlphaX","setAlpha","setAnimate","bar","computePosition","e","Math","max","min","clientX","computeAlpha","x","round","onMouseMove","onMouseUp","document","body","removeEventListener","onMouseDown","addEventListener","barRef","current"],"mappings":"iNAAA,MAAOA,CAAAA,KAAP,EAAgBC,MAAhB,CAAwBC,SAAxB,KAAyC,OAAzC,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,iBAArB,CACA,MAAOC,CAAAA,GAAP,KAAgB,OAAhB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,C,wFAEA,GAAQC,CAAAA,UAAR,CAAuCD,MAAvC,CAAQC,UAAR,CAAoBC,OAApB,CAAuCF,MAAvC,CAAoBE,OAApB,CAA6BC,KAA7B,CAAuCH,MAAvC,CAA6BG,KAA7B,CAEA,MAAO,IAAMC,CAAAA,YAAY,CAAGR,MAAM,CAACS,GAAV,wKAGdJ,UAAU,CAAG,IAHC,CAIbC,OAAO,CAAG,IAJG,CAAlB,CAQP,MAAO,IAAMI,CAAAA,MAAM,CAAGV,MAAM,CAACW,MAAP,CAAcC,KAAd,CAAoB,SAAAC,CAAC,QAAK,CAC9CC,KAAK,CAAET,UADuC,CAE9CU,MAAM,CAAET,OAFsC,CAAL,EAArB,CAAH,mEAAZ,CAKP,MAAO,IAAMU,CAAAA,MAAM,CAAGhB,MAAM,CAACS,GAAP,CAAWG,KAAX,CAAiB,SAAAC,CAAC,QAAK,CAC3CI,KAAK,CAAE,CACLC,IAAI,CAAEL,CAAC,CAACK,IAAF,CAAS,IADV,CAELC,UAAU,CAAEN,CAAC,CAACO,OAAF,CAAY,mBAAZ,CAAkC,IAFzC,CADoC,CAAL,EAAlB,CAAH,qSAWRd,OAXQ,CAYPA,OAZO,CAAZ,CAoBP,GAAMe,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAQR,IAPJC,CAAAA,GAOI,MAPJA,GAOI,CANJC,MAMI,MANJA,MAMI,CALJC,UAKI,MALJA,UAKI,CAJJJ,OAII,MAJJA,OAII,CAHJK,SAGI,MAHJA,SAGI,CAFJC,QAEI,MAFJA,QAEI,CADJC,UACI,MADJA,UACI,CACJ,GAAMC,CAAAA,GAAG,CAAG9B,MAAM,CAAC,IAAD,CAAlB,CACA,GAAMa,CAAAA,MAAM,CAAGb,MAAM,CAAC,IAAD,CAArB,CAEAK,aAAa,CAACQ,MAAD,CAASW,GAAT,CAAb,CAEAvB,SAAS,CAAC,UAAM,CACd,QAAS8B,CAAAA,eAAT,CAAyBC,CAAzB,CAA4B,CAC1B,MAAOC,CAAAA,IAAI,CAACC,GAAL,CACL1B,OAAO,CAAG,CAAC,CADN,CAELyB,IAAI,CAACE,GAAL,CAASH,CAAC,CAACI,OAAF,CAAYV,UAAZ,CAAyBlB,OAAzB,CAAmC,CAA5C,CAA+CD,UAAU,CAAGC,OAAO,CAAG,CAAtE,CAFK,CAAP,CAID,CAED,QAAS6B,CAAAA,YAAT,CAAsBC,CAAtB,CAAyB,CACvB,MAAOL,CAAAA,IAAI,CAACM,KAAL,CAAW,CAACD,CAAC,CAAG9B,OAAO,CAAG,CAAf,GAAqB,IAAMD,UAA3B,CAAX,CAAP,CACD,CAED,GAAMiC,CAAAA,WAAW,CAAGrC,QAAQ,CAAC,SAAA6B,CAAC,CAAI,CAChC,GAAMM,CAAAA,CAAC,CAAGP,eAAe,CAACC,CAAD,CAAzB,CACA,GAAMR,CAAAA,GAAG,CAAGa,YAAY,CAACC,CAAD,CAAxB,CAEAX,SAAS,CAACW,CAAD,CAAT,CACAV,QAAQ,CAACJ,GAAD,CAAR,CACD,CAN2B,CAMzBf,KANyB,CAA5B,CAQA,QAASgC,CAAAA,SAAT,CAAmBT,CAAnB,CAAsB,CACpB,GAAMM,CAAAA,CAAC,CAAGP,eAAe,CAACC,CAAD,CAAzB,CACA,GAAMR,CAAAA,GAAG,CAAGa,YAAY,CAACC,CAAD,CAAxB,CACAX,SAAS,CAACW,CAAD,CAAT,CACAV,QAAQ,CAACJ,GAAD,CAAR,CACAkB,QAAQ,CAACC,IAAT,CAAcC,mBAAd,CAAkC,WAAlC,CAA+CJ,WAA/C,EACAE,QAAQ,CAACC,IAAT,CAAcC,mBAAd,CAAkC,SAAlC,CAA6CH,SAA7C,EACD,CAED,QAASI,CAAAA,WAAT,CAAqBb,CAArB,CAAwB,CACtBH,UAAU,CAAC,KAAD,CAAV,CACAa,QAAQ,CAACC,IAAT,CAAcG,gBAAd,CAA+B,WAA/B,CAA4CN,WAA5C,EACAE,QAAQ,CAACC,IAAT,CAAcG,gBAAd,CAA+B,SAA/B,CAA0CL,SAA1C,EACD,CAED,GAAMM,CAAAA,MAAM,CAAGjB,GAAG,CAACkB,OAAnB,CACAD,MAAM,CAACD,gBAAP,CAAwB,WAAxB,CAAqCD,WAArC,EAEA,MAAO,WAAM,CACXE,MAAM,CAACH,mBAAP,CAA2B,WAA3B,CAAwCC,WAAxC,EACAH,QAAQ,CAACC,IAAT,CAAcC,mBAAd,CAAkC,WAAlC,CAA+CJ,WAA/C,EACAE,QAAQ,CAACC,IAAT,CAAcC,mBAAd,CAAkC,SAAlC,CAA6CH,SAA7C,EACD,CAJD,CAKD,CA3CQ,CA2CN,CAACf,UAAD,CAAaE,QAAb,CAAuBD,SAAvB,CAAkCE,UAAlC,CA3CM,CAAT,CA6CA,mBACE,MAAC,YAAD,EAAc,GAAG,CAAEC,GAAnB,wBACE,KAAC,MAAD,EAAQ,IAAI,CAAEL,MAAd,CAAsB,OAAO,CAAEH,OAA/B,uBACE,KAAC,GAAD,EAAK,IAAI,CAAC,QAAV,EADF,EADF,cAIE,KAAC,MAAD,EAAQ,GAAG,CAAET,MAAb,EAJF,GADF,CAQD,CAnED,CAqEA,cAAeU,CAAAA,KAAf","sourcesContent":["import React, { useRef, useEffect } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport throttle from \"lodash.throttle\"\r\nimport Svg from \"./Svg\"\r\nimport usePaintAlpha from \"./usePaintAlpha\"\r\nimport config from \"./config\"\r\n\r\nconst { squareSize, barSize, delay } = config\r\n\r\nexport const AlphaWrapper = styled.div`\r\n  align-self: flex-end;\r\n  position: relative;\r\n  width: ${squareSize + \"px\"};\r\n  height: ${barSize + \"px\"};\r\n  cursor: ew-resize;\r\n`\r\n\r\nexport const Canvas = styled.canvas.attrs(p => ({\r\n  width: squareSize,\r\n  height: barSize\r\n}))``\r\n\r\nexport const Handle = styled.div.attrs(p => ({\r\n  style: {\r\n    left: p.left + \"px\",\r\n    transition: p.animate ? \"left .2s ease-out\" : \"0s\"\r\n  }\r\n}))`\r\n  position: absolute;\r\n  top: 0px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  width: ${barSize}px;\r\n  height: ${barSize}px;\r\n  pointer-events: none;\r\n  svg {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n`\r\n\r\nconst Alpha = ({\r\n  hue,\r\n  alphaX,\r\n  offsetLeft,\r\n  animate,\r\n  setAlphaX,\r\n  setAlpha,\r\n  setAnimate\r\n}) => {\r\n  const bar = useRef(null)\r\n  const canvas = useRef(null)\r\n\r\n  usePaintAlpha(canvas, hue)\r\n\r\n  useEffect(() => {\r\n    function computePosition(e) {\r\n      return Math.max(\r\n        barSize / -2,\r\n        Math.min(e.clientX - offsetLeft - barSize + 5, squareSize - barSize / 2)\r\n      )\r\n    }\r\n\r\n    function computeAlpha(x) {\r\n      return Math.round((x + barSize / 2) * (100 / squareSize))\r\n    }\r\n\r\n    const onMouseMove = throttle(e => {\r\n      const x = computePosition(e)\r\n      const hue = computeAlpha(x)\r\n\r\n      setAlphaX(x)\r\n      setAlpha(hue)\r\n    }, delay)\r\n\r\n    function onMouseUp(e) {\r\n      const x = computePosition(e)\r\n      const hue = computeAlpha(x)\r\n      setAlphaX(x)\r\n      setAlpha(hue)\r\n      document.body.removeEventListener(\"mousemove\", onMouseMove)\r\n      document.body.removeEventListener(\"mouseup\", onMouseUp)\r\n    }\r\n\r\n    function onMouseDown(e) {\r\n      setAnimate(false)\r\n      document.body.addEventListener(\"mousemove\", onMouseMove)\r\n      document.body.addEventListener(\"mouseup\", onMouseUp)\r\n    }\r\n\r\n    const barRef = bar.current\r\n    barRef.addEventListener(\"mousedown\", onMouseDown)\r\n\r\n    return () => {\r\n      barRef.removeEventListener(\"mousedown\", onMouseDown)\r\n      document.body.removeEventListener(\"mousemove\", onMouseMove)\r\n      document.body.removeEventListener(\"mouseup\", onMouseUp)\r\n    }\r\n  }, [offsetLeft, setAlpha, setAlphaX, setAnimate])\r\n\r\n  return (\r\n    <AlphaWrapper ref={bar}>\r\n      <Handle left={alphaX} animate={animate}>\r\n        <Svg name=\"handle\" />\r\n      </Handle>\r\n      <Canvas ref={canvas} />\r\n    </AlphaWrapper>\r\n  )\r\n}\r\n\r\nexport default Alpha\r\n"]},"metadata":{},"sourceType":"module"}